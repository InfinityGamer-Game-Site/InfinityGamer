const tempFlag=true;const serverReportHttp="https://xyz";function IsPC(){var e=navigator.userAgent;var t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod");var i=true;for(var n=0;n<t.length;n++){if(e.indexOf(t[n])>0){i=false;break}}return i}let isWeb=IsPC();const zeroPad=(e,t)=>{return t=t-e.toString().length+1,Array(+(0<t&&t)).join("0")+e};const gettoday=()=>{var e=new Date,e=""+e.getFullYear()+zeroPad(e.getMonth()+1,2)+zeroPad(e.getDate(),2);return e};(function e(t,i){if(typeof exports==="object"&&typeof module==="object")module.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else{var n=i();for(var o in n)(typeof exports==="object"?exports:t)[o]=n[o]}})(window,function(){return function(e){var t={};function i(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,i);o.l=true;return o.exports}i.m=e;i.c=t;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};i.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};i.t=function(e,t){if(t&1)e=i(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n};i.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="/Users/mofier/site-home/vx-to-h5/dist/public";return i(i.s=5)}([function(e,t,i){"use strict";e.exports=new Proxy({},{get:function e(t,i){var n=window.PlatformAPI&&window.PlatformAPI[i];if(Object.prototype.toString.call(n)==="[object Function]"){n=n.bind(window.PlatformAPI)}return n}})},function(e,t){function i(e){return e&&e.__esModule?e:{default:e}}e.exports=i},function(e,t){function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function n(t){if(typeof Symbol==="function"&&i(Symbol.iterator)==="symbol"){e.exports=n=function e(t){return i(t)}}else{e.exports=n=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)}}return n(t)}e.exports=n},function(e,t,i){"use strict";e.exports=function(){return window.PlatformAPI.createBannerAd.apply(window.PlatformAPI,arguments)}},function(e,t,i){"use strict"},function(e,t,i){"use strict";(function(e,t,n,o,a,s){var c=i(1);var r=c(i(2));var l=c(i(10));i(4),i(17),i(19),i(20),i(21);var d={};window.texMap=d;(function(){window.__require=function e(t,i,n){function o(s,c){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw Error("Cannot find module '"+s+"'")}}c=i[s]={exports:{}},t[s][0].call(c.exports,function(e){return o(t[s][1][e]||e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++){o(n[s])}return o}({AnimEvent:[function(e,t){cc._RF.push(t,"d0933eqy6BKRL3FujRenZ3T","AnimEvent");var i=e("GlobalData");cc.Class({extends:cc.Component,properties:{goldNode:cc.Node},onEventNewRes:function e(){var t=this.goldNode;this.goldNode.getChildByName("value").getComponent(cc.Label).string=i.gold;for(var n,o=1;3>=o;o++){n=this.node.getChildByName("res_"+o),n.stopAllActions();var a=t.parent.convertToWorldSpaceAR(t.position);n.runAction(cc.moveTo(.15,this.node.convertToNodeSpaceAR(a)))}this.scheduleOnce(function(){for(var e,t=1;3>=t;t++){e=this.node.getChildByName("res_"+t),e.stopAllActions(),e.active=!1}}.bind(this),.18)},start:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData"}],AnimationMgr:[function(e,t){cc._RF.push(t,"4c709W6v+dGhIY5H1/vGK+J","AnimationMgr"),t.exports={inited:!1,allLoaded:!1,unitAtlas:[],resLoadedStatus:[],curArmyId:1,check_loaded:function e(){for(var t=1;8>=t;t++){if(1!=this.resLoadedStatus[t])return!1}return this.allLoaded=!0,cc.log(this.unitAtlas),!0},init:function e(){this.inited||this.load_one()},load_one:function e(){this.resLoadedStatus[this.curArmyId]=!1,cc.loader.loadRes("textures/army/"+this.curArmyId,cc.SpriteAtlas,function(e,t){this.unitAtlas[this.curArmyId]=t,this.resLoadedStatus[this.curArmyId]=!0,this.check_loaded(),this.curArmyId+=1,8>=this.curArmyId&&this.load_one()}.bind(this))}},cc._RF.pop()},{}],AudioCtrl:[function(e,t){cc._RF.push(t,"26c42YPPmZDTIrUE+Is1tde","AudioCtrl");var i=e("GlobalData");cc.Class({extends:cc.Component,properties:{audios:{default:[],type:cc.AudioClip},_bg_audio:null,_current_audio:null},onLoad:function e(){},init:function e(t){t&&this.play_bg()},onDestroy:function e(){null!=this._current_audio&&(cc.audioEngine.stop(this._current_audio),this._current_audio=null),null!=this._bg_audio&&(cc.audioEngine.stop(this._bg_audio),this._bg_audio=null)},start:function e(){},play_bg:function e(){0==i.sound_on&&(null!=this._bg_audio&&(cc.audioEngine.stop(this._bg_audio),this._bg_audio=null),this._bg_audio=cc.audioEngine.play(this.audios[0],!0,.5))},play_audio:function e(t,n){0==i.sound_on&&this._play_audio(t,n)},_play_audio:function e(t,i){null!=this._current_audio&&(cc.audioEngine.stop(this._current_audio),this._current_audio=null),void 0==i&&(i=.8),this._current_audio=cc.audioEngine.play(this.audios[t],!1,i)}}),cc._RF.pop()},{GlobalData:"GlobalData"}],ButtonScaler:[function(e,t){cc._RF.push(t,"7e7778ZtZpLf6YS5Y9q2VAs","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:.9,transDuration:.1,clickCd:0,_lastClickTime:0},onLoad:function e(){function t(){0!=i.button.interactable&&(this.stopAllActions(),this.runAction(i.scaleUpAction))}var i=this;i.initScale=this.node.scale,i.button=i.getComponent(cc.Button),i.scaleDownAction=cc.scaleTo(i.transDuration,i.pressedScale),i.scaleUpAction=cc.scaleTo(i.transDuration,i.initScale),this.node.on("touchstart",function(e){0!=i.button.interactable&&(e=new Date/1e3,e-i._lastClickTime<i.clickCd||(i._lastClickTime=e,this.stopAllActions(),this.runAction(i.scaleDownAction)))},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],Camera:[function(e,t){cc._RF.push(t,"f7f9cam+oVPWa4iCXzHvLqR","Camera"),cc.Class({extends:cc.Component,properties:{targetNode:cc.Node,_lastPosX:0,_lastPosY:0},start:function e(){},update:function e(t){t=this.targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO),(.5<Math.abs(t.x-this._lastPosX)||.5<Math.abs(t.y-this._lastPosY))&&(this.node.position=this.node.parent.convertToNodeSpaceAR(t)),this._lastPosX=t.x,this._lastPosY=t.y}}),cc._RF.pop()},{}],Const:[function(e,t){cc._RF.push(t,"16a73qa4+hOsrJFgz1lHPEn","Const"),t.exports={FPS:60,MAX_LV:30,MAX_SKILL_LV:60,MAP_WIDTH:3840,MAP_HEIGHT:2980,MINIMAP_WIDTH:220,METER_TO_PIXEL:100,INIT_SPEED:5,INIT_CAMERA_ZOOM_RATIO:.8,INIT_FOOD_SCALE:2,ADD_SPEED_NEED_EXP_PER_SEC:10,SKILL_HALO_PERCENT:3,ROBOT_AI_STATE_FREE:0,ROBOT_AI_STATE_EAT:1,ROBOT_AI_STATE_FIGHT:2,ROBOT_AI_STATE_OTHER:3,SHARE_NUMS:9,SHARE_WEIGHTS:{1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1},SHARE_TITLES:"[有人@你]我的大刀已经饥渴难耐 [有人@你]真香警告！今天就算饿死，死外边，也要玩这个游戏！ 我的倚天剑，不是很硬，但是够长！".split(" ")},cc._RF.pop()},{}],EvoItem:[function(e,t){cc._RF.push(t,"d4ca1c5QZBECoX/t0r3Zqjl","EvoItem");var i=e("avatar_data"),n=e("GlobalData"),o=e("Utils");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,lvLabel:cc.Label,avatarNode:cc.Node,weaponSprite:cc.Sprite,onbgNode:cc.Node,offbgNode:cc.Node,lockNode:cc.Node,_aid:0,_maxUnlockedLv:0},init:function e(t,i){this._aid=t,this._maxUnlockedLv=i,this.onRefresh()},onRefresh:function e(){var t=i.data[this._aid];if(void 0!=t){this.lvLabel.string="Lv. "+this._aid;var o=this._aid<=this._maxUnlockedLv;(this.onbgNode.active=o,this.offbgNode.active=!o,this.avatarNode.active=o,this.weaponSprite.node.active=o,this.lockNode.active=!o,o)?(this.nameLabel.string=t.name,t=n.weaponAtlas.getSpriteFrame("weapon_"+this._aid),void 0==t&&(t=n.weaponAtlas.getSpriteFrame("weapon_1")),this.weaponSprite.spriteFrame=t,this.createClips(this.avatarNode,["Walk"]),this.play("Walk")):this.nameLabel.string="Locked"}},play:function e(t){this.avatarNode.getComponent(cc.Animation).play(t)},get_atlas:function e(){return n.avatarAtlas_1},createClips:function e(t,i){for(var n=0;n<i.length;n++){for(var a=i[n],s=[],c=0;6>c;c++){var r=this._aid+"_"+a+"_"+o.zeroPad(c,2),r=this.get_atlas().getSpriteFrame(r);void 0!=r&&s.push(r)}a=this.createClip(a,s,!0),t.getComponent(cc.Animation).addClip(a)}},createClip:function e(t,i,n){return i=cc.AnimationClip.createWithSpriteFrames(i,60),i.name=t,i.speed=.12,n&&(i.wrapMode=cc.WrapMode.Loop),i},start:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils",avatar_data:"avatar_data"}],FriendUI:[function(t,i){cc._RF.push(i,"28432IAGyBEuIvCURtUjoLk","FriendUI"),cc.Class({extends:cc.Component,properties:{friendSprite:cc.Sprite,bgNode:cc.Node,_tex:null,_tick_count:0},onLoad:function e(){},start:function e(){},init:function t(i){return;this._tex=new cc.Texture2D,sharedCanvas.width=104,sharedCanvas.height=146,e.postMessage({messageType:4,score:""+i}),this._tick_count=0},_updateSubDomainCanvas:function e(){},update:function e(){}}),cc._RF.pop()},{}],GameOver:[function(i,s){cc._RF.push(s,"2b01cvvtBFFxJsgeYTPX+kq","GameOver");var c=i("GlobalData"),r=i("Utils"),l=i("Const"),h=i("VideoMgr"),_=i("Storage"),u=i("cc_roll_view");cc.Class({extends:cc.Component,properties:{bg1:cc.Node,bg2:cc.Node,bgGold:cc.Node,contentLbl:cc.Label,countdownLabel:cc.Label,btnRevive:cc.Node,btnWatch:cc.Node,btnLeave:cc.Node,btnWatchLabel:cc.Node,btnAd:cc.Node,btnAgain:cc.Node,scoreNode:cc.Node,killNode:cc.Node,rankNodePrefab:cc.Prefab,wheelNodePrefab:cc.Prefab,subRankNode:cc.Node,globalRankNode:cc.Node,todayRankNode:cc.Node,skillNode1:cc.Node,skillNode2:cc.Node,skillNode3:cc.Node,todayBuffNode:cc.Node,_gameoverAd:null,_adResized:!1,_score:0,_kill:0,_sysInfo:null,_tabSelected:1,_uiFixed:0},onLoad:function e(){this._sysInfo=c.system_info},showRollView:function e(t){return;if(!window.roll_infos)return;var i=window.roll_infos[t];if(i&&!cc.find("Canvas/revive/rollView_"+t)&&i.broadcast_onoff>0){var n=i;var o=new cc.Node("rollView_"+t);o.x=parseInt(n.background.place_x)+parseInt(n.background.background_w)/2;o.y=cc.winSize.height-parseInt(n.background.place_y)-parseInt(n.background.background_h)/2;var a=o.addComponent(u);cc.find("Canvas/revive").addChild(o);a.init(parseInt(n.background.background_w),parseInt(n.background.background_h),parseInt(n.icon.icon_space_x),parseInt(n.icon.icon_space_y));a.setData(n)}return o},on_refresh:function e(i,o,a,s){t("revive");var r=true||"function"==typeof createreviveVideoAd,l=n();this._score=a,this._kill=s;this.btnWatchLabel.getComponent(cc.Label).string="";if(i>=1){this._show_skip(),0<this._kill?this._show_gold():this._show_end()}else{this.bg1.active=!0,this.bgGold.active=!1,this.bg2.active=!1,this.contentLbl.string="You have been killed by "+o+" !";if(l){this.refresh_countdown(),r?(this.enable_ad_revive(!0),c.coin_revive>0?this._show_revive_video():this._show_share_video()):c.coin_revive>0?this._show_revive_share():this._show_share()}else{c.coin_revive>0?(this._show_revive(),this.refresh_countdown()):(this._show_skip(),0<this._kill?this._show_gold():this._show_end())}}!this._uiFixed&&this.fixUI(),this.showRollView("revive")},fixUI:function e(){this._uiFixed=0;cc.find("Canvas/revive/revive_bg_2/btn_wheel").active=cc.find("Canvas/revive/revive_bg_2/bg_rank/skill_title_bg/label").active=!1;var t=new cc.SpriteFrame,i=new cc.SpriteFrame,n=new cc.SpriteFrame,o=new cc.SpriteFrame;cc.find("Canvas/revive/revive_bg_2/skill_node/skill_title_bg").getComponent(cc.Sprite).spriteFrame=t,t.setTexture(d.title_xlmj);cc.find("Canvas/revive/revive_bg_2/bg_rank/skill_title_bg").getComponent(cc.Sprite).spriteFrame=i,i.setTexture(d.title_rank);cc.find("Canvas/revive/revive_bg_2/bg_rank").getComponent(cc.Sprite).spriteFrame=n,n.setTexture(d.overbg_rank);cc.find("Canvas/revive/revive_bg_2/skill_node").getComponent(cc.Sprite).spriteFrame=o,o.setTexture(d.overbg_skill);CCUtils.changeSpriteFrame(this.btnRevive,d.btn_cj_mf),CCUtils.changeSpriteFrame(this.btnWatch,d.btn_cj_mf),CCUtils.changeSpriteFrame(this.btnAd,d.btn_cj_sp),CCUtils.changeSpriteFrame(cc.find("Canvas/revive/revive_bg_2/btn_again"),d.btn_cj_mf),CCUtils.changeSpriteFrame(cc.find("Canvas/revive/revive_bg_2/btn_share"),d.btn_cj_sp);this.btnWatch.active=false;cc.find("Canvas/revive/revive_bg_2/btn_share").active=false},_show_revive_video:function e(){this.btnWatch.active=!1,this.btnRevive.active=!0,this.btnRevive.x=-140,this.btnAd.active=tempFlag&&!0,this.btnAd.x=140,this.btnLeave.x=360},_show_share_video:function e(){this.btnRevive.active=!1,this.btnWatch.active=!0,this.btnWatchLabel.active=!0,this.btnWatch.x=-140,this.btnWatchLabel.getComponent(cc.Label).string="Watch ad to Revive or Get a Life Token from Friend ",this.btnAd.active=tempFlag&&!0,this.btnAd.x=140,this.btnLeave.x=360},_show_revive_share:function e(){this.btnAd.active=tempFlag&&!1,this.btnRevive.active=!0,this.btnRevive.x=-140,this.btnWatch.active=!0,this.btnWatchLabel.active=!0,this.btnWatch.x=140,this.btnWatchLabel.getComponent(cc.Label).string="求助群友得复活币"},_show_share:function e(){this.btnRevive.active=!1,this.btnAd.active=tempFlag&&!1,this.btnWatch.active=!0,this.btnWatchLabel.active=!0,this.btnWatch.x=0,this.btnWatchLabel.getComponent(cc.Label).string="求助群友得复活币",this.btnWatch.stopAllActions(),this.btnWatch.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1))))},_show_revive:function e(){this.btnRevive.active=!0,this.btnAd.active=tempFlag&&!1,this.btnWatch.active=!1,this.btnRevive.x=0},_show_skip:function e(){this.btnRevive.active=!1,this.btnWatch.active=!1,this.btnWatchLabel.active=!1,this.btnAd.active=tempFlag&&!1,this.btnLeave.x=0},enable_ad_revive:function e(t){(this.btnAd.getComponent(cc.Button).interactable=t)&&(this.btnAd.stopAllActions(),this.btnAd.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1)))))},refresh_countdown:function e(t){this.unscheduleAllCallbacks();var i=t||9;this.schedule(function(){0<=--i?this.countdownLabel.string=i:this.on_click_skip()}.bind(this),1,t||9,0)},refresh_result_rank:function e(){var t=this.bg2.getChildByName("bg_rank");t.active=!1,this.scheduleOnce(function(){t.active=!0,t.getChildByName("rank").active=!1,t.getComponent("ResultRankUI").init()}.bind(this),.3)},cancel_share:function e(){this.refresh_countdown()},onClickShare:function t(){var i=o(),n=c.userInfo.openId+"_"+(new Date).getTime(),a="inviterid="+c.userInfo.openId+"&from=card&ticket="+n,s=this;null!=c.gameCtrl&&c.gameCtrl.play_audio(2),this.unscheduleAllCallbacks();console.log("share param:",a);e.shareAppMessage({title:i.title,imageUrl:i.imageUrl,query:a,success:function t(){s.refresh_countdown(s.countdownLabel.string);e.request({url:"https://zeus.h5haowan.top/game/sword/sharecoin.html",data:{openid:c.userInfo.openId,ticket:n},method:"POST"});s.scheduleOnce(function(){e.showModal({title:"提示",content:"好友通过你的分享进入游戏，你即可获得1复活币",showCancel:!1,confirmText:"好的"})}.bind(this),.5)}})},on_ad_revive:function e(){c.set_coin_revive(c.coin_revive+1),c.gameCtrl.onClickRevive()},onClickAdRevive:function e(){var t=this;if(true||"function"==typeof createreviveVideoAd){a(),PlatformAPI.createVideoAd("revive",function(){null!=c.gameCtrl&&c.gameCtrl.play_audio(2),t.unscheduleAllCallbacks(),t.on_ad_revive()})}},onClickRevive:function e(){a();null!=c.gameCtrl&&c.gameCtrl.play_audio(2),this.unscheduleAllCallbacks(),c.avatar.is_alive||c.gameCtrl.onClickRevive()},_show_gold:function e(){this.unscheduleAllCallbacks(),this.bg1.active=!1,this.bgGold.active=!0,this.bg2.active=!1,this.bgGold.getComponent("GoldBonusUI").init(this,this._kill)},on_update_gold:function e(){this.bg2.getChildByName("coin_gold").getChildByName("value").getComponent(cc.Label).string=c.gold},_show_end:function i(){if(cc.find("Canvas/revive/rollView_revive"))cc.find("Canvas/revive/rollView_revive").active=!1;this.showRollView("over"),t("over"),this.bg1.active=!1,this.bgGold.active=!1,this.bg2.active=!0,this.todayBuffNode.active=!1,this.unscheduleAllCallbacks(),this._tabSelected=1,this._on_click_tab(),this.skillNode1.getComponent("SkillItem").init(1),this.skillNode2.getComponent("SkillItem").init(2),this.skillNode3.getComponent("SkillItem").init(3),this.on_update_gold(),this.scoreNode.getComponent(cc.Label).string=this._score,this.killNode.getComponent(cc.Label).string=this._kill;var n=e.getStorageSync("best_play")||[0,0,0],o=this.killNode.getChildByName("ico_new");o.stopAllActions();var a=this.scoreNode.getChildByName("ico_new");(a.stopAllActions(),this._kill>n[0]?(o.active=!0,o.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(0,5)),cc.moveBy(.3,cc.v2(0,-5)))))):o.active=!1,this._score>n[1]?(a.active=!0,a.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(0,5)),cc.moveBy(.3,cc.v2(0,-5)))))):a.active=!1,r.push_record(),this.btnAgain.stopAllActions(),this.btnAgain.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1)))),0<c.wheel_auto&&0==c.today_play_times%c.wheel_auto&&0<c.today_play_times)&&(n="wheel_ad:"+r.getToday(),_.get_int(n)<c.wheel_ad_times&&this.on_click_wheel());PlatformAPI.updateLeaderboard("globalRank",this._score,{kills:this._kill})},on_click_skip:function e(){null!=c.gameCtrl&&c.gameCtrl.play_audio(2),this.scheduleOnce(function(){0<this._kill?this._show_gold():this._show_end()}.bind(this),.1)},on_click_share:function t(){null!=c.gameCtrl&&c.gameCtrl.play_audio(2);var i=o(this._score),n="inviterid="+c.userInfo.openId;e.shareAppMessage({title:i.title,imageUrl:i.imageUrl,query:n})},on_click_again:function e(){cc.game.pause();window.createVideoAd(()=>{cc.game.resume();null!=c.gameCtrl&&c.gameCtrl.play_audio(2),c.auto_new_game=!0,r.log_event("try_again",{});var e="today_buff:"+r.getToday(),e=_.get_int(e);c.today_play_times>=c.today_buff_req&&1<c.today_buff&&0==e?(this.todayBuffNode.active=!0,this.todayBuffNode.y=2e3,this.todayBuffNode.getComponent("TodayBuffUI").init(this),this.scheduleOnce(function(){true||"function"==typeof createbuffVideoAd?this.todayBuffNode.y=0:(this.todayBuffNode.active=!1,this.on_click_return())}.bind(this),1)):this.on_click_return()})},on_today_buff_back:function e(){this.todayBuffNode.active=!1,this.on_click_return()},on_click_return:function e(){null!=c.gameCtrl&&c.gameCtrl.play_audio(2),c.gameCtrl.onClickReturn()},on_click_all_rank:function e(){null!=c.gameCtrl&&c.gameCtrl.play_audio(2),c.homeUICtrl._friendRankNeedsUpdate=!0;var t=this.node.getChildByName("rank_bg");void 0==t&&(t=cc.instantiate(this.rankNodePrefab),this.node.addChild(t)),t.active=!0,t.getComponent("RankUI").on_open()},_on_click_tab:function e(){1==this._tabSelected?(this.globalRankNode.active=!1,this.todayRankNode.active=!1,this.subRankNode.active=!0,this.refresh_result_rank()):2==this._tabSelected?(r.log_event("click_global_rank",{}),this.bg2.getChildByName("bg_rank").active=!0,this.globalRankNode.active=!0,this.todayRankNode.active=!1,this.subRankNode.active=!1,this.globalRankNode.getChildByName("rank").getComponent("GlobalRankUI").on_refresh(!0)):3==this._tabSelected&&(r.log_event("click_today_rank",{}),this.bg2.getChildByName("bg_rank").active=!0,this.globalRankNode.active=!1,this.todayRankNode.active=!0,this.subRankNode.active=!1,this.todayRankNode.getChildByName("rank").getComponent("TodayRankUI").on_refresh(!0))},on_click_tab:function e(t,i){null!=c.gameCtrl&&c.gameCtrl.play_audio(2),this._tabSelected=i,this._on_click_tab()},on_click_wheel:function e(){var t=this.node.getChildByName("wheel_bg");void 0==t&&(t=cc.instantiate(this.wheelNodePrefab),this.node.addChild(t)),t.active=!0,r.log_event("click_wheel_2",{}),t.getComponent("WheelUI").on_open()},start:function e(){}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",VideoMgr:"VideoMgr",cc_roll_view:"cc_roll_view"}],Game:[function(t,i){cc._RF.push(i,"77f28olEWtCZJ6dtKussg+M","Game");var o=t("GlobalData"),s=t("Const"),c=t("avatar_data"),r=t("food_data"),l=t("Utils"),h=(t("quadtree"),t("name_data")),_=t("wxSdk"),u=t("Storage");cc.Class({extends:cc.Component,properties:{playerPrefab:cc.Prefab,foodPrefab:cc.Prefab,footprintPrefab:cc.Prefab,speedyBtn:cc.Button,attackBtn:cc.Node,revivePrefab:cc.Prefab,_reviveNode:null,levelLabel:cc.Label,killLabel:cc.Label,cameraNode:cc.Node,friendUINode:cc.Node,ranksPrefab:cc.Prefab,audioNode:cc.Node,newbieNode:cc.Node,comboNode:cc.Node,bottomNode:cc.Node,skill1Lbl:cc.Label,skill2Lbl:cc.Label,skill3Lbl:cc.Label,_player:null,_rankOpen:!0,_rankNum:5,_ranksNode:cc.Node,_foodsToLoad:[],_foodsToLeave:[],_avatarIdx:1,_foodIdx:1,_foodtree:null,_avatartree:null,_startLoadAvatar:!1,_fixedTimeStep:.05,_accumulatedTime:0,_reviveTimes:0,_lastRefreshExp:0,_gameStartTime:0,_killTimes:0,_score:0,_myRank:13,_foodMax:130,_avatarMax:11,_comboQueue:[],_seqKillTimes:0,_lastKillTime:0,killEffect:null,masterAva:null,masterName:null,enemyAva:null,enemyName:null,masterLabel:null,enemyLabel:null,killText:null,tid:null,exSound:[]},onLoad:function e(){cc.Camera.main.node.on("clickBtnLeft_attack",this.onClickAttack.bind(this));cc.Camera.main.node.on("clickBtnRight_skill",this.onClickSpeedyStart.bind(this));cc.Camera.main.node.on("clickEndRight_skill",this.onClickSpeedyEnd.bind(this));this.speedyBtn.node.active=!isWeb;this.attackBtn.active=!isWeb;this.kill_effect_init();o.gameOver=!1,o.gameCtrl=this,this.entities={},this.avatars={},this.avatarsPool=new cc.NodePool,this.foods={},this.food_infos={},this.foodsPool=new cc.NodePool,this.footprintsPool=new cc.NodePool,this.speedyBtn.node.on(cc.Node.EventType.TOUCH_START,function(){this.onClickSpeedyStart()}.bind(this)),this.speedyBtn.node.on(cc.Node.EventType.TOUCH_END,function(){this.onClickSpeedyEnd()}.bind(this)),this.speedyBtn.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.onClickSpeedyEnd()}.bind(this)),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(cc.renderer.enableDirtyRegion(!0),cc.renderer.setDirtyRegionCountThreshold(14)),this.init(),this._ranksNode=cc.instantiate(this.ranksPrefab),this.node.addChild(this._ranksNode),this.audioNode.getComponent("AudioCtrl").init(!0),this.scheduleOnce(function(){this.refresh_ui()}.bind(this),.05),this.scheduleOnce(function(){1>=o.play_times&&n()?this.refresh_newbie():this.newbieNode.active=!1}.bind(this),.1)},kill_effect_init:function t(){var i=this;var n=this;cc.loader.load([cc.url.raw("/resources/audio/kill.mp3"),cc.url.raw("/resources/audio/kill0.mp3"),cc.url.raw("/resources/audio/kill1.mp3"),cc.url.raw("/resources/audio/kill2.mp3"),cc.url.raw("/resources/audio/kill3.mp3"),cc.url.raw("/resources/audio/kill4.mp3"),cc.url.raw("/resources/audio/kill5.mp3"),cc.url.raw("/resources/audio/kill6.mp3"),cc.url.raw("/resources/audio/kill7.mp3")],function(e,t){if(!e){i.exSound.kill=t.getContent(cc.url.raw("/resources/audio/kill.mp3")),i.exSound.kill0=t.getContent(cc.url.raw("/resources/audio/kill0.mp3")),i.exSound.kill1=t.getContent(cc.url.raw("/resources/audio/kill1.mp3")),i.exSound.kill2=t.getContent(cc.url.raw("/resources/audio/kill2.mp3")),i.exSound.kill3=t.getContent(cc.url.raw("/resources/audio/kill3.mp3")),i.exSound.kill4=t.getContent(cc.url.raw("/resources/audio/kill4.mp3")),i.exSound.kill5=t.getContent(cc.url.raw("/resources/audio/kill5.mp3")),i.exSound.kill6=t.getContent(cc.url.raw("/resources/audio/kill6.mp3")),i.exSound.kill7=t.getContent(cc.url.raw("/resources/audio/kill7.mp3"))}});if(!cc.find("Canvas/ui/killEffect")){this.killEffect=new cc.Node("killEffect"),this.masterAva=new cc.Node("masterAva"),this.enemyAva=new cc.Node("enemyAva"),this.masterName=new cc.Node("masterName"),this.enemyName=new cc.Node("enemyName"),this.killText=new cc.Node("killText");this.killEffect.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(d.kill_bg);this.killEffect.setPosition(cc.v2(0,260)),cc.find("Canvas/ui").addChild(this.killEffect);cc.loader.load({url:o.userInfo.avatarUrl||"./fbcdn/avatar.png",type:"png"},function(e,t){if(!e){n.masterAva.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),n.masterAva.x=-160,n.masterAva.zIndex=2,n.masterAva.setContentSize(cc.size(70,70));n.enemyAva.addComponent(cc.Sprite).spriteFrame=null,n.enemyAva.x=160,n.enemyAva.zIndex=2,n.enemyAva.setContentSize(cc.size(70,70))}});this.masterLabel=this.masterName.addComponent(cc.Label),this.enemyLabel=this.enemyName.addComponent(cc.Label);this.masterLabel.string=l.subString(o.userInfo.nickName||"Player",10,!0),this.masterLabel.fontSize=24,this.masterName.color=cc.color(255,255,255),this.masterName.zIndex=2,this.masterName.x=-310;this.enemyLabel.string=l.subString(o.userInfo.nickName||"Player",10,!0),this.enemyLabel.fontSize=24,this.enemyName.color=cc.color(255,255,255),this.enemyName.zIndex=2,this.enemyName.x=310;this.killText.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(d.kill1);this.killEffect.addChild(this.killText),this.killEffect.addChild(this.masterAva),this.killEffect.addChild(this.masterName),this.killEffect.addChild(this.enemyAva),this.killEffect.addChild(this.enemyName)}else{this.killEffect=cc.find("Canvas/ui/killEffect"),this.masterAva=cc.find("Canvas/ui/killEffect/masterAva"),this.enemyAva=cc.find("Canvas/ui/killEffect/enemyAva"),this.masterLabel=cc.find("Canvas/ui/killEffect/masterName").getComponent.Label,this.enemyLabel=cc.find("Canvas/ui/killEffect/enemyName").getComponent.Label,this.killText=cc.find("Canvas/ui/killEffect/killText")}this.killEffect.active=!1;e.hideLoading()},kill_effect:function e(t,i,n){var a=this;if(this.killEffect){if(this.tid){clearTimeout(this.tid),this.killEffect.active=!1}this.enemyLabel.string=l.subString(t,6,!0),this.killText.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(d["kill"+Math.min(i,7)]),this.killEffect.active=!0;const e=(e,t)=>{return Math.floor(Math.random()*(t-e+1)+e)};cc.loader.load({url:cc.url.raw("resources/avatars/"+e(1,200)+".png"),type:"png"},function(e,t){if(!e){a.enemyAva.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),a.enemyAva.setContentSize(cc.size(70,70))}});0==o.sound_on&&cc.audioEngine.play(this.exSound["kill"+Math.min(i,7,n==1?0:n)]);this.tid=setTimeout(function(){a.killEffect.active=!1},3e3)}else console.error("no killEf found!~")},play_audio:function e(t,i){this.audioNode.getComponent("AudioCtrl").play_audio(t,i)},clear:function e(){this.avatarsPool.clear(),this.entities={},this.avatars={},this.foodsPool.clear(),this.footprintsPool.clear(),this.foods={},this.food_infos={}},init:function e(){o.gameOver=!1,this.clear(),this._foodtree=new Quadtree({x:-s.MAP_WIDTH/2,y:-s.MAP_HEIGHT/2,width:s.MAP_WIDTH,height:s.MAP_HEIGHT},5,10),this._avatartree=new Quadtree({x:-s.MAP_WIDTH/2,y:-s.MAP_HEIGHT/2,width:s.MAP_WIDTH,height:s.MAP_HEIGHT},3,6),null!=o.serverConfigs&&(void 0!=o.serverConfigs.food_max&&(this._foodMax=o.serverConfigs.food_max),void 0!=o.serverConfigs.avatar_max&&(this._avatarMax=o.serverConfigs.avatar_max)),this.init_foods(this._foodMax),this.init_avatars(this._avatarMax),this.loadEnteredAvatars(),this.scheduleOnce(function(){this.init_self(),this.showBottomNotice("GAME START",3)}.bind(this),.5),this.tickCount=0,this._gameStartTime=l.getNow(),this._lastRefreshExp=this._score=this._killTimes=0,this.levelLabel.string=1,this.killLabel.string=this._killTimes,this.refresh_friend_ui(),this.init_skills(),this.xSpeed2=this.ySpeed2=this.xSpeed1=this.ySpeed1=0},set_input_control:function e(){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function e(i){i===cc.macro.KEY.w?(t.ySpeed1=1,t.update_input_speed()):i===cc.macro.KEY.s?(t.ySpeed2=-1,t.update_input_speed()):i===cc.macro.KEY.a?(t.xSpeed1=-1,t.update_input_speed()):i===cc.macro.KEY.d?(t.xSpeed2=1,t.update_input_speed()):void 0},onKeyReleased:function e(i){i===cc.macro.KEY.w?(t.ySpeed1=0,t.update_input_speed()):i===cc.macro.KEY.s?(t.ySpeed2=0,t.update_input_speed()):i===cc.macro.KEY.a?(t.xSpeed1=0,t.update_input_speed()):i===cc.macro.KEY.d?(t.xSpeed2=0,t.update_input_speed()):void 0}},t.node)},update_input_speed:function e(){var t=this.xSpeed1+this.xSpeed2,i=this.ySpeed1+this.ySpeed2;if(null!=o.avatar){var n=this.entities[o.avatar.id];void 0!=n&&(0==t&&0==i?n.getComponent("Player").setSpeed(0):(t=360-(180/Math.PI*Math.atan2(i,t)+360)%360,n.getComponent("Player").setSpeed(5),n.getComponent("Player").setAngle(t)))}},refresh_ui:function e(){try{2.16<o.system_info.windowWidth/o.system_info.windowHeight&&(this.node.getChildByName("ui").getComponent(cc.Widget).left=65,this._ranksNode.getComponent(cc.Widget).left=65,this.speedyBtn.node.getComponent(cc.Widget).right=70,this.attackBtn.getComponent(cc.Widget).right=130)}catch(e){}},refresh_newbie:function e(){try{this.newbieNode.active=!0;var t=this.newbieNode.getChildByName("newbie_attack");t.x=this.attackBtn.x-196,t.y=this.attackBtn.y+74;var i=this.newbieNode.getChildByName("newbie_speedy");i.x=this.speedyBtn.node.x-118,i.y=this.speedyBtn.node.y+140;var n=this.newbieNode.getChildByName("newbie_move"),o=this.node.getChildByName("ui").getChildByName("joy_stick");n.x=o.x+80,n.y=o.y+80,this.newbieNode.getChildByName("btn_iknow").runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1)))),this.scheduleOnce(function(){this.on_click_know()}.bind(this),5)}catch(t){}},on_click_know:function e(){this.newbieNode.active=!1},init_skills:function e(){if(1==o.skills[0]&&1==o.skills[1]&&1==o.skills[2])this.bottomNode.active=!1;else{this.bottomNode.active=!0;var t="+"+(.4*(o.skills[0]-1)).toFixed(1)+"%";0<o.skills_halo[0]&&(t+=",+"+s.SKILL_HALO_PERCENT+"%");var i="+"+(.4*(o.skills[1]-1)).toFixed(1)+"%";0<o.skills_halo[1]&&(i+=",+"+s.SKILL_HALO_PERCENT+"%");var n="+"+(.4*(o.skills[2]-1)).toFixed(1)+"%";0<o.skills_halo[2]&&(n+=",+"+s.SKILL_HALO_PERCENT+"%"),this.skill1Lbl.string=t,this.skill2Lbl.string=i,this.skill3Lbl.string=n}},init_foods:function e(t,i){for(var n in this._foodtree.clear(),this.food_infos){this.food_infos.hasOwnProperty(n)&&this._foodtree.insert(this.food_infos[n])}for(n=0;n<t;n++){var a=this.new_food();i&&25>=l.getRandomInt(1,100)&&(a.x/=2,a.y/=2),o.enteredFoods.push(a)}this.loadEnteredFoods()},check_foods:function e(){if(void 0!=this.foods){var t,i=0;for(t in this.foods){this.foods.hasOwnProperty(t)&&(i+=1)}i=this._foodMax-i,0<i&&this.init_foods(i,!0)}},new_food:function e(){var t=l.getRandomPosition(),t={x:t[0],y:t[1],width:10,height:10,id:this._foodIdx,fid:l.getRandomInt(1,7)};return this._foodIdx+=1,t},init_self:function e(){var t=this.new_avatar();if(t.is_player=!0,t.level=1,1<o.today_buff){var i=u.get_int("today_buff_until");if(l.getNow()<i)for(t.level=o.today_buff,t.expLevel=o.today_buff,t.modelID=o.today_buff,t.weaponID=o.today_buff,i=1;i<o.today_buff;i++){t.exp+=c.data[i].exp}}if(0<o.wheel_buff){for(t.level=10,t.expLevel=10,t.modelID=10,t.weaponID=10,i=1;10>i;i++){t.exp+=c.data[i].exp}o.on_update_wheel_buff(o.wheel_buff-1)}t.name=null!=o.userInfo&&void 0!=o.userInfo.nickName||"Player"?l.subString(o.userInfo.nickName||"Player",10,!0):"荣耀勇士",i=this._get_random_pos_with_less_enemy(),t.x=i[0],t.y=i[1],o.enteredAvatars.push(t)},init_avatars:function e(t){for(var i,n=[1,1,2,2,3,4,5,6,7,7,8,8,9,9,10],a=h.data.length,s=0;s<t;s++){i=this.new_avatar(),i.level=n[s],i.expLevel=n[s],i.modelID=n[s],i.weaponID=n[s];for(var r=1;r<n[s];r++){i.exp+=c.data[r].exp}i.name=l.subString(h.data[l.getRandomInt(0,a-1)],10,!0),i.expOfLevel=l.getRandomInt(1,c.data[n[s]].exp-10),o.enteredAvatars.push(i)}},new_avatar:function e(){var t=l.getRandomPosition(),t={is_player:!1,is_alive:!0,in_protect:!1,name:this._avatarIdx,x:t[0],y:t[1],width:30,height:30,id:this._avatarIdx,modelID:1,weaponID:1,level:1,expLevel:1,exp:0,expOfLevel:0,addSpeed:0,revive_times:0};return this._avatarIdx+=1,t},loadEnteredAvatars:function e(){this._startLoadAvatar=!0},onRealAvatarEnterWorld:function e(t){var i=null;if((i=0<this.avatarsPool.size()?this.avatarsPool.get():cc.instantiate(this.playerPrefab)).x=t.x,i.y=t.y,i.getComponent("Player").setAvatar(t),this.entities[t.id]=i,this.avatars[t.id]=t,i.getComponent("Player").initModel(),i.getComponent("Player").onIsDead(t,!1),i.getComponent("Player").setPos(t.x,t.y),t.is_player){o.avatar=t,this.set_protect(o.avatar),this._player=i;var n=this.node.getChildByName("ui").getChildByName("joy_stick");if(isWeb){n.removeComponent(cc.Widget);n.position=cc.v2(80,80);n.opacity=0}n.getComponent("Joystick").sprite=i,n.getChildByName("joy_bg").getComponent("JoystickBg")._playerNode=i,this.cameraNode.getComponent("Camera").targetNode=i,this.onRefreshLvInfo(t),this.onIsDead(t)}this.node.getChildByName("avatars").addChild(i,t.modelID),this.onUpdateRank(),this._avatartree.insert(t)},onAvatarLeaveWorld:function e(t){null!=this.entities&&void 0!=this.entities[t.id]&&(this.avatarsPool.put(this.entities[t.id]),delete this.entities[t.id],delete this.avatars[t.id],this.onUpdateRank())},loadEnteredFoods:function e(){for(var t=0,i=o.enteredFoods.length;t<i;t++){this.onFoodEnterWorld(o.enteredFoods[t])}o.enteredFoods=[]},onFoodEnterWorld:function e(t){this._foodsToLoad.push(t)},onFoodRealEnterWorld:function e(t){var i;(i=0<this.foodsPool.size()?this.foodsPool.get():cc.instantiate(this.foodPrefab)).x=t.x,i.y=t.y,this.foods[t.id]=i,this.food_infos[t.id]=t,i.fid=t.fid;var n=o.weaponAtlas.getSpriteFrame("food_"+t.fid);if(void 0!=n){var a=r.data[t.fid],c=100;void 0!=a&&void 0!=a.radius_per&&(c=a.radius_per),i.active=!0,i.scale=s.INIT_FOOD_SCALE*c/100,i.getComponent(cc.Sprite).spriteFrame=n,this.node.getChildByName("foods").addChild(i),this._foodtree.insert(t)}},onFoodLeaveWorld:function e(t){this.onFoodRealLeaveWorld(t)},onFoodRealLeaveWorld:function e(t){null!=this.foods&&void 0!=this.foods[t.id]&&(this.foodsPool.put(this.foods[t.id]),delete this.foods[t.id],delete this.food_infos[t.id])},reduce_exp:function e(t,i){null!=o.gameCtrl&&(t=o.gameCtrl.avatars[t],void 0!=t&&((t.exp=Math.max(t.exp-i,0),t.expOfLevel>=i)?t.expOfLevel-=i:(i-=t.expOfLevel,1>=t.level?(t.expOfLevel=0,t.expLevel=1):(--t.level,t.expLevel=t.level,t.expOfLevel=Math.max((c.data[t.expLevel].exp||0)-i,0),this.on_level_downgrade(t,t.level))),this.onRefreshExp(t)))},add_exp_delay:function e(t,i,n){this.scheduleOnce(function(){this.add_exp(t,i)}.bind(this),n)},add_exp:function e(t,i){if(null!=o.gameCtrl&&(t=o.gameCtrl.avatars[t],void 0!=t)){if(!t.is_player){var n={1:80,2:60,3:40,4:30,5:20}[this._myRank];void 0==n&&(n=0),i=Math.floor(i*(1+n/100))}t.exp+=i,t.expOfLevel+=i,i=c.data[t.expLevel].exp||0,0<i&&t.expOfLevel>i&&(t.expOfLevel-=i,t.expLevel<t.level?t.expLevel+=1:t.level<s.MAX_LV?(t.level=Math.min(t.level+1,s.MAX_LV),t.expLevel=Math.min(t.expLevel+1,s.MAX_LV),this.on_level_upgrade(t,t.level)):t.expOfLevel=i),this.onRefreshExp(t),t.is_player&&(this._score=t.exp,this.onRefreshLvInfo(t),(30<this._score-this._lastRefreshExp||10>=this._score)&&this.refresh_friend_ui())}},refresh_friend_ui:function e(){this.friendUINode.getComponent("FriendUI").init(this._score),this._lastRefreshExp=this._score,this.scheduleOnce(function(){this.friendUINode.getChildByName("friend").active=!0}.bind(this),.2)},refresh_avatartree:function e(){if(null!=this._avatartree)for(var t in this._avatartree.clear(),this.avatars){this.avatars.hasOwnProperty(t)&&(this.avatars[t].x=this.entities[t].x,this.avatars[t].y=this.entities[t].y,this._avatartree.insert(this.avatars[t]))}},set_protect:function e(t){null!=t&&null!=o.avatar&&t.id==o.avatar.id&&(t.in_protect=!0,this.scheduleOnce(function(){t.in_protect=!1}.bind(this),3))},set_position:function e(){},set_direction:function e(){},updatePosition:function e(t){void 0!=this.entities[t.id]&&(t.needsSyncToServer()||this.entities[t.id].getComponent("Player").move_to(t.position.x*s.METER_TO_PIXEL,t.position.z*s.METER_TO_PIXEL))},onClickRank:function e(){var t=this._ranksNode.getChildByName("body");this._rankOpen?(this._rankOpen=!1,t.active=!1):(this._rankOpen=!0,t.active=!0)},onUpdateRank:function e(){if(null!=o.avatar){var t=Object.keys(this.avatars).map(function(e){return[e,this.avatars[e]]}.bind(this));t.sort(function(e,t){return t[1].exp==e[1].exp?t[1].id-e[1].id:t[1].exp-e[1].exp});for(var i=16,n=0;n<t.length;n++){t[n][1].id==o.avatar.id&&(i=n+1,this._myRank=i)}for(var a=this._ranksNode.getChildByName("body"),t=t.slice(0,this._rankNum),n=0;n<t.length;n++){var s=a.getChildByName("rank"+(n+1)),c=a.getChildByName("exp"+(n+1)),r=a.getChildByName("nickname"+(n+1));s.active=!0,c.active=!0,r.active=!0,3>n&&(a.getChildByName("ico_"+(n+1)).active=!0);var l=t[n][1];r.getComponent(cc.Label).string=l.name,c.getComponent(cc.Label).string=l.exp;var d=cc.Color.WHITE;0==n?d.fromHEX("#FF5236"):1==n?d.fromHEX("#55FF75"):2==n&&d.fromHEX("#3695FF"),l.id==o.avatar.id&&d.fromHEX("#B47EFF"),3<=n&&(s.color=d),r.color=d,c.color=d}for(n=t.length;n<this._rankNum;n++){s=a.getChildByName("rank"+(n+1)),c=a.getChildByName("exp"+(n+1)),r=a.getChildByName("nickname"+(n+1)),3>n&&(a.getChildByName("ico_"+(n+1)).active=!1),s.active=!1,c.active=!1,r.active=!1}a.getChildByName("rank").getComponent(cc.Label).string=i,a.getChildByName("nickname").getComponent(cc.Label).string=o.avatar.name,a.getChildByName("exp").getComponent(cc.Label).string=o.avatar.exp}else this.scheduleOnce(function(){this.onUpdateRank()}.bind(this),1)},onClickAttack:function e(){0==o.sound_on&&cc.audioEngine.play(this.exSound.kill),a();null!=this._player&&!o.gameOver&&o.avatar.is_alive&&(this._player.getComponent("Player")._inAttackAction||(this._player.getComponent("Player").playAttackAction(),this._player.getComponent("Player").onClickAttack()))},on_attack:function t(i,n,a){if(void 0!=this.entities[i.id]&&(null!=o.avatar&&o.avatar.id==i.id||this.entities[i.id].getComponent("Player").playAttackAction(),a)){var s=i.is_alive&&this.check_rayhit(i,n)&&n.is_alive&&!n.in_protect;this.scheduleOnce(function(){if(s&&i.is_alive){var t=n.is_alive;if(n.is_alive=!1,this.onIsDead(n),null!=o.avatar&&i.id==o.avatar.id){this._killTimes+=1,this.killLabel.string=this._killTimes,void 0!=n.name&&this.showTopNotice("You Killed "+l.subString(n.name,8,!0),1.5);var a=l.getNow();10>a-this._lastKillTime?(this._seqKillTimes+=1,2<=this._seqKillTimes&&this.showNewCombo("x"+this._seqKillTimes,1.7)):this._seqKillTimes=1,this.kill_effect(n.name,Math.max(this._seqKillTimes,1),this._killTimes),this._lastKillTime=a,this.audioNode.getComponent("AudioCtrl").play_audio(1);try{e.vibrateShort()}catch(e){}}a=c.data[n.expLevel].exp_bonus||0,this.add_exp_delay(i.id,a,.2),i.is_player||n.is_player||this.reduce_exp(n.id,a),null!=o.avatar&&n.id==o.avatar.id&&t&&this.on_gameover(i.name)}}.bind(this),.12)}},check_rayhit:function e(t,i){if(null!=t&&null!=i){var n=this.entities[t.id],o=this.entities[i.id];if(void 0==n||void 0==o)return!1;i=[n.x,n.y],t=[o.x,o.y];var a=n.getComponent("Player").attackRadius,s=n.getComponent("Player").radius,o=o.getComponent("Player").radius,n=n.getComponent("Player")._playerNode.rotation,n=(n+30)%360,c=l.getDist2({x:i[0],y:i[1]},{x:t[0],y:t[1]});return!!(c<2*(s*s))||(a+=o,!(c>a*a)&&0<=l.point_interact_ray(Math.cos(n/180*Math.PI),-Math.sin(n/180*Math.PI),t[0]-i[0],t[1]-i[1]))}},onIsDead:function e(t){void 0!=this.entities[t.id]&&(t.is_player&&this.cancel_speedy(),this.entities[t.id].getComponent("Player").onIsDead(t,!0),this.scheduleOnce(function(){t.id!=o.avatar.id&&this.onRevive(t)}.bind(this),1))},onRevive:function e(t){var i=l.getRandomPosition();if(void 0==t.revive_times?t.revive_times=1:t.revive_times+=1,t.is_player)i=this._get_random_pos_with_less_enemy();else if((i=this._get_random_pos_beyond_player(),2<=t.revive_times)&&(t.name=l.subString(h.data[l.getRandomInt(0,h.data.length-1)],10,!0),t.revive_times=0,null!=o.avatar&&t.exp>o.avatar.exp)){var n=Object.keys(this.avatars).map(function(e){return[e,this.avatars[e]]}.bind(this));n.sort(function(e,t){return t[1].exp==e[1].exp?t[1].id-e[1].id:t[1].exp-e[1].exp});var a=Math.floor(.8*o.avatar.exp);5<n.length&&(a=n[4].exp),n=t.exp-a,0<n&&this.reduce_exp(t.id,n)}t.x=i[0],t.y=i[1],this.entities[t.id].x=i[0],this.entities[t.id].y=i[1],t.is_alive=!0,this.entities[t.id].getComponent("Player").onIsDead(t,!0),t.is_player&&this.set_protect(t)},get_revive_node:function e(){return null==this._reviveNode&&(this._reviveNode=cc.instantiate(this.revivePrefab),this.node.addChild(this._reviveNode)),this._reviveNode},on_gameover:function e(t){this.friendUINode.active=!1,this.audioNode.getComponent("AudioCtrl").play_audio(1),this.scheduleOnce(function(){var e=this.get_revive_node();1>this._reviveTimes?l.log_event("end_game_1",{level:""+o.avatar.expLevel}):l.log_event("end_game_2",{level:""+o.avatar.expLevel}),e.active=!0,e.getComponent("GameOver").on_refresh(this._reviveTimes,t,this._score,this._killTimes)}.bind(this),2),o.last_play=[this._killTimes,this._score,l.getNow()-this._gameStartTime,o.avatar.expLevel]},on_real_revive:function e(){return o.set_coin_revive(o.coin_revive+1),this.onClickRevive(),"复活成功"},onClickShare:function e(){},_add_share_times:function e(){var t="share_times:"+l.getToday(),i=u.get_int(t);u.set_data(t,i+1)},onClickRevive:function e(){o.avatar.is_alive||(0==this._reviveTimes&&0<o.coin_revive&&(o.gameOver=!1,o.set_coin_revive(o.coin_revive-1),this.get_revive_node().active=!1,this.onRevive(o.avatar),this._reviveTimes=1),this.friendUINode.getComponent("FriendUI").init(this._score),this._lastRefreshExp=this._score,this.friendUINode.active=!0,this.friendUINode.getChildByName("bg").active=!1,this.friendUINode.getChildByName("friend").active=!1,this.scheduleOnce(function(){this.friendUINode.getChildByName("bg").active=!0,this.friendUINode.getChildByName("friend").active=!0}.bind(this),.2))},onClickReturn:function e(){this.onReturnDestroy(),cc.director.loadScene("home",function(){}.bind(this))},onReturnDestroy:function e(){this.get_revive_node().active=!1,this.avatarsPool.clear(),this.foodsPool.clear(),this.footprintsPool.clear(),o.reset()},onRefreshBtns:function e(t){this.node.getChildByName("ui").active=t},on_level_upgrade:function e(t,i){if(void 0!=this.entities[t.id]){if(t.is_player){this.onRefreshLvInfo(t),this.showTopNotice("Upgreade to Lv. "+t.level+"",1.5);var n=c.data[t.level].name;void 0!=n&&this.showNewLevel(n,1.7),this.show_tips(t),this.play_audio(3)}this.entities[t.id].getComponent("Player").on_level_upgrade(t,i)}},show_tips:function e(){this.node.getChildByName("ui").getChildByName("top_bg").getChildByName("tips").active=!1},on_level_downgrade:function e(t,i){void 0!=this.entities[t.id]&&this.entities[t.id].getComponent("Player").on_level_downgrade(t,i)},onRefreshLvInfo:function e(t){this.onRefreshExp(t),t=c.data[t.level],void 0!=t&&(t=t.camera_ratio,void 0==t&&(t=100),this.cameraNode.getComponent(cc.Camera).zoomRatio=s.INIT_CAMERA_ZOOM_RATIO*t/100)},onRefreshExp:function e(t){var i=this.node.getChildByName("levels").getChildByName("levels_"+t.id);if(void 0!=i){i.getChildByName("lv").getComponent(cc.Label).string=t.level,t.is_player&&(this.levelLabel.string=t.level);var n=c.data[t.expLevel];void 0!=n&&(n=n.exp,t.is_player&&(i.getChildByName("exp").getComponent(cc.ProgressBar).progress=t.expOfLevel/n)),this.onUpdateRank()}},createFootprint:function e(t){if(null!=this.footprintsPool){var i=this.node.getChildByName("player_parts").getChildByName("footprints");t=i.convertToNodeSpaceAR(t);var n=null;(n=0<this.footprintsPool.size()?this.footprintsPool.get():cc.instantiate(this.footprintPrefab)).opacity=255,n.x=t.x,n.y=t.y,i.addChild(n),n.runAction(cc.sequence(cc.fadeOut(.4),cc.removeSelf(),cc.callFunc(function(){this.footprintsPool.put(n)}.bind(this))))}},onClickSpeedyStart:function e(){if(!o.gameOver&&o.avatar.is_alive){var t=c.data[o.avatar.expLevel];void 0!=t&&(t=t.exp*s.ADD_SPEED_NEED_EXP_PER_SEC/100,1>=o.avatar.expLevel&&o.avatar.expOfLevel<t||(t=c.data[o.avatar.level],void 0!=t&&(t=t.add_speed_per||0,this._player.getComponent("Player").setSpeedBoostScale(1+t/100),o.avatar.addSpeed=t)))}},onClickSpeedyEnd:function e(){!o.gameOver&&o.avatar.is_alive&&this.cancel_speedy()},cancel_speedy:function e(){this._player.getComponent("Player").setSpeedBoostScale(1),o.avatar.addSpeed=0},onSpeedy:function e(t){void 0!=this.entities[t.id]&&this.entities[t.id].getComponent("Player").setSpeedBoostScale(1+t.addSpeed/100)},showNewCombo:function e(t,i){this._comboQueue.push([t,i])},realShowNewCombo:function e(t){var i=t[0];t[1],this.comboNode.active?(this.comboNode.getChildByName("combo").getComponent(cc.Label).string=i,this.comboNode.getComponent(cc.Animation).play("new_combo_seq"),this.comboNode.opacity=255):(this.comboNode.active=!0,this.comboNode.stopAllActions(),this.comboNode.opacity=255,this.comboNode.x=760,this.comboNode.getChildByName("combo").getComponent(cc.Label).string=i,this.comboNode.getComponent(cc.Animation).play("new_combo")),this.comboNode.stopAllActions(),this.comboNode.runAction(cc.sequence(cc.delayTime(3),cc.fadeOut(2),cc.callFunc(function(){this.comboNode.active=!1}.bind(this))))},showNewLevel:function e(t,i){var n=this.node.getChildByName("ui").getChildByName("top_notice");n.active?this.scheduleOnce(function(){this.showNewLevel(t,i)}.bind(this),.6):(n.active=!0,n.opacity=255,n.getChildByName("notice").getComponent(cc.Label).string=t,n.getComponent(cc.Animation).play("new_level"),void 0!=i&&n.runAction(cc.sequence(cc.delayTime(i),cc.fadeOut(.3),cc.callFunc(function(){n.active=!1}))))},showTopNotice:function e(t,i){var n=this.node.getChildByName("ui").getChildByName("notice");n.active?this.scheduleOnce(function(){this.showTopNotice(t,i)}.bind(this),.6):(n.active=!0,n.opacity=255,n.getChildByName("notice").getComponent(cc.Label).string=t,n.getComponent(cc.Animation).play("top_notice"),void 0!=i&&n.runAction(cc.sequence(cc.delayTime(i),cc.fadeOut(.3),cc.callFunc(function(){n.active=!1}))))},showBottomNotice:function e(t,i){var n=this.node.getChildByName("ui").getChildByName("bottom_notice");n.active=!0,n.opacity=255;var o=n.getChildByName("text");o.x=-50;o.getComponent(cc.Label).string=t,n.width=Math.max(o.width+200,320),n.getComponent(cc.Animation).play("notice"),void 0!=i&&n.runAction(cc.sequence(cc.delayTime(i),cc.fadeOut(.3),cc.callFunc(function(){n.getChildByName("ico_battle").active=!1,n.active=!1})))},hideBottomNotice:function e(t){var i=this.node.getChildByName("ui").getChildByName("bottom_notice");i.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){i.active=!1})))},_get_random_pos_with_less_enemy:function e(){if(null==this._avatartree)return l.getRandomPosition();for(var t=20,i=null,n=0;5>=n;n++){var o=l.getRandomPosition(),a=this._avatartree.retrieve({x:o[0],y:o[1],width:100,height:100});a.length<t&&(t=a.length,i=o)}return i},_get_random_pos_beyond_player:function e(){var t=l.getRandomPosition();if(null==o.avatar)return t;try{for(var i=this.entities[o.avatar.id].x,n=this.entities[o.avatar.id].y,a=cc.winSize,s=0;10>s&&(t=l.getRandomPosition(),!(Math.abs(t[0]-i)>a.width/2&&Math.abs(t[1],n)>a.height/2));s++){}}catch(t){}return t},start:function e(){},fixedUpdate:function e(){if(void 0!=o.avatar&&0<o.avatar.addSpeed){var t=c.data[o.avatar.expLevel].exp*s.ADD_SPEED_NEED_EXP_PER_SEC/100*this._fixedTimeStep;1>=o.avatar.expLevel&&o.avatar.expOfLevel<t?this.cancel_speedy():(o.avatar.expOfLevel>=t?o.avatar.expOfLevel-=t:(--o.avatar.expLevel,o.avatar.expOfLevel=c.data[o.avatar.expLevel].exp),this.onRefreshLvInfo(o.avatar))}},update:function e(t){(this._accumulatedTime+=t,this._accumulatedTime>this._fixedTimeStep&&(this.fixedUpdate(),this._accumulatedTime-=this._fixedTimeStep),this.tickCount+=1,0==this.tickCount%4)&&(null!=this._comboQueue&&0<this._comboQueue.length&&null!=this.comboNode&&(t=this.comboNode.getComponent(cc.Animation),t.getAnimationState("new_combo").isPlaying||t.getAnimationState("new_combo_seq").isPlaying||(t=this._comboQueue.shift(),this.realShowNewCombo(t))),this._startLoadAvatar&&0<o.enteredAvatars.length&&(t=o.enteredAvatars.shift(),this.onRealAvatarEnterWorld(t)),0<this._foodsToLoad.length&&(t=this._foodsToLoad.shift(),this.onFoodRealEnterWorld(t))),0<this._foodsToLeave.length&&(t=this._foodsToLeave.shift(),this.onFoodRealLeaveWorld(t)),0==this.tickCount%60&&0==this._foodsToLoad.length&&this.check_foods()}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",avatar_data:"avatar_data",food_data:"food_data",name_data:"name_data",quadtree:"quadtree",wxSdk:"wxSdk"}],GlobalData:[function(t,i){cc._RF.push(i,"91a71L4Os9NpJhjVgZdtJTA","GlobalData");var n=t("Storage"),o=t("wxSdk"),a=t("Const");i.exports={baseUrl:"https://zeus.h5haowan.top/game/sword/",version:"v1.0.53",io:!0,coin_revive:1,share_diff:!1,share_diff_lv:15,revive_mode:1,share_revive_req:0,share_revive_max:5,share_revive_coin:0,gold_mode:{1:1,2:1},wheel_on:!0,wheel_free:5,wheel_auto:3,wheel_ad_times:5,wheel_ad_cd:0,wheel_weight:{1:23,2:12.5,3:12.5,4:12.5,5:8.5,6:12.5,7:8.5,8:10},today_buff:5,today_buff_req:3,today_buff_time:3600,gold_delay:1.5,gameOver:!1,avatar:null,gameCtrl:null,auto_new_game:!1,homeUICtrl:null,last_play:[],newuser:1,cardid:0,inviterid:"",ticket:"",gameSceneLoaded:!1,enteredAvatars:[],enteredFoods:[],msgQueueWorld:[],friendsQueue:[],friendsMsgQueue:[],friendsReqQueue:[],avatarAtlas_1:null,avatarAtlas_2:null,avatarAtlas_3:null,avatarAtlas_4:null,foodAtlas:null,weaponAtlas:null,userInfo:null,serverConfigs:null,play_times:0,today_play_times:0,share_weights:null,share_titles:null,best_info:[0,0,0],last_info:[0,0,0],total_info:[0,0,0],invite:0,invite_num:0,invite_claimed:0,sound_on:0,wheel_buff:0,gold:0,skills:[1,1,1],skills_halo:[0,0,0],maxlevel:1,avatars:[],is_connected:function e(){return null!=this.userInfo&&void 0!=this.userInfo.openId},refresh_user_info:function t(){if(this.init_level(),this.init_gold(),this.init_wheel_buff(),this.init_skills(),this.init_skills_halo(),this.init_sound(),this.last_info=e.getStorageSync("last_play")||[0,0,0],this.best_info=e.getStorageSync("best_play")||[0,0,0],this.total_info=e.getStorageSync("total_play")||[0,0,0],this.is_connected()){var i=this.userInfo.u_level||1;i>this.maxlevel&&this.on_update_level(i),i=this.userInfo.u_gold||0,i>this.gold&&this.on_update_gold(i);var i=this.userInfo.u_skill_1||1,n=this.userInfo.u_skill_2||1,o=this.userInfo.u_skill_3||1;i>this.skills[0]&&this.on_update_skill(0,i),n>this.skills[1]&&this.on_update_skill(1,n),o>this.skills[2]&&this.on_update_skill(2,o),this.push_data_to_server()}},push_data_to_server:function e(){cc.find("Canvas/revive/revive_bg_2/bg_rank").active=false;const t={openid:this.userInfo.openId,score:this.best_info[1],kill:this.best_info[0],level:this.maxlevel,gold:this.gold,skill_1:this.skills[0],skill_2:this.skills[1],skill_3:this.skills[2],last_score:this.last_play[1]||0};PlatformAPI.setItem("localInfo",JSON.stringify(t))},init_sound:function e(){this.sound_on=n.get_int("sound_on")},init_level:function e(){var t=n.get_int("max_unlock");0<t&&(this.maxlevel=t)},on_update_level:function e(t){t=Math.floor(t),t>this.maxlevel&&(this.maxlevel=t,n.set_data("max_unlock",this.maxlevel))},init_gold:function e(){this.gold=n.get_int("gold")},on_update_gold:function e(t){this.gold=Math.floor(t),n.set_data("gold",this.gold)},init_skills:function e(){var t=n.get_data("skills");if(void 0==t)this.skills=[1,1,1];else if(t=t.split(","),3<=t.length){for(var i=[],o=0;3>o;o++){i.push(Math.min(Math.floor(t[o]),a.MAX_SKILL_LV))}this.skills=i}else this.skills=[1,1,1]},on_update_skill:function e(t,i){console.log("upupupupupupupup");for(this.skills[t]=Math.min(i,a.MAX_SKILL_LV),t="",i=0;i<this.skills.length;i++){t+=this.skills[i]+","}n.set_data("skills",t)},init_skills_halo:function e(){var t=n.get_data("skills_halo");if(void 0==t)this.skills_halo=[0,0,0];else if(t=t.split(","),3<=t.length){for(var i=[],o=0;3>o;o++){i.push(Math.min(Math.floor(t[o]),a.MAX_SKILL_LV))}this.skills_halo=i}else this.skills_halo=[0,0,0]},on_update_skill_halo:function e(t,i){for(this.skills_halo[t]=Math.min(i,a.MAX_SKILL_LV),t="",i=0;i<this.skills_halo.length;i++){t+=this.skills_halo[i]+","}n.set_data("skills_halo",t)},init_wheel_buff:function e(){this.wheel_buff=n.get_int("wheel_buff")},on_update_wheel_buff:function e(t){this.wheel_buff=Math.floor(t),n.set_data("wheel_buff",this.wheel_buff)},set_coin_revive:function t(i){this.coin_revive=i,e.setStorageSync("coin_revive",[this.coin_revive])},refresh_configs:function e(){if(null!=this.serverConfigs){this.io=1==this.serverConfigs[this.version],this.share_diff=1==this.serverConfigs.share_diff,void 0!=this.serverConfigs.share_diff_lv&&(this.share_diff_lv=Math.floor(this.serverConfigs.share_diff_lv)),this.revive_mode=this.serverConfigs.revive_mode||1,this.share_revive_req=this.serverConfigs.sr_req||0,this.share_revive_max=this.serverConfigs.sr_max||3,this.share_revive_coin=this.serverConfigs.sr_coin||0,this.gold_mode=this.serverConfigs.gold_mode||{1:1,2:1},this.wheel_on=1==this.serverConfigs.wheel_on,this.wheel_free=this.serverConfigs.wheel_free||1,this.wheel_auto=this.serverConfigs.wheel_auto||3,this.wheel_ad_times=this.serverConfigs.wheel_ad_times||3,this.wheel_ad_cd=this.serverConfigs.wheel_ad_cd||0,void 0!=this.serverConfigs.wheel_weight&&(this.wheel_weight=this.serverConfigs.wheel_weight),this.today_buff=this.serverConfigs.today_buff||1,this.today_buff_req=this.serverConfigs.today_buff_req||3,this.today_buff_time=this.serverConfigs.today_buff_time||0,this.gold_delay=this.serverConfigs.gold_delay||0}},reset:function e(){this.gameCtrl=null,this.gameSceneLoaded=!1,this.enteredAvatars=[],this.enteredFoods=[]}},cc._RF.pop()},{Const:"Const",Storage:"Storage",wxSdk:"wxSdk"}],GlobalRankUI:[function(e,t){cc._RF.push(t,"560e8V69ShCvbh8Yg01qQrr","GlobalRankUI");cc.Class({extends:cc.Component,properties:{noRankNode:cc.Node,loadingNode:cc.Node,rankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView,resultRankItemPrefab:cc.Prefab,_lastReqTime:0},start:function e(){},on_refresh:function e(t){},showLoading:function e(){},hideLoading:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils",wxSdk:"wxSdk"}],GoldBonusUI:[function(t,i){cc._RF.push(i,"f3bdeHXodtGSIZDoN2aeg0V","GoldBonusUI");var n=t("GlobalData"),o=t("Utils"),a=(t("Const"),t("VideoMgr"));t("Storage"),cc.Class({extends:cc.Component,properties:{goldLabel:cc.Label,goldBonus:cc.Label,btnGoldClaim:cc.Node,btnGoldClaimDouble:cc.Node,_goCtrl:null,_kill:0,_goldClaimed:!1,_adid:5},init:function e(t,i){this._goCtrl=t,this._kill=i,this._goldClaimed=!1,this.init_gold_ad(),this.goldLabel.string=n.gold,this.goldBonus.string="x"+this._kill,this.btnGoldClaimDouble.getChildByName("coin_gold").getChildByName("value").getComponent(cc.Label).string="x"+2*this._kill;0<n.gold_delay&&true||"function"==typeof createmoneyVideoAd?this.scheduleOnce(function(){this.btnGoldClaim.active=!0}.bind(this),n.gold_delay):this.btnGoldClaim.active=!0;this.fixUI()},fixUI:function e(){CCUtils.changeSpriteFrame(cc.find("Canvas/revive/revive_bg_gold/btn_watch_claim"),d.btn_jbfb);cc.find("Canvas/revive/revive_bg_gold/btn_watch_claim").active=true},_play_gold_anim:function e(){var t=this.goldBonus.node.parent.getComponent(cc.Animation);t.stop("new_res_fly"),t.play("new_res_fly")},init_gold_ad:function e(){this.enable_claim_double(true||"function"==typeof createmoneyVideoAd)},enable_claim_double:function e(t){(this.btnGoldClaimDouble.getComponent(cc.Button).interactable=t)&&(this.btnGoldClaimDouble.stopAllActions(),this.btnGoldClaimDouble.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1)))))},on_click_gold_claim:function e(){this._goldClaimed||this._give_gold_bonus(this._kill)},_give_gold_bonus:function t(i){this._goldClaimed=!0,this._play_gold_anim(),n.on_update_gold(n.gold+i),e.showToast({title:"success"}),this.scheduleOnce(function(){this._goCtrl._show_end()}.bind(this),1.5)},on_click_gold_claim_double:function e(){var t=this;if(true||"function"==typeof createmoneyVideoAd){PlatformAPI.createVideoAd("money",function(){t._give_gold_bonus(2*t._kill)})}},on_click_gold_skip:function e(){this._goCtrl._show_end()},start:function e(){}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",VideoMgr:"VideoMgr"}],HomeUI:[function(t,i){cc._RF.push(i,"4511ccfq3pMoas/sIM1Tdek","HomeUI");var s=t("avatar_data"),c=t("GlobalData"),r=t("Utils"),l=t("wxSdk"),h=t("Const"),_=t("Storage"),u=t("cc_roll_view");var p=function(e){var t=e.getRank();var i=e.getPlayer();var n=i.getName();var o=e.getScore();let a;try{a=JSON.parse(e.getExtraData())}catch(e){a={kills:0}}var s=a.kills||0;var c=i.getPhoto();var r=i.getID();return{name:n,score:o,kills:s,rank:t,photo:c,id:r}};var f=120;var v=94;var g=function(e,t,i,n){var o=CCUtils.newButton(i,n);e.addChild(o);o.position=t;return o};var m=function(e,t,i,n){if(n===void 0){n="#FFFFFF"}var o=new cc.Node;var a=o.addComponent(cc.Label);a.overflow=cc.Label.Overflow.SHRINK;a.enableWrapText=false;o.width=120;o.height=70;a.string=i;var s=new cc.Color;s.fromHEX(n);o.color=s;a.horizontalAlign=cc.Label.HorizontalAlign.CENTER;a.verticalAlign=cc.Label.VerticalAlign.CENTER;e.addChild(o);o.position=t;return o};var y=function(e,t,i,n){cc.loader.load(i,function(o,a){if(!cc.isValid(e))return;if(o){console.error("加载头像失败!",i);a=new cc.Texture2D}var s=cc.size(n,n);var c=new cc.Node;e.addChild(c);c.position=t;c.setContentSize(s);var r=new cc.Node;c.addChild(r);r.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a);r.setContentSize(s);var l=c.addComponent(cc.Mask);l.type=cc.Mask.Type.ELLIPSE;l.segements=64})};var b=function(e,t,i){CCUtils.newSprite(i?d.rankMyBg:d.rankOtherBg,e,t)};var k=function(e,t,i,n,o){var a=new cc.Node;a.y=-(i*v)+f;a.x=94;b(a,cc.v2(-11,1),n.id===FBInstant.player.getID());m(a,cc.v2(-108,-10),n.name,"#553a2c");m(a,cc.v2(0,-10),n.kills,"#fca41e");m(a,cc.v2(103,-10),n.score,"#ba4424");y(a,cc.v2(-208,0),n.photo,71);if(e||n.id===FBInstant.player.getID()){g(a,cc.v2(230,0),d.rankShareBtn,function(){o()})}else{g(a,cc.v2(230,0),d.rankChallenge,function(){o(n.id)})}if(n.rank<=3){CCUtils.newSprite(d["rankNo"+n.rank],a,cc.v2(-285,0))}else{m(a,cc.v2(-285,0),n.rank,"#573c2e")}t.addChild(a);return a};var C;(function(e){e["FRIEND"]="friend";e["GLOBAL"]="global"})(C||(C={}));var N=function(e){var t=new cc.Node;var i=new cc.Node;t.addChild(i);t.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(d.rankBg);t.addComponent(cc.BlockInputEvents);t.scaleX=cc.winSize.width/1280;t.scaleY=cc.winSize.height/720;var n=new cc.Node;t.addChild(n);n.position=cc.v2(-463,45);var o=function(e){var t=n.getChildByName("rank");var i=p(e);if(t){n.removeChild(t)}else{m(n,cc.v2(0,36),i.name);m(n,cc.v2(-85,-160),i.kills);m(n,cc.v2(85,-160),i.score);y(n,cc.v2(0,120),i.photo,130)}m(n,cc.v2(0,0),i.rank).name="rank"};var a=1;var s=5;var c=true;var r=true;var l=C.GLOBAL;var h=function(e){r=true;c=e};var _=function(e){if(!r)return;r=false;c=true;w(l,s,a,h,i,o,function(){a+=e})};g(t,cc.v2(530,-300),d.rankNextPage,function(){if(c){a++;_(-1)}});g(t,cc.v2(-350,-300),d.rankPrePage,function(){var e=a;a=Math.max(1,a-1);if(a!=e){_(1)}});_(0);g(t,cc.v2(550,210),d.rankCloseBtn,function(){t.removeFromParent();t.destroy()});g(t,cc.v2(550,100),d.rankPlayBtn,function(){t.removeFromParent();t.destroy();e()});var u,f;var v=g(t,cc.v2(-80,194),d.rankFriendBtnDisabled,function(){});u=g(t,cc.v2(-80,194),d.rankFriendBtnNormal,function(){f.active=true;u.active=false;l=C.FRIEND;_(0)});var b=g(t,cc.v2(270,194),d.rankGlobalBtnDisabled,function(){});f=g(t,cc.v2(270,194),d.rankGlobalBtnNormal,function(){u.active=true;f.active=false;l=C.GLOBAL;_(0)});f.active=l!==C.GLOBAL;u.active=l!==C.FRIEND;setTimeout(function(){v.getComponent(cc.Button).interactable=false;b.getComponent(cc.Button).interactable=false},100);return t};function w(e,t,i,n,o,a,s){var c=e===C.GLOBAL;FBInstant.getLeaderboardAsync("globalRank").then(function(e){var n=c?e.getEntriesAsync:e.getConnectedPlayerEntriesAsync;c&&e.getPlayerEntryAsync().then(a);return n.call(e,t,(i-1)*t)}).then(function(e){o.removeAllChildren();n(e.length===t);e.forEach(function(e,t){k(c,o,t,p(e),function(e){if(e){FBInstant.context.createAsync(e).then(function(e){var t={action:"CUSTOM",image:base64,text:"your turn",template:"",notification:"PUSH"};FBInstant.updateAsync(t)})["catch"](function(e){console.error(e)})}else{PlatformAPI.share()}})})})["catch"](function(e){console.error(e);s();n(true);PlatformAPI.showModal({title:"RATE_LIMITED",content:"Too frequently! Try again later!"})})}cc.Class({extends:cc.Component,properties:{headSprite:cc.Sprite,nicknameLabel:cc.Label,evoItemsScrollView:cc.ScrollView,evoItemPrefab:cc.Prefab,historyNode:cc.Node,levelLabel:cc.Label,coinNode:cc.Node,btnShare:cc.Node,btnRank:cc.Node,btnStart:cc.Node,btnWheel:cc.Node,btnInvite:cc.Node,rankNodePrefab:cc.Prefab,wheelNodePrefab:cc.Prefab,inviteNodePrefab:cc.Prefab,todayBonusPrefab:cc.Prefab,btnTodayBonus:cc.Node,audioNode:cc.Node,settingNode:cc.Node,_historyInfo:null,_btnGameCenter:null,_friendRankNeedsUpdate:!1,_globalRankNeedsUpdate:!1,_todayRankNeedsUpdate:!1},onLoad:function t(){this.fixUI();this.btnRank.active=false;CCUtils.changeSpriteFrame(this.btnRank,d.rankBtn);this.newRankNode=CCUtils.newSprite(d.newRankTip,this.btnRank,cc.v2(220,40));const i=PlatformAPI.getStorageSync("todayis");if(i!==gettoday()){this.newRankNode.active=true}else{this.newRankNode.active=false}var o=this;for(var a in(c.homeUICtrl=this,cc.director.preloadScene("game",function(){}),null!=c.userInfo&&void 0!=c.userInfo.avatarUrl)&&null,this.levelLabel.string=c.maxlevel+"/30",this.onRefreshHistory(this.historyNode.getChildByName("item_1"),c.last_info),this.onRefreshHistory(this.historyNode.getChildByName("item_2"),c.best_info),this.onRefreshHistory(this.historyNode.getChildByName("item_3"),c.total_info),this.evoItemsScrollView.content.removeAllChildren(),s.data){if(s.data.hasOwnProperty(a)&&0<a){var l=cc.instantiate(this.evoItemPrefab);l.getComponent("EvoItem").init(a,c.maxlevel),this.evoItemsScrollView.content.addChild(l)}}try{this._btnGameCenter=e.createGameClubButton({icon:"green",style:{left:10,top:10,width:30,height:30}})}catch(o){cc.log(o)}a=e.getStorageSync("coin_revive")||[1],c.coin_revive=a[0],(this.btnWheel.active=c.wheel_on)&&(this.btnWheel.getChildByName("pointer").runAction(cc.repeatForever(cc.rotateBy(.1,50))),this.btnWheel.getChildByName("sun").runAction(cc.repeatForever(cc.rotateBy(.4,50)))),this.btnStart.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1)))),this.coinNode.getChildByName("value").getComponent(cc.Label).string=c.coin_revive,this.audioNode.getComponent("AudioCtrl").init(!1),c.play_times=_.get_int("play_times"),a=e.getStorageSync("today_bonus")||0;var l=r.getToday();void 0==a||l>Math.floor(a)?this.btnTodayBonus.active=!0:this.btnTodayBonus.active=!1,this.settingNode.active=!1,this.btnInvite.active=false,this.check_inviter_by(),n()&&this.check_inviter(),this.scheduleOnce(function(){this.refreshPanel(),c.auto_new_game&&(c.auto_new_game=!1,this.onClickStart())}.bind(this),.05)},showRollView:function e(){return;if(!window.roll_infos)return;var t=window.roll_infos.home;if(t&&t.broadcast_onoff>0){var i=t;var n=new cc.Node("rollView");n.x=parseInt(i.background.place_x)+parseInt(i.background.background_w)/2;n.y=cc.winSize.height-parseInt(i.background.place_y)-parseInt(i.background.background_h)/2;n.zIndex=9;var o=n.addComponent(u);cc.find("Canvas/right").addChild(n);o.init(parseInt(i.background.background_w),parseInt(i.background.background_h),parseInt(i.icon.icon_space_x),parseInt(i.icon.icon_space_y));o.setData(i)}},fixUI:function e(){a();var t=new cc.SpriteFrame,i=new cc.SpriteFrame,n=new cc.SpriteFrame,o=new cc.SpriteFrame;cc.find("Canvas/right/evo_bg").getComponent(cc.Sprite).spriteFrame=t;t.setTexture(d.bg_jh);cc.find("Canvas/left/btn_invite/ico_gift").getComponent(cc.Sprite).spriteFrame=i;i.setTexture(d.btn_mrmb);cc.find("Canvas/left/btn_wheel/btn_wheel").getComponent(cc.Sprite).spriteFrame=o;o.setTexture(d.btn_mfcj);if(innerWidth/innerHeight>17/9){cc.find("Canvas/right").getComponent(cc.Widget).left=60,cc.find("Canvas/left").getComponent(cc.Widget).left=840,cc.find("Canvas/left/history").getComponent(cc.Widget).left=80}cc.find("Canvas/right/evo_bg/ico_title/label").active=0;var s=new cc.Node("title"),c=new cc.SpriteFrame;s.addComponent(cc.Sprite).spriteFrame=c,c.setTexture(d.index_title),s.y=8,cc.find("Canvas/right/evo_bg/ico_title").addChild(s);this.showRollView()},check_inviter_by:function e(){if(""!=c.inviterid&&c.is_connected()){var t="invite_by:"+r.getToday()+":"+c.inviterid;console.log("addshare: ",c.userInfo.openId,c.inviterid,c.ticket);0<_.get_int(t)&&!c.ticket||l.request({url:c.baseUrl+"addshare.html",method:"POST",data:{openid:c.userInfo.openId,inviterid:c.inviterid||"",ticket:c.ticket||""},success:function e(){c.inviterid="",_.set_data(t,1)},fail:function e(){}})}},check_inviter:function e(){var t=r.getToday();c.invite=_.get_int("invite:"+t);var i=this.btnInvite.getChildByName("red");return 0==c.invite?(i.active=!0,void(i.getChildByName("label").active=!1)):void(i.active=!1,c.invite_claimed=_.get_int("claimed_invite:"+t),console.log(c.invite_claimed),3<=c.invite_claimed||l.request({url:c.baseUrl+"getshare.html",method:"POST",data:{openid:c.userInfo.openId},success:function(e){e=e.data,0==e.code&&void 0!=e.data&&(c.invite_num=e.data||0),c.invite_num>c.invite_claimed&&(i.active=!0,i.getChildByName("label").active=!0,i.getChildByName("label").getComponent(cc.Label).string=Math.min(c.invite_num-c.invite_claimed,3))}.bind(this),fail:function(){}.bind(this)}))},refreshPanel:function e(){var t=this.node.getChildByName("right");884<t.width&&(t.getComponent(cc.Widget).isAlignLeft=!1,t.width=884,this.evoItemsScrollView.content.getComponent(cc.Layout).updateLayout(),this.node.getChildByName("left").getComponent(cc.Widget).left=40)},play_audio:function e(t){this.audioNode.getComponent("AudioCtrl").play_audio(t)},start:function e(){FBInstant.startGameAsync().then(function(){clearInterval(window.fakeloadingInterval)}).catch(function(e){cc.error(e)})},onRefreshHistory:function e(t,i){t.getChildByName("kill").getComponent(cc.Label).string=i[0],t.getChildByName("score").getComponent(cc.Label).string=i[1],t.getChildByName("time").getComponent(cc.Label).string=r.formatSeconds(i[2])},add_coin_revive:function e(t){c.set_coin_revive(c.coin_revive+t),this.on_update_coin_revive()},on_update_coin_revive:function e(){this.coinNode.getChildByName("value").getComponent(cc.Label).string=c.coin_revive},on_clicked_btn:function e(){null!=this._btnGameCenter&&this._btnGameCenter.hide()},on_back:function e(){null!=this._btnGameCenter&&this._btnGameCenter.show()},on_click_today_bonus:function e(){this.play_audio(0),r.log_event("click_today_bonus",{});var t=this.node.getChildByName("today_bonus");void 0==t&&(t=cc.instantiate(this.todayBonusPrefab),this.node.addChild(t)),t.active=!0,t.y=0,t.getComponent("TodayBonusUI").on_open()},onClickStart:function e(){this.on_clicked_btn();window.__adErrorCallback=window.__adFinishedCallback=(()=>{var e=_.get_int("play_times");c.play_times=e+1,_.set_data("play_times",c.play_times);var e="play_times:"+r.getToday(),t=_.get_int(e);c.today_play_times=t+1,_.set_data(e,c.today_play_times),this._todayRankNeedsUpdate=this._globalRankNeedsUpdate=this._friendRankNeedsUpdate=!0,cc.director.loadScene("game")});window.createVideoAd&&window.createVideoAd()},onClickRank:function e(){this.play_audio(0);PlatformAPI.setStorageSync("todayis",gettoday());this.newRankNode.active=false;this.node.addChild(N(()=>{this.onClickStart()}));return;var t=this.node.getChildByName("rank_bg");void 0==t&&(t=cc.instantiate(this.rankNodePrefab),this.node.addChild(t)),t.active=!0,t.getComponent("RankUI").on_open()},on_click_wheel:function e(){this.play_audio(0);var t=this.node.getChildByName("wheel_bg");void 0==t&&(t=cc.instantiate(this.wheelNodePrefab),this.node.addChild(t)),t.active=!0,r.log_event("click_wheel_1",{}),t.getComponent("WheelUI").on_open()},on_click_invite:function e(){this.play_audio(0);var t=this.node.getChildByName("invite_bg");void 0==t&&(t=cc.instantiate(this.inviteNodePrefab),this.node.addChild(t)),t.active=!0,r.log_event("click_invite_1",{}),t.getComponent("InviteUI").on_open()},on_click_setting:function e(){this.play_audio(0),this.settingNode.active=!0,this.settingNode.getComponent("SettingUI").on_open()},on_real_add_coin:function t(){return!this.check_share_valid()||(this.add_coin_revive(1),e.showToast({title:"获得复活币"}))},check_share_valid:function e(){return t="home_share_cards:"+r.getToday(),0==_.get_int(t)&&n()?(_.set_data(t,1),!0):!1},onClickShare:function t(){var i=o(),n="inviterid="+c.userInfo.openId,a=this;console.log("share param",n);e.shareAppMessage({title:i.title,imageUrl:i.imageUrl,query:n,success:function e(){a.on_real_add_coin()}})},on_give_today_bonus:function t(i){var n=e.getStorageSync("today_bonus")||0,o=r.getToday();(void 0==n||o>Math.floor(n))&&(e.setStorageSync("today_bonus",""+o),this.scheduleOnce(function(){e.showToast({title:"Life Token x"+i})}.bind(this),.5),this.add_coin_revive(i),this.btnTodayBonus.active=!1)}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",avatar_data:"avatar_data",wxSdk:"wxSdk",cc_roll_view:"cc_roll_view"}],InviteItem:[function(e,t){cc._RF.push(t,"a0a2dYpSwpP+Zv9rIka4C6H","InviteItem"),cc.Class({extends:cc.Component,properties:{onNode:cc.Node,offNode:cc.Node,valueLabel:cc.Label,noteLabel:cc.Label,claimedNode:cc.Node},init:function e(t,i,n){for(this.onNode.active=i,this.offNode.active=!i,1==t?this.valueLabel.string="x50":2==t?this.valueLabel.string="x1":3==t&&(this.valueLabel.string="开局10级"),this.noteLabel.string="邀请"+t+"人",this.claimedNode.active=n,i=1;3>=i;i++){this.node.getChildByName("ico_"+i).active=t==i}},start:function e(){}}),cc._RF.pop()},{}],InviteUI:[function(t,i){cc._RF.push(i,"f1687l+awpK4IyZ/OMOAGmq","InviteUI");var n=t("GlobalData"),a=t("Utils"),s=t("Storage"),c=t("Const");cc.Class({extends:cc.Component,properties:{inviteItemPrefab:cc.Prefab,itemsNode:cc.Node,noteLabel:cc.Label,btnShare:cc.Node,btnClaim:cc.Node,bonusNode:cc.Node},onLoad:function e(){},on_open:function e(){this.itemsNode.removeAllChildren();for(var t,i=0;3>i;i++){t=cc.instantiate(this.inviteItemPrefab),t.setName("item_"+(i+1)),this.itemsNode.addChild(t),t.x=140*(i-1)}this.on_refresh()},on_refresh:function e(){for(var t=1;3>=t;t++){this.itemsNode.getChildByName("item_"+t).getComponent("InviteItem").init(t,t<=n.invite_num,t<=n.invite_claimed)}this.noteLabel.string="今日已邀请"+n.invite_num+"人",this.bonusNode.active=!1,this.btnShare.getChildByName("red").active=0==n.invite,this.btnShare.stopAllActions(),this.btnShare.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1)))),this.btnClaim.getComponent(cc.Button).interactable=n.invite_num>n.invite_claimed&&0<n.invite_num;this.fixUI()},fixUI:function e(){CCUtils.changeSpriteFrame(this.btnShare,d.btn_share),CCUtils.changeSpriteFrame(this.btnClaim,d.btn_qblq)},clear_red:function e(){var t=this.node.parent.getComponent("HomeUI");void 0!=t&&(t.btnInvite.getChildByName("red").active=!1)},on_click_close:function e(){var t=this.node.parent.getComponent("HomeUI");void 0!=t&&t.on_update_coin_revive(),this.node.active=!1},on_click_share:function t(){var i=o(),r="inviterid="+n.userInfo.openId,l=this;e.shareAppMessage({title:i.title,imageUrl:i.imageUrl,query:r,success:function t(){l.scheduleOnce(function(){e.showToast({title:"分享成功"})}.bind(l),.5)}});n.invite=1,l.btnShare.getChildByName("red").active=!1,c="invite:"+a.getToday(),s.set_data(c,1),l.clear_red()},on_click_claim:function e(){if(!(n.invite_claimed>=n.invite_num)){this.bonusNode.active=!0;var t=this.bonusNode.getChildByName("sun");t.stopAllActions(),t.runAction(cc.repeatForever(cc.rotateBy(1,40))),t=this.bonusNode.getChildByName("bg"),t.on(cc.Node.EventType.TOUCH_START,function(){},this),t.on(cc.Node.EventType.TOUCH_MOVE,function(){},this),t.on(cc.Node.EventType.TOUCH_END,this.onBonusTouchMaskEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onBonusTouchMaskEnd,this);for(var t=this.bonusNode.getChildByName("content"),i="",o=n.invite_claimed+1;o<=n.invite_num;o++){1==o?(i+="金币x50 ",n.on_update_gold(n.gold+50)):2==o?(i+="复活币x1 ",n.set_coin_revive(n.coin_revive+1)):3==o&&(i+="开局10级",n.on_update_wheel_buff(n.wheel_buff+1))}n.invite_claimed=Math.min(n.invite_num,3),o="claimed_invite:"+a.getToday(),s.set_data(o,n.invite_claimed),t.getChildByName("label").getComponent(cc.Label).string=i,this.clear_red()}},onBonusTouchMaskEnd:function e(){this.bonusNode.active=!1,this.on_refresh()},start:function e(){}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils"}],JoystickBg:[function(e,t){cc._RF.push(t,"8ead83EK3dL9asw3E0nSWId","JoystickBg");var i=e("JoystickCommon");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,displayName:"被操作的目标Node"},_angle:{default:null,displayName:"当前触摸的角度"},_radian:{default:null,displayName:"弧度"},_speed:0,speed1:5,speed2:5,_opacity:0},onLoad:function e(){if(isWeb){cc.Camera.main.node.on(cc.Node.EventType.MOUSE_MOVE,this._touchMoveEvent.bind(this));cc.Camera.main.node.setContentSize(cc.winSize);cc.Camera.main.node.on(cc.Node.EventType.MOUSE_DOWN,e=>{const t=e.getButton();if(t===cc.Event.EventMouse.BUTTON_LEFT){cc.Camera.main.node.emit("clickBtnLeft_attack")}else if(t===cc.Event.EventMouse.BUTTON_RIGHT){cc.Camera.main.node.emit("clickBtnRight_skill")}});cc.Camera.main.node.on(cc.Node.EventType.MOUSE_LEAVE,e=>{if(e.getButton()===cc.Event.EventMouse.BUTTON_RIGHT){cc.Camera.main.node.emit("clickEndRight_skill")}});cc.Camera.main.node.on(cc.Node.EventType.MOUSE_UP,e=>{if(e.getButton()===cc.Event.EventMouse.BUTTON_RIGHT){cc.Camera.main.node.emit("clickEndRight_skill")}})}this._joyCom=this.node.parent.getComponent("Joystick"),this._playerNode=this._joyCom.sprite,console.log("this._joyCom.touchType",this._joyCom.touchType),this._joyCom.touchType==i.TouchType.DEFAULT&&this._initTouchEvent()},_initTouchEvent:function e(){if(isWeb)return;this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_getDistance:function e(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},_getRadian:function e(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},_getAngle:function e(t){var i=this.node.getPosition();return this._angle=180/Math.PI*Math.atan2(t.y-i.y,t.x-i.x),t=360-(this._angle+360)%360,null!=this._playerNode&&this._playerNode.getComponent("Player").setAngle(t),this._angle},_setSpeed:function e(t){this._getDistance(t,this.node.getPosition())<this._radius?this._realSetSpeed(this.speed1):this._realSetSpeed(this.speed2)},_realSetSpeed:function e(t){this._speed=t,null!=this._playerNode&&this._playerNode.getComponent("Player").setSpeed(this._speed)},_touchStartEvent:function e(t){var i=this.node.convertToNodeSpaceAR(t.getLocation());t=this._getDistance(i,cc.v2(0,0));var n=this.node.width/2;this._stickPos=i;var o=this.node.getPosition().x+i.x,i=this.node.getPosition().y+i.y;return n>t&&(this.dot.setPosition(cc.v2(o,i)),!0)},_touchMoveEvent:function e(t){var i=this.node.convertToNodeSpaceAR(t.getLocation()),n=this._getDistance(i,cc.v2(0,0)),o=this.node.width/2;t=this.node.getPosition().x+i.x,i=this.node.getPosition().y+i.y,o>n?this.dot.setPosition(cc.v2(t,i)):(n=this.node.getPosition().x+Math.cos(this._getRadian(cc.v2(t,i)))*o,o=this.node.getPosition().y+Math.sin(this._getRadian(cc.v2(t,i)))*o,this.dot.setPosition(cc.v2(n,o))),this._getAngle(cc.v2(t,i)),this._setSpeed(cc.v2(t,i))},_touchEndEvent:function e(){this.dot.setPosition(this.node.getPosition()),this._realSetSpeed(0)}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon"}],JoystickCommon:[function(e,t){cc._RF.push(t,"98066v6TTVJS7+RKZU3eNnf","JoystickCommon"),t.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}],Joystick:[function(e,t){cc._RF.push(t,"75b68LEsihByayku7yfg3qK","Joystick");var i=e("JoystickCommon");e=e("JoystickBg"),cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},ring:{default:null,type:e,displayName:"摇杆背景节点"},stickX:{default:0,displayName:"摇杆X位置"},stickY:{default:0,displayName:"摇杆Y位置"},touchType:{default:i.TouchType.DEFAULT,type:i.TouchType,displayName:"触摸类型"},directionType:{default:i.DirectionType.ALL,type:i.DirectionType,displayName:"方向类型"},sprite:{default:null,type:cc.Node,displayName:"操控的目标"},_stickPos:{default:null,type:cc.Node,displayName:"摇杆当前位置"},_touchLocation:{default:null,type:cc.Node,displayName:"摇杆当前位置"}},onLoad:function e(){this._createStickSprite(),this.touchType==i.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function e(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},_initTouchEvent:function e(){if(isWeb)return;this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchStartEvent:function e(t){t=t.getLocation();var i=this.node.convertToNodeSpaceAR(t);return!(400<cc.v2(-200,-200).sub(i).mag())&&void(this._touchLocation=t,this.ring.node.setPosition(i),this.dot.setPosition(i),this._stickPos=i)},_touchMoveEvent:function e(t){if(null==this._touchLocation)return!1;if(t=t.getLocation(),this._touchLocation.x==t.x&&this._touchLocation.y==t.y)return!1;var i=this.ring.node.convertToNodeSpaceAR(t),n=this.ring._getDistance(i,cc.v2(0,0)),o=this.ring.node.width/2;t=this._stickPos.x+i.x,i=this._stickPos.y+i.y,o>n?this.dot.setPosition(cc.v2(t,i)):(n=this._stickPos.x+Math.cos(this.ring._getRadian(cc.v2(t,i)))*o,o=this._stickPos.y+Math.sin(this.ring._getRadian(cc.v2(t,i)))*o,this.dot.setPosition(cc.v2(n,o))),this.ring._getAngle(cc.v2(t,i)),this.ring._setSpeed(cc.v2(t,i))},_touchEndEvent:function e(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._realSetSpeed(0),this.touchType==i.TouchType.FOLLOW&&(this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)),this._touchLocation=null},reset:function e(){this._touchEndEvent()}}),cc._RF.pop()},{JoystickBg:"JoystickBg",JoystickCommon:"JoystickCommon"}],LoginUI:[function(t,i){cc._RF.push(i,"09fa2AzatFAS7lssAi+PAnV","LoginUI");var n=t("GlobalData"),a=t("Utils"),s=t("wxSdk"),c=t("Const"),r=t("Storage");cc.Class({extends:cc.Component,properties:{usernameInput:cc.Node,btnLogin:cc.Node,loadingNode:cc.Node,loadingProgress:cc.ProgressBar,loadingLabel:cc.Label,loginBtn:cc.Node,_auth_btn:null,_maxPercent:null,_totalPercent:null,_percentQueue:[]},onLoad:function t(){var i,o=this;cc.find("Canvas").opacity=0;this.load1=this.load2=!1;CCUtils.LoadRes((i={btn_share:"btn_fx.png",btn_qblq:"btn_qblq.png",bg_jh:"bg_jh.png",index_title:"index_title.png",btn_mfcj:"btn_mfcj.png",btn_mrfl:"btn_mrfl.png",btn_mrmb:"btn_mrmb.png",icon_jb:"icon_jb.png",title_mr:"title_mr.png",title_mrbuff:"title_mrbuff.png",btn_cj_mf:"btn_cj_mf.png",btn_cj_fx:"btn_cj_fx.png",btn_cj_sp:"btn_cj_sp.png",btn_jbfb:"btn_jbfb.png",title_xlmj:"title_xlmj.png",title_rank:"title_rank.png",overbg_rank:"overbg_rank.png",overbg_skill:"overbg_skill.png",skill_icon_1:"skill_icon_1.png",skill_icon_2:"skill_icon_2.png",skill_icon_3:"skill_icon_3.png",rankBtn:"rank/btn_rank.png",rankChallenge:"rank/rank_challenge.png",rankNextPage:"rank/rank_next_page.png",rankPrePage:"rank/rank_pre_page.png",rankShareBtn:"rank/rank_share.png",rankBg:"rank/bg.jpg",rankCloseBtn:"rank/close.png",rankPlayBtn:"rank/play.png",rankGlobalBtnNormal:"rank/global_normal.png",rankGlobalBtnDisabled:"rank/global_disabled.png",rankFriendBtnNormal:"rank/friend_normal.png",rankFriendBtnDisabled:"rank/friend_disabled.png",rankMyBg:"rank/mybg.png",rankOtherBg:"rank/otherbg.png",newRankTip:"rank/new.png",rankNo1:"rank/rankNo1.png",rankNo2:"rank/rankNo2.png",rankNo3:"rank/rankNo3.png"},(0,l.default)(i,"skill_icon_3","skill_icon_3.png"),(0,l.default)(i,"kill_bg","kill/kill_bg.png"),(0,l.default)(i,"kill1","kill/kill1.png"),(0,l.default)(i,"kill2","kill/kill2.png"),(0,l.default)(i,"kill3","kill/kill3.png"),(0,l.default)(i,"kill4","kill/kill4.png"),(0,l.default)(i,"kill5","kill/kill5.png"),(0,l.default)(i,"kill6","kill/kill6.png"),(0,l.default)(i,"kill7","kill/kill7.png"),(0,l.default)(i,"tip_kill","kill/tip_kill.png"),i),d,function(){});initSSSGameConfig(()=>{o.load1=!0,o.load2&&o.on_loaded()},function(){});this._maxPercent=[],this._totalPercent=[],this.add_load("textures/avatar_1","avatarAtlas_1"),this.add_load("textures/weapon","weaponAtlas"),cc.loader.onProgress=function(){}.bind(this),cc.director.preloadScene("home",function(){cc.log("Home scene preloaded")}),n.system_info=e.getSystemInfoSync(),e.onShow(function(e){this.on_show(e)}.bind(this));var a=e.getLaunchOptionsSync();this.on_show(a),n.share_weights=c.SHARE_WEIGHTS,n.share_titles=c.SHARE_TITLES},on_show:function e(t){if(void 0!=t&&t.query){var i=r.get_int("newuser");n.newuser=i;var o=t.query.inviterid,a=t.query.ticket;void 0!=o&&""!=o&&(n.inviterid=o);void 0!=a&&""!=a&&(n.ticket=a);r.set_data("newuser",1)}},update_percent:function e(t,i,n){if(void 0!=this.usernameInput&&!this.usernameInput.active){for(var o in this._totalPercent[t]=i/n,i=t=0,this._maxPercent){this._maxPercent.hasOwnProperty(o)&&(t+=this._maxPercent[o],i+=this._totalPercent[o]*this._maxPercent[o])}o=Math.floor(100*i/t),t=this._percentQueue.length,(0==t||o>this._percentQueue[t-1])&&this._percentQueue.push(o)}},add_load:function e(t,i){this._maxPercent[i]=1,this._totalPercent[i]=0,cc.loader.loadRes(t,cc.SpriteAtlas,function(e,t){this.update_percent(i,e,t)}.bind(this),function(e,t){n[i]=t}.bind(this))},on_loaded:function t(){var i=this;e.showShareMenu({withShareTicket:!0}),e.onShareAppMessage(function(){var e=o();return{title:e.title,imageUrl:e.imageUrl}}.bind(this)),i.onClickLogin()},after_login:function e(){n.refresh_user_info(),cc.director.loadScene("home")},onClickLogin:function t(){e.login({success:function(t){t.code?e.getUserInfo({lang:"zh_CN",success:function(i){var o=this;n.userInfo=i.userInfo,s.loginWidthCode({loginUrl:"",res:i,code:t.code,success:function t(s){const c=JSON.stringify(PlatformAPI.getItem("localInfo")||"");for(let e in c){s[e]=c[e]}n.userInfo=s,o.after_login();if((i=Number(s.num))>0){var l=a.getToday(),d=r.get_int("sharecoin:"+l);if(d<10){if(n.coin_revive+i>10){i=10-n.coin_revive}n.set_coin_revive(n.coin_revive+i);e.showModal({title:"提示",content:"好友通过你的分享进入游戏，为你奖励"+i+"复活币（每日最多奖励10个）",showCancel:!1,confirmText:"好的"});var l="sharecoin:"+l,h=r.get_int(l);r.set_data(l,h+i)}}e.request({url:"https://cdn.h5haowan.top/sword/setting.json",success:function e(t){n.serverConfigs=t.data||{},n.refresh_configs()}});e.request({url:"https://zeus.h5haowan.top/game/sword/randuser.html?token=9999",success:function e(t){n.avatars=t.data.data}})},fail:function e(t){o.after_login()}})}.bind(this),fail:function(e){}.bind(this)}):cc.log("登录失败: "+res.errMsg)}.bind(this),fail:function e(t){}})},start:function e(){},update:function e(t){0<this._percentQueue.length&&(t=this._percentQueue.shift(),this.loadingProgress.progress=t/100,this.loadingLabel.string=t+"%",100<=t&&(this._percentQueue=[],cc.loader.onProgress=null,this.load2=!0,this.load1&&this.on_loaded()))}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",mta_analysis:"mta_analysis",wxSdk:"wxSdk"}],OutShare:[function(e,t){cc._RF.push(t,"d1ba4m6P31EsZnkiX3Cp5jm","OutShare");e("Storage"),cc.Class({extends:cc.Component,properties:{imgSprite:cc.Sprite,share_pos:1,_out_id:2},onLoad:function e(){this.node.active=!1}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils"}],Player:[function(e,t){cc._RF.push(t,"ce845lBc/FHQp18aIXBT2yh","Player");var i=e("Const"),n=e("avatar_data"),o=e("GlobalData"),a=e("Utils"),s=e("food_data");cc.Class({extends:cc.Component,properties:{angle:0,tgtAngle:0,speed:0,angular:180,initRadius:50,radius:50,mapWidth:3840,mapHeight:2980,mapBorder:33,attackRadius:35,weaponPrefab:cc.Prefab,deadEffectPrefab:cc.Prefab,nicknamePrefab:cc.Prefab,levelPrefab:cc.Prefab,sexPrefab:cc.Prefab,_aid:0,_speedLvScale:1,_speedBoostScale:1,_isMoving:!1,_tickCount:0,_lastClockWise:0,_avatar:null,_lastSyncX:0,_lastSyncY:0,_lastSyncYaw:0,_tgtPosX:null,_tgtPosY:null,_playerNode:null,_inAttackAction:!1,_lastAttackTime:0,_modelId:1,_weaponId:1,_footprintsNum:0,_fixedTimeStep:.07,_accumulatedTime:0,_bodyScale:1,_deadEffectNode:null,_weaponNode:null,_nicknameNode:null,_levelNode:null,_sexNode:null,_avatarInfo:null,_guardRadius:0,_lastGuardTime:0,_lastChaseTime:0,_aiState:0,_lastRandomWalkTime:0,_chaseTgt:null,_thinkEatTimes:0,_tgtFood:null,_chasingPlayer:!1,_playerAttackRadiusFix:1.05,_levelDelta:.002},onLoad:function e(){if(this.onRefreshByLv(this._avatar),null==this._deadEffectNode&&null!=o.gameCtrl){var t=o.gameCtrl.node.getChildByName("player_parts").getChildByName("deadeffects"),i=t.getChildByName("dead_"+this._avatar.id);void 0==i&&((i=cc.instantiate(this.deadEffectPrefab)).setName("dead_"+this._avatar.id),t.addChild(i)),this._deadEffectNode=i,this._deadEffectNode.active=!1}},start:function e(){},init:function e(){this._lastRandomWalkTime=this._aiState=0,this._chaseTgt=null,this._thinkEatTimes=0,this._tgtFood=null,this._chasingPlayer=!1},initModel:function e(){if(null!=o.gameCtrl){this.init(),this._aid=this._avatar.id;var t=this._avatar.level;this._avatarInfo=n.data[this._avatar.level],this._weaponId=this._modelId=t,this.removeClips(this.node.getChildByName("playerNode").getChildByName("sprite"),["Walk"]),this.createClips(this.node.getChildByName("playerNode").getChildByName("sprite"),["Walk"]),this.play("Walk");var i=o.weaponAtlas.getSpriteFrame("weapon_"+this._weaponId);void 0==i&&(i=o.weaponAtlas.getSpriteFrame("weapon_1"));var t=o.gameCtrl.node.getChildByName("weapons"),s=t.getChildByName("weapon_"+this._aid);void 0==s&&((s=cc.instantiate(this.weaponPrefab)).setName("weapon_"+this._aid),t.addChild(s)),this._weaponNode=s,this._weaponNode.scale=1,t=this._weaponNode.getChildByName("sprite"),t.getComponent(cc.Sprite).spriteFrame=i,i=this._modelId+"_Walk_00",i=this.get_atlas().getSpriteFrame(i).getOriginalSize().height,i=a.clamp(i/148,1.2,1),this._weaponNode.getChildByName("sprite").y=-60*i,this.attackRadius=t.width,this._guardRadius=this.attackRadius*(this._avatarInfo.guard_radius||1),this.onWeaponUpdatePos(),this.reset_weapon(),this._accumulatedTime=0}},play:function e(t){this.node.getChildByName("playerNode").getChildByName("sprite").getComponent(cc.Animation).play(t)},get_atlas:function e(){return o.avatarAtlas_1},removeClips:function e(t,i){for(var n=0;n<i.length;n++){t.getComponent(cc.Animation).removeClip(i[n],!0)}},createClips:function e(t,i){for(var n=0;n<i.length;n++){for(var o=i[n],s=[],c=0;6>c;c++){var r=this._modelId+"_"+o+"_"+a.zeroPad(c,2),r=this.get_atlas().getSpriteFrame(r);void 0!=r&&s.push(r)}o=this.createClip(o,s,!0),t.getComponent(cc.Animation).addClip(o)}},createClip:function e(t,i,n){return i=cc.AnimationClip.createWithSpriteFrames(i,60),i.name=t,i.speed=.2,n&&(i.wrapMode=cc.WrapMode.Loop),i},setAvatar:function e(t){this._avatar=t;var i=o.gameCtrl.node.getChildByName("nicknames"),n=i.getChildByName("nickname_"+t.id);void 0==n&&((n=cc.instantiate(this.nicknamePrefab)).setName("nickname_"+t.id),i.addChild(n)),this._nicknameNode=n,this._nicknameNode.getComponent(cc.Label).string=t.name,this.onNicknameUpdatePos(),i=o.gameCtrl.node.getChildByName("levels"),n=i.getChildByName("levels_"+t.id),void 0==n&&((n=cc.instantiate(this.levelPrefab)).setName("levels_"+t.id),i.addChild(n)),this._levelNode=n,this._levelNode.getChildByName("exp").active=this._avatar.is_player,this._levelNode.getChildByName("exp_bg").active=!this._avatar.is_player,n=i.getChildByName("sex_"+t.id),void 0==n&&((n=cc.instantiate(this.sexPrefab)).setName("sex_"+t.id),i.addChild(n)),this._sexNode=n,n=i=!1,this._avatar.is_player||(n=!(i=45>=a.getRandomInt(1,100))),this._sexNode.getChildByName("ico_male").active=i,this._sexNode.getChildByName("ico_female").active=n,this.onLevelUpdatePos(),this.onRefreshByLv(t,t.level)},getSpeedScale:function e(){return this._speedLvScale*this._speedBoostScale},setSpeedBoostScale:function e(t){this._speedBoostScale=t,1<t||(this._footprintsNum=0)},setSpeed:function e(t){this.speed=0<t?i.INIT_SPEED:t},setAngle:function e(t){o.gameOver||this._inAttackAction||this.setAngleDirect(t)},setAngleDirect:function e(t){this.angle=this.tgtAngle=t,this.setRotation(this.angle)},setRotation:function e(t){this._playerNode.rotation=t,this.reset_weapon()},setPos:function e(t,i){this.node.x=t,this.node.y=i,this.onWeaponUpdatePos(),this.onNicknameUpdatePos(),this.onLevelUpdatePos()},updatePerTwoTick:function e(){if(null==this._playerNode&&(this._playerNode=this.node.getChildByName("playerNode")),null!=this._avatar&&this._avatar.is_alive&&!this._inAttackAction)if(0<this.speed){if(null!=this._tgtPosX&&null!=this._tgtPosY&&this.check_close(this._tgtPosX,this._tgtPosY))return this.setPos(this._tgtPosX,this._tgtPosY),void this.stop_move();var t=this.getSpeedScale(),t=this.can_move(this.node.x+Math.cos(Math.PI/180*this.angle)*this.speed*t,this.node.y-Math.sin(Math.PI/180*this.angle)*this.speed*t);t[0]&&this.setPos(t[1],t[2]),this._isMoving||(this._isMoving=!0,this.play("Walk"))}else this._isMoving&&(this._isMoving=!1,this.play("Walk"))},_randomWalk:function e(){var t=a.getNowWithMs();2>t-this._lastRandomWalkTime||(this._lastRandomWalkTime=t,t=a.getRandomPosition(),this.move_to(t[0],t[1]))},onClickAttack:function e(){if(null!=o.gameCtrl){var t,i=o.gameCtrl.avatars;for(t in i){if(i.hasOwnProperty(t)){var n=i[t];n.id!=this._avatar.id&&n.is_alive&&(a.getDist2(o.gameCtrl.entities[n.id],{x:this.node.x,y:this.node.y}),this.attackRadius,this.attackRadius,this._avatar.is_alive&&(this.stop_move(),o.gameCtrl.on_attack(this._avatar,n,!0)))}}}},_checkTgt:function e(){if(a.getRandomInt(1,100)>5*this._avatar.level)return!1;var t=Object.keys(o.gameCtrl.avatars).map(function(e){return o.gameCtrl.avatars[e]});if(0<t.length){this._aiState=i.ROBOT_AI_STATE_FIGHT;for(var n=99999999,s=0;s<t.length;s++){var c=t[s],r=a.getDist2({x:this.node.x,y:this.node.y},c);r<n&&0<r&&!c.in_protect&&(!c.is_player||this._canAttackPlayer(c))&&(n=r,this._chaseTgt=c)}return!0}return!1},_checkFood:function e(){for(var t,i=o.gameCtrl._foodtree.retrieve({x:this.node.x,y:this.node.y,width:50,height:50}),n=0;n<i.length;n++){if(t=i[n],25e4>=a.getDist2(t,{x:this.node.x,y:this.node.y}))return t,!0}return!1},_canAttackPlayer:function e(t){if(null==t||void 0==t)return!1;if(2>=t.level)return null!=o.gameCtrl&&40<a.getNow()-o.gameCtrl._gameStartTime?700>=a.getRandomInt(1,1e3):20<o.play_times&&2==t.level&&700>=a.getRandomInt(1,1e3);var i={3:400,4:500,5:600,6:700,7:800};return null!=o.serverConfigs&&void 0!=o.serverConfigs.attack_prob&&(i=o.serverConfigs.attack_prob),t=i[t.level],void 0==t&&(t=1e3),a.getRandomInt(1,1e3)<=t},think:function e(){if(null!=o.gameCtrl){if(null!=o.avatar&&o.avatar.is_alive&&!o.avatar.in_protect&&this._canAttackPlayer(o.avatar)){var t=a.getNowWithMs(),n=o.gameCtrl.entities[o.avatar.id],s=a.getDist2(n,this.node),c=this.attackRadius*this.attackRadius;if(s<this._guardRadius*this._guardRadius&&t-this._lastGuardTime>=this._avatarInfo.guard_cd){if(this._chasingPlayer)return void(s<1.21*c?(n=this._avatarInfo.guard_stop||.5,t-this._lastChaseTime>.2+n*a.getRandomInt(1,100)/100&&(this.stop_move(),o.gameCtrl.on_attack(this._avatar,this._chaseTgt,!0))):2>t-this._lastChaseTime?this.move_to_around(n.x,n.y):(this._chasingPlayer=!1,this.stop_move(),this.gotoFree(),this._lastGuardTime=t));if(a.getRandomInt(1,1e4)<=1e4*this._avatarInfo.guard_prob)return void(s<1.21*c?(n=this._avatarInfo.guard_stop||.5,t-this._lastChaseTime>.2+n*a.getRandomInt(1,100)/100&&(this.stop_move(),o.gameCtrl.on_attack(this._avatar,this._chaseTgt,!0))):(this._chaseTgt=o.avatar,this._chasingPlayer=!0,this._lastChaseTime=t,this.move_to_around(n.x,n.y)));this._lastGuardTime=t,this._chasingPlayer=!1}else this._chasingPlayer&&null!=this._chaseTgt&&(this._chasingPlayer=!1,this.stop_move(),this.gotoFree())}this._aiState==i.ROBOT_AI_STATE_FREE?this.onThinkFree():this._aiState==i.ROBOT_AI_STATE_EAT?this.onThinkEat():this._aiState==i.ROBOT_AI_STATE_FIGHT?this.onThinkFight():this.onThinkOther()}},onThinkFree:function e(){this._randomWalk(),this._checkTgt()||95>=a.getRandomInt(1,100)&&this._checkFood()&&(this._aiState=i.ROBOT_AI_STATE_EAT)},onThinkEat:function e(){if(!this._checkTgt()){var t=!1;if(null!=this._tgtFood&&void 0!=o.gameCtrl.food_infos[this._tgtFood.id]&&(t=!0),t&&0>=a.getRandomInt(1,100))this.gotoFree();else{if(0==this._thinkEatTimes&&!t){for(var n,s=o.gameCtrl._foodtree.retrieve({x:this.node.x,y:this.node.y,width:300,height:300}),t=[],c=0;c<s.length&&(n=s[c],!(25e4>=a.getDist2(n,{x:this.node.x,y:this.node.y})&&(t.push(n),10<t.length)));c++){}s=null,0<t.length&&(s=t[a.getRandomInt(0,t.length)]),null==s?(this._aiState=i.ROBOT_AI_STATE_FREE,this._randomWalk()):(this._tgtFood=s,this.move_to(s.x,s.y),this._thinkEatTimes+=1)}1<=this._thinkEatTimes&&(this._thinkEatTimes=0)}}},onThinkFight:function e(){if(null!=this._chaseTgt&&this._chaseTgt.is_alive&&null!=o.gameCtrl){var t=o.gameCtrl.entities[this._chaseTgt.id],t=a.getDist2(t,{x:this.node.x,y:this.node.y}),i=this.attackRadius*this.attackRadius,n=a.getNowWithMs();if(this._avatar.is_alive&&!this._inAttackAction&&.6<n-this._lastAttackTime){var s=a.getRandomInt(1,100);this._lastAttackTime=n,20>=s&&t<8*i?(this.stop_move(),o.gameCtrl.on_attack(this._avatar,this._chaseTgt,!0)):20<s&&50>=s&&t<4*i?(this.stop_move(),o.gameCtrl.on_attack(this._avatar,this._chaseTgt,!0)):t<i&&(this.stop_move(),o.gameCtrl.on_attack(this._avatar,this._chaseTgt,!0))}}null==this._chaseTgt?this.gotoFree():this._chaseTgt.is_alive&&90>=a.getRandomInt(1,100)?(t=o.gameCtrl.entities[this._chaseTgt.id],a.getDist2(t,{x:this.node.x,y:this.node.y})<1.21*this.attackRadius*this.attackRadius&&!this._inAttackAction?.6<n-this._lastAttackTime?(this._lastAttackTime=n,this.stop_move(),o.gameCtrl.on_attack(this._avatar,this._chaseTgt,!0)):this.stop_move():this.move_to_around(this._chaseTgt.x,this._chaseTgt.y)):this.gotoFree()},gotoFree:function e(){this._chaseTgt=null,this._aiState=i.ROBOT_AI_STATE_FREE,this._randomWalk()},onThinkOther:function e(){this.gotoFree()},fixedUpdate:function e(){if(null!=o.gameCtrl&&(1<Math.abs(this._lastSyncX-this.node.x)||1<Math.abs(this._lastSyncY-this.node.y))){for(var t,i=o.gameCtrl._foodtree.retrieve({x:this.node.x,y:this.node.y,width:5,height:5}),n=0;n<i.length;n++){t=i[n],Math.abs(t.x-this.node.x)<=this.radius&&Math.abs(t.y-this.node.y)<=this.radius&&this.eat_food(t.id)}this._lastSyncX=this.node.x,this._lastSyncY=this.node.y}null!=o.gameCtrl&&o.gameCtrl.refresh_avatartree(),!this._avatar.is_player&&this._avatar.is_alive&&this.think()},eat_food:function e(t){var i=o.gameCtrl.foods[t];void 0!=i&&(o.gameCtrl.onFoodLeaveWorld({id:t}),o.gameCtrl.add_exp(this._aid,s.data[i.fid].exp||0))},update:function e(t){!o.gameOver&&void 0!=this.node&&(this._avatar.is_player,this._accumulatedTime+=t,this._accumulatedTime>this._fixedTimeStep&&(this.fixedUpdate(),this._accumulatedTime-=this._fixedTimeStep),this._tickCount+=1,0==this._tickCount%1&&this.updatePerTwoTick(),0==this._tickCount%4&&999>this._footprintsNum&&1<this._speedBoostScale&&(this._footprintsNum+=1,null!=o.gameCtrl))&&(null==this._playerNode&&(this._playerNode=this.node.getChildByName("playerNode")),t=this._playerNode.convertToWorldSpaceAR(cc.v2(-100,0)),o.gameCtrl.createFootprint(t))},stop_move:function e(){this.setSpeed(0),this._tgtPosY=this._tgtPosX=null,this._isMoving=!1,null==this._playerNode&&(this._playerNode=this.node.getChildByName("playerNode")),this.play("Walk")},check_close:function e(t,i){return i-=this.node.y,t-=this.node.x,Math.sqrt(i*i+t*t)<this.speed*this.getSpeedScale()},move_to_around:function e(t,i){if(this.check_close(t,i))return this.setPos(t,i),void this.stop_move();var n=this.node.x-t,o=this.node.y-i,a=cc.v2(n,o).normalize();cc.v2(t,i),t=n*n+o*o<=this.attackRadius*this.attackRadius?cc.v2(t,i):cc.v2(t,i).add(a.mul(.5*this.attackRadius)),this.move_to(t.x,t.y)},rotate_to:function e(t,i){t=180*Math.atan2(i-this.node.y,t-this.node.x)/Math.PI,this.angle=this.tgtAngle=0>=t?-t:360-t,null==this._playerNode&&(this._playerNode=this.node.getChildByName("playerNode")),this.setRotation(this.angle)},move_to:function e(t,i){return this.check_close(t,i)?(this.setPos(t,i),void this.stop_move()):void(this.setSpeed(5),this._tgtPosX=t,this._tgtPosY=i,this.rotate_to(t,i))},can_move:function e(t,i){var n=this.mapWidth/2-this.radius,o=this.mapHeight/2-this.radius-this.mapBorder,a=!0,s=t,c=i;return Math.abs(t)>n&&Math.abs(i)>o?a=!1:Math.abs(t)<=n&&Math.abs(i)>o?(s=t,i>=o?c=o:i<=-o&&(c=-o)):Math.abs(t)>n&&Math.abs(i)<=o&&(c=i,t>=n?s=n:t<=-n&&(s=-n)),[a,s,c]},reset_weapon:function e(){null!=this._weaponNode&&null!=this._playerNode&&(this._weaponNode.rotation=this._playerNode.rotation+185)},playAttackAction:function e(){var t=.2,a=.1;if(null!=this._avatar){var s=n.data[this._avatar.level];(void 0!=s&&(t=s.attack_time_1,a=s.attack_time_2),this._avatar.is_player)&&(s=0,0<o.skills_halo[2]&&(s=i.SKILL_HALO_PERCENT/100,o.on_update_skill_halo(2,o.skills_halo[2]-1)),t*=1-this._levelDelta/2*(o.skills[2]-1)-s,a*=1-this._levelDelta/2*(o.skills[2]-1)-s)}null!=this._weaponNode&&(s=this._weaponNode,s.stopAllActions(),this.reset_weapon(),this._inAttackAction=!0,s.runAction(cc.sequence(cc.rotateBy(t,145),cc.rotateBy(a,-145),cc.callFunc(function(){this._inAttackAction=!1,this.reset_weapon()}.bind(this)))))},on_level_upgrade:function e(t,i){if(t.is_player){var o=this.node.getChildByName("levelup");o.active=!0,o.y=90,o.opacity=255,o.stopAllActions(),o.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,50)),cc.spawn(cc.moveBy(.4,cc.v2(0,50)),cc.fadeOut(.4)),cc.callFunc(function(){}.bind(this))))}t.id==this._avatar.id&&(this._avatarInfo=n.data[i]),this.onRefreshByLv(t,i)},on_level_downgrade:function e(t,i){t.id==this._avatar.id&&(this._avatarInfo=n.data[i]),this.onRefreshByLv(t,i)},onRefreshByLv:function e(t,a){if(t=t.level,void 0!=a&&(t=a),a=n.data[t],void 0!=a){this._weaponId=this._modelId=t,this.initModel(),t=a.speed_per,void 0==t&&(t=100),this._speedLvScale=t/100,t=a.body_radius_per,void 0==t&&(t=100);var s=this.node.getChildByName("playerNode");s.scale=t/100,this._bodyScale=s.scale,this.radius=this.initRadius*this._bodyScale,a=a.weapon_radius_per,(void 0==a&&(a=100),null!=this._weaponNode&&(this._weaponNode.scale=a/100,this.onWeaponUpdatePos()),this.attackRadius=this._weaponNode.width*this._weaponNode.scale,this._avatar.is_player)&&(this.attackRadius*=this._playerAttackRadiusFix,a=0,0<o.skills_halo[0]&&(a=i.SKILL_HALO_PERCENT/100,o.on_update_skill_halo(0,o.skills_halo[0]-1)),this.attackRadius*=1+this._levelDelta*(o.skills[0]-1)+a,a=0,0<o.skills_halo[1]&&(a=i.SKILL_HALO_PERCENT/100,o.on_update_skill_halo(1,o.skills_halo[1]-1)),this._speedLvScale*=1+this._levelDelta*(o.skills[1]-1)+a),this._guardRadius=this.attackRadius*(this._avatarInfo.guard_radius||1)}},onIsDead:function e(t,i){var n=!t.is_alive;(null!=this._nicknameNode&&(this._nicknameNode.active=t.is_alive),null==this._playerNode&&(this._playerNode=this.node.getChildByName("playerNode")),this._playerNode.active=t.is_alive,void 0!=this._levelNode&&(this._levelNode.active=t.is_alive),void 0!=this._weaponNode&&(this._weaponNode.active=t.is_alive),void 0!=this._sexNode&&(this._sexNode.active=t.is_alive),n)?i&&(this._deadEffectNode.active=!0,this._deadEffectNode.x=this.node.x,this._deadEffectNode.y=this.node.y,t=this._deadEffectNode.getComponent(cc.Animation),t.on("finished",this.on_hit_finished,this),t.play("avatar_destroy")):(this.setPos(t.x,t.y),this.onRefreshByLv(this._avatar,this._avatar.level),this._nicknameNode&&(this._nicknameNode.getComponent(cc.Label).string=this._avatar.name))},on_hit_finished:function e(){this._deadEffectNode.active=!1},onWeaponUpdatePos:function e(){null!=this._weaponNode&&this._weaponNode.active&&(this._weaponNode.x=this.node.x,this._weaponNode.y=this.node.y)},onNicknameUpdatePos:function e(){null!=this._nicknameNode&&this._nicknameNode.active&&(this._nicknameNode.x=this.node.x,this._nicknameNode.y=this.node.y+100*this._bodyScale+5)},onLevelUpdatePos:function e(){if(null!=this._levelNode&&this._levelNode.active){var t=Math.max(this._nicknameNode.width/2+35,60);this._levelNode.x=this.node.x-t,this._levelNode.y=this.node.y+100*this._bodyScale+5,null!=this._sexNode&&this._sexNode.active&&(this._sexNode.x=this.node.x-(t-22),this._sexNode.y=this.node.y+100*this._bodyScale+5)}}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Utils:"Utils",avatar_data:"avatar_data",food_data:"food_data"}],RankItem:[function(t,i){cc._RF.push(i,"a61eda/x5JP9KnPTgIsoyg3","RankItem");var n=t("Utils");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,rankLabel:cc.Label,nicknameLabel:cc.Label,scoreLabel:cc.Label,killLabel:cc.Label,cityLabel:cc.Label,maleNode:cc.Node,femaleNode:cc.Node,_rank:0,_info:null},init:function t(i,o){var a=this;if(this._rank=i+1,this._info=o,""!=o[2])try{var s=e.createImage();s.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(s),e.handleLoadedTexture(),a.avatarSprite.spriteFrame=new cc.SpriteFrame(e)}catch(e){cc.log(e),a.avatarSprite.node.active=!1}},s.src=o[2]}catch(i){cc.log(i),this.avatarSprite.node.active=!1}if(3<this._rank)this.rankLabel.node.active=!0,this.rankLabel.string=this._rank;else for(this.rankLabel.node.active=!1,i=1;3>=i;i++){this.node.getChildByName("ico_rank_"+i).active=i==this._rank}if(this.nicknameLabel.string=""!=o[1]&&void 0!=o[1]?n.subString(o[1],10,!0):"荣耀勇士",this.scoreLabel.string=o[3],this.killLabel.string=o[4],10<=o.length){this.maleNode.active=1==o[6],this.femaleNode.active=2==o[6],i=o[7];var c=o[8];o=o[9];var r="";n.isHanzi(o)&&("中国"==o?(n.isHanzi(c)&&(r=c),n.isHanzi(i)&&(r+=i)):r=o),""!=r&&(this.cityLabel.string=r)}},start:function e(){}}),cc._RF.pop()},{Utils:"Utils"}],RankUI:[function(e,i){cc._RF.push(i,"0f8e9rEjhhN0qwFjucex3ZV","RankUI");var n=e("GlobalData"),o=e("Utils");cc.Class({extends:cc.Component,properties:{subRankNode:cc.Node,globalRankNode:cc.Node,todayRankNode:cc.Node,tabNode:cc.Node,titleLabel:cc.Label,_tabSelected:1},onLoad:function e(){},start:function e(){},on_open:function e(){this._tabSelected=1,this._on_click_tab(),a()},_on_click_tab:function e(){this.globalRankNode.active=!1,this.todayRankNode.active=!1,this.subRankNode.active=!0,this.subRankNode.getComponent("SubRankUI").init(),this.titleLabel.string="好友排行"},on_click_tab:function e(t,i){t=this.node.parent.getComponent("GameOver"),void 0!=t&&null!=t?null!=n.gameCtrl&&n.gameCtrl.play_audio(2):null!=n.homeUICtrl&&n.homeUICtrl.play_audio(0),this._tabSelected=i,this._on_click_tab()},onClickClose:function e(){var i=this.node.parent.getComponent("GameOver");void 0!=i&&null!=i?(i.refresh_result_rank(),null!=n.gameCtrl&&n.gameCtrl.play_audio(2),t("over"),cc.find("Canvas/revive/revive_bg_2/bg_rank/btn_all_rank").active=!1):null!=n.homeUICtrl&&n.homeUICtrl.play_audio(0),this.node.active=!1},update:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils"}],ResultRankItem:[function(t,i){cc._RF.push(i,"7d5ec+futZN4qJUxb7lLdoE","ResultRankItem");var n=t("Utils");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,rankLabel:cc.Label,nicknameLabel:cc.Label,scoreLabel:cc.Label,_rank:0,_info:null},init:function t(i,o){var a=this;if(this._rank=i+1,this._info=o,""!=o[2])try{var s=e.createImage();s.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(s),e.handleLoadedTexture(),a.avatarSprite.spriteFrame=new cc.SpriteFrame(e)}catch(e){cc.log(e),a.avatarSprite.node.active=!1}},s.src=o[2]}catch(i){cc.log(i),this.avatarSprite.node.active=!1}this.rankLabel.string=this._rank,this.nicknameLabel.string=""!=o[1]&&void 0!=o[1]?n.subString(o[1],10,!0):"荣耀勇士",this.scoreLabel.string=o[3]},start:function e(){}}),cc._RF.pop()},{Utils:"Utils"}],ResultRankUI:[function(t,i){cc._RF.push(i,"9cda2+xfD5IR4b+TGAzjcKc","ResultRankUI"),cc.Class({extends:cc.Component,properties:{rankSprite:cc.Sprite,_tex:null,_tick_count:0},onLoad:function e(){},init:function t(){return;this._tex=new cc.Texture2D,sharedCanvas.width=160,sharedCanvas.height=450,this.rankSprite.node.active=!1,e.postMessage({messageType:3}),this._tick_count=0},start:function e(){},_updateSubDomainCanvas:function e(){},update:function e(){this._tick_count+=1,10<this._tick_count&&(this.rankSprite.node.active||(this.rankSprite.node.active=!0))}}),cc._RF.pop()},{}],ReviveAd:[function(e,t){},{}],SettingUI:[function(e,i){cc._RF.push(i,"f6eb9pY2uFOWp+8zeTQif/I","SettingUI");var n=e("GlobalData"),o=(e("Utils"),e("Storage"));cc.Class({extends:cc.Component,properties:{toggleOpen:cc.Node,toggleClose:cc.Node},on_open:function e(){this.toggleOpen.getComponent(cc.Toggle).isChecked=0==n.sound_on,this.toggleClose.getComponent(cc.Toggle).isChecked=0!=n.sound_on;t("setting")},on_click_close:function e(){this.node.active=!1,a()},on_click_open_sound:function e(){this._on_click(!0)},on_click_close_sound:function e(){this._on_click(!1)},_on_click:function e(t){this.toggleOpen.getComponent(cc.Toggle).isChecked=t,this.toggleClose.getComponent(cc.Toggle).isChecked=!t,n.sound_on=t?0:1,o.set_data("sound_on",n.sound_on)},start:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils"}],SkillItem:[function(t,i){cc._RF.push(i,"ec3a6fjeypNAIXPcpnjK/k5","SkillItem");var n=t("skill_data"),a=t("GlobalData"),s=t("Utils"),c=t("Const"),r=t("VideoMgr");t("wxSdk"),t("Storage"),cc.Class({extends:cc.Component,properties:{coinLabel:cc.Label,btnUpgrade:cc.Node,goldNode:cc.Node,node1:cc.Node,node2:cc.Node,_sid:1,_param:0},init:function e(t){this._sid=t,this.on_refresh()},on_refresh:function e(){CCUtils.changeSpriteFrame(this.node.getChildByName("skill_icon_bg"),d["skill_icon_"+this._sid]);var t=a.skills[this._sid-1]||1;this.node.getChildByName("lv").getComponent(cc.Label).string=t;this.node2.getChildByName("label").color=this.node.getChildByName("detail").color=cc.color(127,94,79);this.node.getChildByName("skill_icon_bg").getChildByName("ico_skill").active=0;var i=.4*(t-1);return(this.node.getChildByName("detail").getComponent(cc.Label).string=["Attack Distance","Movement Speed","Attace Speed"][this._sid-1]+" + "+i.toFixed(1)+"%",this.node.getChildByName("skill_icon_bg").getChildByName("detail").getComponent(cc.Label).string="",t>=c.MAX_SKILL_LV)?(this.node1.active=!1,void(this.node2.active=!1)):void(this._param=t=n.data[t]["skill_"+this._sid]||1,1==t?(this.node1.active=!1,this.node2.active=!0,this.init_skill_ad(),this.notify_upgrade(1),false||(this.node2.getChildByName("btn_upgrade_ad").x=0,this.node2.getChildByName("btn_upgrade_share").active=!1,this.node2.getChildByName("label").active=!1)):(this.node1.active=!0,this.node2.active=!1,this.goldNode.active=!0,this.goldNode.getChildByName("count").getComponent(cc.Label).string=t,a.gold>=t?(this.btnUpgrade.getComponent(cc.Button).interactable=!0,this.btnUpgrade.getChildByName("ico_red").active=!0,this.notify_upgrade(2)):(this.btnUpgrade.getComponent(cc.Button).interactable=!1,this.btnUpgrade.getChildByName("ico_upgrade").active=!1,this.btnUpgrade.getChildByName("ico_upgrade").stopAllActions(),this.btnUpgrade.getChildByName("ico_red").active=!1)))},notify_upgrade:function e(t){var i=this.btnUpgrade.getChildByName("ico_upgrade");1==t&&(i=this.node2.getChildByName("btn_upgrade_ad").getChildByName("ico_upgrade")),i.active=!0,i.stopAllActions(),i.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(0,5)),cc.moveBy(.3,cc.v2(0,-5)))))},init_skill_ad:function e(){this.enable_ad(true||"function"==typeof createupgradeVideoAd)},enable_ad:function e(t){this.node2.getChildByName("btn_upgrade_ad").getComponent(cc.Button).interactable=t},after_upgrade:function t(){s.log_event("upgrade_skill",{skillid:""+this._sid}),a.on_update_skill(this._sid-1,(a.skills[this._sid-1]||1)+1),this.node.parent.getChildByName("skill_item_1").getComponent("SkillItem").on_refresh(),this.node.parent.getChildByName("skill_item_2").getComponent("SkillItem").on_refresh(),this.node.parent.getChildByName("skill_item_3").getComponent("SkillItem").on_refresh(),e.showToast({title:"Success"}),null!=a.gameCtrl&&a.gameCtrl.play_audio(4,1)},on_click_upgrade_ad:function e(){var t=this;if(true||"function"==typeof createupgradeVideoAd&&1<=this._sid&&3>=this._sid){PlatformAPI.createVideoAd("upgrade",function(){t.after_upgrade()})}},on_click_upgrade_share:function t(){if(1<=this._sid&&3>=this._sid){var i=o(),n="inviterid="+a.userInfo.openId,s=this;e.shareAppMessage({title:i.title,imageUrl:i.imageUrl,query:n,success:function t(){var i="分享成功",n=!0;s.after_upgrade(),s.scheduleOnce(function(){n||e.showModal({title:"提示",content:i,showCancel:!1,cancelText:"",confirmText:"好的"})},.5)}})}},on_click_upgrade:function t(){1<=this._sid&&3>=this._sid&&(a.gold>=this._param?(a.on_update_gold(a.gold-this._param),this.coinLabel.string=a.gold,this.after_upgrade()):e.showToast({title:"金币不足"}))},start:function e(){}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",VideoMgr:"VideoMgr",skill_data:"skill_data",wxSdk:"wxSdk"}],Storage:[function(t,i){cc._RF.push(i,"7d50dxHUUFMT7VfeO0LvaNQ","Storage"),i.exports={get_data:function t(i){return i=e.getStorageSync(i),""==i&&(i=void 0),i},get_int:function t(i){i=e.getStorageSync(i);try{var n=parseInt(i);return isNaN(n)?0:n}catch(i){return 0}},set_data:function t(i,n){e.setStorageSync(i,""+n)}},cc._RF.pop()},{}],SubRankUI:[function(t,i){cc._RF.push(i,"2f82c2TzzRAbYRo1qXZhMrf","SubRankUI");var n=t("Utils"),o=t("GlobalData");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,_tex:null,_lastReqTime:0},init:function t(){var i=n.getNow();120>i-this._lastReqTime&&null!=this._tex&&!o.homeUICtrl._friendRankNeedsUpdate||(this._lastReqTime=i,o.homeUICtrl._friendRankNeedsUpdate=!1,this.showLoading(),this.scheduleOnce(function(){this.hideLoading()}.bind(this),.2),e.postMessage({messageType:1}))},start:function e(){},_updateSubDomainCanvas:function e(){},update:function e(){},showLoading:function e(){this.loadingNode.active=!0,this.loadingNode.stopAllActions(),this.loadingNode.runAction(cc.repeatForever(cc.rotateBy(.2,40)))},hideLoading:function e(){this.loadingNode.stopAllActions(),this.loadingNode.active=!1}}),cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils"}],TodayBonusUI:[function(e,i){cc._RF.push(i,"88a32ac8ZNMLaaJVOl7D2sP","TodayBonusUI");var n=e("GlobalData"),o=e("Utils"),s=e("VideoMgr");cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,btnClaim:cc.Node,btnClaimDouble:cc.Node,_todayBonusAd:null,_todayBonusAdLoaded:!1},onLoad:function e(){this.bgNode.on(cc.Node.EventType.TOUCH_START,function(){},this),this.bgNode.on(cc.Node.EventType.TOUCH_MOVE,function(){},this),this.bgNode.on(cc.Node.EventType.TOUCH_END,this.onTouchMaskEnd,this),this.bgNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchMaskCancel,this)},fixUI:function e(){var t=new cc.SpriteFrame,i=new cc.SpriteFrame,n=new cc.SpriteFrame,o=new cc.SpriteFrame,a=cc.find("Canvas/today_bonus/panel/title_bg");a.getComponent(cc.Sprite).spriteFrame=t,t.setTexture(d.title_mr),a.setContentSize(cc.size(569,131));cc.find("Canvas/today_bonus/panel/ico_revive").getComponent(cc.Sprite).spriteFrame=i,i.setTexture(d.icon_jb),cc.find("Canvas/today_bonus/panel/btn_claim").getComponent(cc.Sprite).spriteFrame=n,n.setTexture(d.btn_share),cc.find("Canvas/today_bonus/panel/btn_claim_double").getComponent(cc.Sprite).spriteFrame=o,o.setTexture(d.btn_qblq);this.node.active=tempFlag},onClose:function e(){this.node.active=!1,a()},onTouchMaskEnd:function e(){this.onClose()},onTouchMaskCancel:function e(){this.onClose()},init:function e(){this.enable_claim_double(true||"function"==typeof createdailyVideoAd)},on_open:function e(){this.init(),this.fixUI(),t("daily")},enable_claim_double:function e(t){t?(this.btnClaimDouble.active=!0,this.btnClaim.active=!1,this.btnClaimDouble.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1))))):(cc.find("Canvas/today_bonus/panel/note").getComponent(cc.Label).string="每天可领取1枚复活币",this.btnClaimDouble.active=!1,this.btnClaim.active=!0,this.btnClaim.x=0)},give_bonus:function e(t){null!=n.homeUICtrl&&n.homeUICtrl.on_give_today_bonus(t),this.onClose()},on_click_claim:function e(){this.give_bonus(1)},on_click_claim_double:function e(){var t=this;if(true||"function"==typeof createdailyVideoAd){PlatformAPI.createVideoAd("daily",function(){t.give_bonus(2)})}},start:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils",VideoMgr:"VideoMgr"}],TodayBuffUI:[function(i,n){cc._RF.push(n,"aa9b9bRLxNBnq3AhynPbr2x","TodayBuffUI");var o=i("Utils"),s=i("GlobalData"),c=i("Storage"),r=(i("Const"),i("VideoMgr"));i("wxSdk"),cc.Class({extends:cc.Component,properties:{btnClaim:cc.Node,noteLabel:cc.Label,noteLabel2:cc.Label,_gameoverCtrl:null},init:function e(t){this._gameoverCtrl=t,this.btnClaim.getComponent(cc.Button).interactable=!1,r.createVideo(this,10),this.noteLabel.string="Game Start with Lv."+s.today_buff+" in "+Math.floor(s.today_buff_time/60)+" min.",this.noteLabel2.string="Only can get it once a day";this.onRefresh()},onRefresh:function e(){t("revive");var i=cc.find("Canvas/revive/revive_bg_2/today_buff/panel/title_bg"),n=new cc.SpriteFrame;i.getChildByName("label").active=0;i.getComponent(cc.Sprite).spriteFrame=n,n.setTexture(d.title_mrbuff),i.setContentSize(cc.size(569,131));this.btnClaim.getComponent(cc.Button).interactable=!0,this.btnClaim.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.06),cc.scaleTo(.3,1))))},after_ad_finish:function t(){a();this._set_shown();var i=o.getNow();c.set_data("today_buff_until",i+s.today_buff_time),this.scheduleOnce(function(){try{e.showToast({title:"Get Buff"})}catch(e){}this.on_click_close()}.bind(this),.2)},_set_shown:function e(){var t="today_buff:"+o.getToday();c.set_data(t,1)},start:function e(){},on_click_ad:function e(){var t=this;this.btnClaim.getComponent(cc.Button).interactable=!1;if(true||"function"==typeof createbuffVideoAd){PlatformAPI.createVideoAd("buff",function(){t.after_ad_finish()})}},on_click_close:function e(){this._set_shown(),null==this._gameoverCtrl?this.node.active=!1:this._gameoverCtrl.on_today_buff_back()}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",VideoMgr:"VideoMgr",wxSdk:"wxSdk"}],TodayRankUI:[function(e,t){cc._RF.push(t,"d8c27VMLX1L5aFpaUoOppzb","TodayRankUI");cc.Class({extends:cc.Component,properties:{noRankNode:cc.Node,loadingNode:cc.Node,rankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView,resultRankItemPrefab:cc.Prefab,_lastReqTime:0},start:function e(){},on_refresh:function e(){},showLoading:function e(){},hideLoading:function e(){}}),cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils",wxSdk:"wxSdk"}],Utils:[function(t,i){cc._RF.push(i,"5c59dQpWxFHKLApICBEQJtf","Utils");var n=t("Const"),o=t("GlobalData"),a=t("mta_analysis"),s=(t("Storage"),t("wxSdk"));i.exports={timeDelta:0,isUndefined:function e(t){return void 0===t},getRandomInt:function e(t,i){return Math.floor(Math.random()*(i-t+1))+t},getRandomPosition:function e(){return[(Math.random()-.5)*(n.MAP_WIDTH-300),(Math.random()-.5)*(n.MAP_HEIGHT-500)]},shuffle:function e(t){for(var i=t.length-1;0<i;i--){var n=Math.floor(Math.random()*(i+1)),o=[t[n],t[i]];t[i]=o[0],t[n]=o[1]}return t},zeroPad:function e(t,i){return i=i-t.toString().length+1,Array(+(0<i&&i)).join("0")+t},getArmyId:function e(t,i){return Math.floor("10"+t+this.zeroPad(i,3))},elementIn:function e(t,i){for(var n in i){if(i[n]==t)return!0}return!1},setTimeDelta:function e(t){this.timeDelta=t},getNow:function e(){return Math.floor(new Date/1e3)+this.timeDelta},getNowWithMs:function e(){return new Date/1e3+this.timeDelta},getNowInMs:function e(){return Math.floor(new Date)},getToday:function e(){var t=new Date,t=""+t.getFullYear()+this.zeroPad(t.getMonth()+1,2)+this.zeroPad(t.getDate(),2);return parseInt(t)},getDist2:function e(t,i){var n=t.x-i.x;return t=t.y-i.y,n*n+t*t},point_interact_ray:function e(t,i,n,o){return t*o-i*n},formatSeconds:function e(t){return new Date(1e3*t).toISOString().substr(11,8)},formatSeconds2:function e(t){var i=+t;return t=(Math.floor(i/86400),Math.floor(i%86400/3600),Math.floor(i%3600/60)),i=Math.floor(i%3600%60),(10>t?"0"+t:t)+":"+(10>i?"0"+i:i)},formatSeconds3:function e(t){var i=+t;t=Math.floor(i/86400);var n=Math.floor(i%86400/3600),o=Math.floor(i%3600/60),i=Math.floor(i%3600%60);return(0<t?t+"天 ":"")+(0<n?n+"小时":"")+(0<o?o+"分":"")+(0<i?i+"秒":"")},formatTimestamp:function e(t){return new Date(1e3*t).toLocaleTimeString("en-GB")},formatDate:function e(t){return new Date(1e3*t).toLocaleDateString("zh-Hans-CN")},clamp:function e(t,i,n){return t>i?i:t<n?n:t},strlen:function e(t){for(var i,n=0,o=0;o<t.length;o++){i=t.charCodeAt(o),1<=i&&126>=i||65376<=i&&65439>=i?n++:n+=2}return n},subString:function e(t,i,n){for(var o=0,a="",s=/[^\x00-\xff]/g,c="",r=t.replace(s,"**").length,l=0;l<r&&(null==(c=t.charAt(l).toString()).match(s)?o++:o+=2,!(o>i));l++){a+=c}return n&&r>i&&(a+="..."),a},compareObjects:function e(t,i){for(var n in t){if(t.hasOwnProperty(n)&&t[n]!==i[n])return!1}for(n in i){if(i.hasOwnProperty(n)&&t[n]!==i[n])return!1}return!0},isHanzi:function e(t){return/.*[\u4e00-\u9fa5]+.*$/.test(t)},sdkVersionGreater:function e(t,i){return t=t.split("."),i=i.split("."),3==t.length&&3==i.length&&(parseInt(t[0])>parseInt(i[0])||t[0]==i[0]&&parseInt(t[1])>parseInt(i[1])||t[0]==i[0]&&t[1]==i[1]&&parseInt(t[2])>=parseInt(i[2]))},weightingChoice:function e(t){var i,n=0,o=[],a=[];for(i in t){t.hasOwnProperty(i)&&(n+=t[i],a.push(i),o.push(t[i]))}if(0==n)return-1;for(t=0;t<o.length;t++){o[t]/=n}for(t=n=0;t<o.length;t++){n+=o[t],o[t]=n}for(n=Math.random(),t=0;t<o.length;t++){if(n<o[t])return a[t]}return a[Math.floor(Math.random()*a.length)]},log_event:function e(t,i){},is_ad_enabled:function e(){return this.sdkVersionGreater(o.system_info.SDKVersion||"","2.0.4")},print_call_stack:function e(){var t=Error().stack;console.log("PRINTING CALL STACK"),console.log(t)},push_record:function t(){s.setLoginUrl(o.baseUrl+"login");var i;e.getStorageSync("last_play");var n=e.getStorageSync("best_play")||[0,0,0],a=e.getStorageSync("total_play")||[0,0,0];if(4==o.last_play.length){var c=o.last_play[0],r=o.last_play[1],l=o.last_play[2],d=o.last_play[3];i=[c,r,l],e.setStorageSync("last_play",i);var h=!1;c>n[0]&&(n[0]=c,h=!0),r>n[1]&&(n[1]=r,h=!0),l>n[2]&&(n[2]=l,h=!0),h&&e.setStorageSync("best_play",n),a=[a[0]+c,a[1]+r,a[2]+l],e.setStorageSync("total_play",a),o.on_update_level(d),h&&e.postMessage({messageType:2,kill:""+n[0],score:""+n[1],level:""+o.maxlevel}),o.best_info=n,o.push_data_to_server(),o.last_play=[],o.last_info=i,o.total_info=a,i=e.getStorageSync("today_best")||[0,0,0],n=this.getToday(),n==i[0]?(r>i[1]||c>i[2])&&this.push_today_to_server([n,r,c]):this.push_today_to_server([n,r,c])}},push_today_to_server:function t(i){e.setStorageSync("today_best",i)}},cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",mta_analysis:"mta_analysis",wxSdk:"wxSdk"}],VideoMgr:[function(e,t){cc._RF.push(t,"7234e/dc1JHfahhiJ7CYeTi","VideoMgr");t.exports={videoAd:null,videoAdLoaded:!1,cur_adid:0,createVideo:function e(t,i){},releaseVideo:function e(){},showVideo:function e(t){}},cc._RF.pop()},{GlobalData:"GlobalData",Utils:"Utils"}],WheelUI:[function(t,i){cc._RF.push(i,"5c12aTO6RRHor5pjy8tu3ke","WheelUI");var s=t("Utils"),c=t("GlobalData"),r=t("Storage");t("wxSdk"),cc.Class({extends:cc.Component,properties:{pointer:cc.Node,light1Node:cc.Node,light2Node:cc.Node,btnFree:cc.Node,btnShare:cc.Node,btnAd:cc.Node,btnAdLabel:cc.Label,timeLabel:cc.Label,bonusNode:cc.Node,_inAction:!1},start:function e(){},on_open:function e(){this.pointer.position=cc.v2(21.72,-40.98);s.log_event("click_wheel",{}),this.pointer.rotation=0,this.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){this.light1Node.active=!0,this.light2Node.active=!1}.bind(this)),cc.delayTime(.3),cc.callFunc(function(){this.light1Node.active=!1,this.light2Node.active=!0}.bind(this)),cc.delayTime(.3),cc.callFunc(function(){this.light1Node.active=!0,this.light2Node.active=!1}.bind(this))))),this.on_refresh();this.fixUI(),a()},fixUI:function e(){CCUtils.changeSpriteFrame(this.btnFree,d.btn_cj_mf),CCUtils.changeSpriteFrame(this.btnShare,d.btn_cj_fx),CCUtils.changeSpriteFrame(this.btnAd,d.btn_cj_sp);this.btnFree.setContentSize(cc.size(228,78)),this.btnShare.setContentSize(cc.size(228,78)),this.btnAd.setContentSize(cc.size(228,78));this.btnAd.active=tempFlag&&tempFlag},_set_remain_time:function e(t){this.timeLabel.string=s.formatSeconds2(t),0>=t&&(this.btnAd.getComponent(cc.Button).interactable=!0)},on_refresh_ad_btn:function e(){var t=r.get_int("wheel_next_ad"),i=s.getNow();if(i>=t)this.timeLabel.node.active=!1;else{this.btnAd.getComponent(cc.Button).interactable=!1,this.unscheduleAllCallbacks(),this.timeLabel.node.active=!0;var n=t=Math.ceil(t-i);this.schedule(function(){0<=--n&&this._set_remain_time(n)},1,t,0)}},on_refresh:function e(){this._inAction=!1;var t=s.getToday(),i=r.get_int("wheel_free:"+t),o=true||"function"==typeof createwheelVideoAd,a=n(),l=r.get_int("wheel_ad:"+t);if(o){this.btnFree.active=!0,this.btnShare.active=!1;if(i>=1)this.btnFree.getComponent(cc.Button).interactable=!1;if(l>=c.wheel_ad_times){this.btnAdLabel.string="Continue tomorrow",this.btnAd.getComponent(cc.Button).interactable=!1}else{this.btnAdLabel.string=c.wheel_ad_times-l+" More Left",this.on_refresh_ad_btn()}}else{this.btnAdLabel.node.x=-120,this.btnFree.active=!a,this.btnShare.active=a;if(i>=c.wheel_free){this.btnAdLabel.string="Continue tomorrow",this.btnFree.getComponent(cc.Button).interactable=this.btnShare.getComponent(cc.Button).interactable=!1}else{this.btnAdLabel.string=c.wheel_free-i+" More Left"}this.btnAd.getComponent(cc.Button).interactable=!1}},on_click_share:function t(){var i=o(),n=this;if(!this._inAction){e.shareAppMessage({title:i.title,imageUrl:i.imageUrl,query:"inviterid="+c.userInfo.openId,success:function e(){n.on_click_start(),n.scheduleOnce(function(){var e="wheel_free:"+s.getToday(),t=r.get_int(e);r.set_data(e,t+1)}.bind(this),.8)}})}},on_click_ad:function e(){var t=this;if(true||"function"==typeof createwheelVideoAd){this._inAction||PlatformAPI.createVideoAd("wheel",function(){var e="wheel_ad:"+s.getToday(),i=r.get_int(e);(r.set_data(e,i+1),0<c.wheel_ad_cd)&&(e=s.getNow()+c.wheel_ad_cd,r.set_data("wheel_next_ad",e)),t.on_click_start();t.on_refresh_ad_btn()})}},on_click_free:function e(){this._inAction||(this.on_click_start(),this.scheduleOnce(function(){var e="wheel_free:"+s.getToday(),t=r.get_int(e);r.set_data(e,t+1)}.bind(this),.8))},on_click_start:function e(){this._inAction=!0,this.pointer.rotation=0;var t=s.weightingChoice(c.wheel_weight)-1,i=cc.rotateBy(6,[5,47,92,137,182,227,272,317][t]+4320+s.getRandomInt(1,35));this.pointer.runAction(i).easing(cc.easeCubicActionOut(6)),this.scheduleOnce(function(){this.show_bonus(t)}.bind(this),6.5)},show_bonus:function e(t){this._inAction=!1,this.bonusNode.active=!0;var i=this.bonusNode.getChildByName("sun");i.stopAllActions(),i.runAction(cc.repeatForever(cc.rotateBy(1,40))),i=this.bonusNode.getChildByName("bg"),i.on(cc.Node.EventType.TOUCH_START,function(){},this),i.on(cc.Node.EventType.TOUCH_MOVE,function(){},this),i.on(cc.Node.EventType.TOUCH_END,this.onBonusTouchMaskEnd,this),i.on(cc.Node.EventType.TOUCH_CANCEL,this.onBonusTouchMaskEnd,this);var i=this.bonusNode.getChildByName("content"),n=0,o="";for(0==t?(n=5,o="Start with Lv.10 in Next Game",c.on_update_wheel_buff((c.wheel_buff||0)+1)):2==t||4==t||6==t?(n=0,o="Coin",2==t?(o+="x40",c.on_update_gold(c.gold+40)):4!=t&&6!=t||(o+="x80",c.on_update_gold(c.gold+80))):1==t?(n=1,o="Attack Distance +3% in Next Game",t=c.skills_halo[0]||0,c.on_update_skill_halo(0,t+1)):3==t?(n=2,o="Movement Speed +3% in Next Game",t=c.skills_halo[1]||0,c.on_update_skill_halo(1,t+1)):5==t?(n=3,o="Attack Speed +3% in Next Game",t=c.skills_halo[2]||0,c.on_update_skill_halo(2,t+1)):7==t&&(n=4,o="1 Life Token",c.set_coin_revive(c.coin_revive+1)),t=0;5>=t;t++){i.getChildByName("ico_"+t).active=t==n}i.getChildByName("label").getComponent(cc.Label).string=o},onBonusTouchMaskEnd:function e(){this.bonusNode.active=!1,this.on_refresh()},on_click_close:function e(){var t=this.node.parent.getComponent("GameOver");void 0!=t&&t.on_update_gold(),t=this.node.parent.getComponent("HomeUI"),void 0!=t&&t.on_update_coin_revive(),this.node.active=!1}}),cc._RF.pop()},{Const:"Const",GlobalData:"GlobalData",Storage:"Storage",Utils:"Utils",VideoMgr:"VideoMgr",wxSdk:"wxSdk"}],avatar_data:[function(e,t){cc._RF.push(t,"190besAxXhIEIM0nLTDydYr","avatar_data"),t.exports={data:{1:{attack_time_1:.17,attack_time_2:.09,exp_bonus:50,name:"Captain",level:1,guard_radius:2,shield_time:1,guard_cd:2,camera_ratio:100,shield_cd:3,guard_prob:.1,add_speed_per:50,guard_stop:1,exp:80,speed_per:110,weapon_radius_per:80,body_radius_per:56},2:{attack_time_1:.17,attack_time_2:.09,exp_bonus:55,name:"Iron",level:2,guard_radius:2,shield_time:1,guard_cd:2,camera_ratio:100,shield_cd:3,guard_prob:.1,add_speed_per:50,guard_stop:1,exp:120,speed_per:108,weapon_radius_per:90,body_radius_per:62},3:{attack_time_1:.17,attack_time_2:.09,exp_bonus:60,name:"Barton",level:3,guard_radius:2,shield_time:1,guard_cd:2,camera_ratio:100,shield_cd:3,guard_prob:.1,add_speed_per:50,guard_stop:1,exp:145,speed_per:106,weapon_radius_per:100,body_radius_per:68},4:{attack_time_1:.17,attack_time_2:.09,exp_bonus:65,name:"Spider",level:4,guard_radius:1.5,shield_time:1,guard_cd:2,camera_ratio:100,shield_cd:3,guard_prob:.2,add_speed_per:50,guard_stop:1,exp:175,speed_per:104,weapon_radius_per:110,body_radius_per:75},5:{attack_time_1:.17,attack_time_2:.09,exp_bonus:70,name:"Panther",level:5,guard_radius:1.5,shield_time:1,guard_cd:1,camera_ratio:100,shield_cd:3,guard_prob:.2,add_speed_per:50,guard_stop:.9,exp:210,speed_per:102,weapon_radius_per:120,body_radius_per:81},6:{attack_time_1:.17,attack_time_2:.09,exp_bonus:75,name:"Ant",level:6,guard_radius:1.5,shield_time:1,guard_cd:1,camera_ratio:97,shield_cd:4,guard_prob:.2,add_speed_per:40,guard_stop:.9,exp:255,speed_per:100,weapon_radius_per:130,body_radius_per:88},7:{attack_time_1:.17,attack_time_2:.09,exp_bonus:80,name:"Thunder",level:7,guard_radius:1.5,shield_time:1,guard_cd:1,camera_ratio:97,shield_cd:4,guard_prob:.3,add_speed_per:40,guard_stop:.9,exp:305,speed_per:98,weapon_radius_per:140,body_radius_per:92},8:{attack_time_1:.17,attack_time_2:.09,exp_bonus:85,name:"Bat",level:8,guard_radius:1.5,shield_time:1,guard_cd:.5,camera_ratio:97,shield_cd:4,guard_prob:.3,add_speed_per:40,guard_stop:.9,exp:365,speed_per:96,weapon_radius_per:150,body_radius_per:97},9:{attack_time_1:.17,attack_time_2:.09,exp_bonus:90,name:"Green man",level:9,guard_radius:1.5,shield_time:1,guard_cd:.5,camera_ratio:97,shield_cd:4,guard_prob:.4,add_speed_per:40,guard_stop:.8,exp:435,speed_per:94,weapon_radius_per:160,body_radius_per:102},10:{attack_time_1:.17,attack_time_2:.09,exp_bonus:95,name:"Wolf",level:10,guard_radius:1.3,shield_time:1,guard_cd:.5,camera_ratio:97,shield_cd:4,guard_prob:.4,add_speed_per:40,guard_stop:.8,exp:515,speed_per:92,weapon_radius_per:170,body_radius_per:107},11:{attack_time_1:.17,attack_time_2:.09,exp_bonus:100,name:"Super captain",level:11,guard_radius:1.3,shield_time:1,guard_cd:.4,camera_ratio:94,shield_cd:4,guard_prob:.4,add_speed_per:30,guard_stop:.8,exp:605,speed_per:90,weapon_radius_per:180,body_radius_per:112},12:{attack_time_1:.17,attack_time_2:.09,exp_bonus:105,name:"Thanatos",level:12,guard_radius:1.3,shield_time:1,guard_cd:.4,camera_ratio:94,shield_cd:4,guard_prob:.5,add_speed_per:30,guard_stop:.7,exp:705,speed_per:88,weapon_radius_per:190,body_radius_per:116},13:{attack_time_1:.17,attack_time_2:.09,exp_bonus:110,name:"Poison",level:13,guard_radius:1.3,shield_time:1,guard_cd:.4,camera_ratio:94,shield_cd:4,guard_prob:.5,add_speed_per:30,guard_stop:.7,exp:815,speed_per:86,weapon_radius_per:200,body_radius_per:121},14:{attack_time_1:.17,attack_time_2:.09,exp_bonus:115,name:"Variant person",level:14,guard_radius:1.1,shield_time:1,guard_cd:.2,camera_ratio:94,shield_cd:4,guard_prob:.5,add_speed_per:30,guard_stop:.7,exp:935,speed_per:84,weapon_radius_per:210,body_radius_per:126},15:{attack_time_1:.17,attack_time_2:.09,exp_bonus:120,name:"Evil spirit",level:15,guard_radius:1.1,shield_time:1,guard_cd:.2,camera_ratio:94,shield_cd:4,guard_prob:.6,add_speed_per:20,guard_stop:.5,exp:1065,speed_per:82,weapon_radius_per:219,body_radius_per:131},16:{attack_time_1:.17,attack_time_2:.09,exp_bonus:125,name:"Laser",level:16,guard_radius:1.1,shield_time:1,guard_cd:.2,camera_ratio:94,shield_cd:4,guard_prob:.6,add_speed_per:20,guard_stop:.5,exp:1205,speed_per:80,weapon_radius_per:228,body_radius_per:136},17:{attack_time_1:.17,attack_time_2:.09,exp_bonus:130,name:"Clown",level:17,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.6,add_speed_per:20,guard_stop:.5,exp:1355,speed_per:78,weapon_radius_per:237,body_radius_per:140},18:{attack_time_1:.17,attack_time_2:.09,exp_bonus:135,name:"Bold",level:18,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.7,add_speed_per:20,guard_stop:.5,exp:1515,speed_per:76,weapon_radius_per:246,body_radius_per:145},19:{attack_time_1:.17,attack_time_2:.09,exp_bonus:140,name:"Linghtning",level:19,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.7,add_speed_per:20,guard_stop:.5,exp:1685,speed_per:74,weapon_radius_per:255,body_radius_per:150},20:{attack_time_1:.17,attack_time_2:.09,exp_bonus:145,name:"Stone",level:20,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.7,add_speed_per:20,guard_stop:.5,exp:1865,speed_per:72,weapon_radius_per:264,body_radius_per:155},21:{attack_time_1:.17,attack_time_2:.09,exp_bonus:150,name:"Lantern",level:21,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.8,add_speed_per:20,guard_stop:.5,exp:2055,speed_per:70,weapon_radius_per:273,body_radius_per:160},22:{attack_time_1:.17,attack_time_2:.09,exp_bonus:155,name:"Al",level:22,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.8,add_speed_per:20,guard_stop:.5,exp:2255,speed_per:68,weapon_radius_per:282,body_radius_per:164},23:{attack_time_1:.17,attack_time_2:.09,exp_bonus:160,name:"Destroyer",level:23,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.9,add_speed_per:20,guard_stop:.5,exp:2465,speed_per:66,weapon_radius_per:291,body_radius_per:169},24:{attack_time_1:.17,attack_time_2:.09,exp_bonus:165,name:"Commander",level:24,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:91,shield_cd:4,guard_prob:.9,add_speed_per:10,guard_stop:.5,exp:2665,speed_per:64,weapon_radius_per:300,body_radius_per:174},25:{attack_time_1:.17,attack_time_2:.09,exp_bonus:170,name:"Sight",level:25,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:88,shield_cd:4,guard_prob:.9,add_speed_per:10,guard_stop:.5,exp:2965,speed_per:62,weapon_radius_per:309,body_radius_per:179},26:{attack_time_1:.17,attack_time_2:.09,exp_bonus:175,name:"Beetle",level:26,guard_radius:1.1,shield_time:1,guard_cd:0,camera_ratio:88,shield_cd:4,guard_prob:.9,add_speed_per:10,guard_stop:.5,exp:3265,speed_per:60,weapon_radius_per:318,body_radius_per:184},27:{attack_time_1:.17,attack_time_2:.09,exp_bonus:180,name:"Death journey",level:27,guard_radius:1,shield_time:1,guard_cd:0,camera_ratio:88,shield_cd:4,guard_prob:.9,add_speed_per:10,guard_stop:.4,exp:3665,speed_per:58,weapon_radius_per:327,body_radius_per:188},28:{attack_time_1:.17,attack_time_2:.09,exp_bonus:185,name:"Wonder",level:28,guard_radius:1,shield_time:1,guard_cd:0,camera_ratio:88,shield_cd:4,guard_prob:.9,add_speed_per:5,guard_stop:.4,exp:4165,speed_per:56,weapon_radius_per:336,body_radius_per:193},29:{attack_time_1:.17,attack_time_2:.09,exp_bonus:190,name:"Dead",level:29,guard_radius:1,shield_time:1,guard_cd:0,camera_ratio:88,shield_cd:4,guard_prob:.9,add_speed_per:5,guard_stop:.3,exp:5500,speed_per:54,weapon_radius_per:345,body_radius_per:198},30:{attack_time_1:.17,attack_time_2:.09,exp_bonus:195,name:"Magnetic",level:30,guard_radius:1,shield_time:1,guard_cd:0,camera_ratio:88,shield_cd:4,guard_prob:.9,add_speed_per:5,guard_stop:.3,exp:7500,speed_per:52,weapon_radius_per:354,body_radius_per:203}}},cc._RF.pop()},{}],constants:[function(e,t){cc._RF.push(t,"f3f53D69Q1GVoJRTJFlqL2h","constants"),t.exports={WX_HEADER_CODE:"X-WX-Code",WX_HEADER_ENCRYPTED_DATA:"X-WX-Encrypted-Data",WX_HEADER_IV:"X-WX-IV",WX_HEADER_ID:"X-WX-Id",WX_HEADER_SKEY:"X-WX-Skey",WX_SESSION_MAGIC_ID:"F2C224D4-2BCE-4C64-AF9F-A6D872000D1A",ERR_INVALID_PARAMS:"ERR_INVALID_PARAMS",ERR_WX_LOGIN_FAILED:"ERR_WX_LOGIN_FAILED",ERR_WX_GET_USER_INFO:"ERR_WX_GET_USER_INFO",ERR_LOGIN_TIMEOUT:"ERR_LOGIN_TIMEOUT",ERR_LOGIN_FAILED:"ERR_LOGIN_FAILED",ERR_LOGIN_SESSION_NOT_RECEIVED:"ERR_LOGIN_MISSING_SESSION",ERR_SESSION_INVALID:"ERR_SESSION_INVALID",ERR_CHECK_LOGIN_FAILED:"ERR_CHECK_LOGIN_FAILED"},cc._RF.pop()},{}],food_data:[function(e,t){cc._RF.push(t,"15b342uZulJhrhOUwfuv9dt","food_data"),t.exports={data:{1:{radius_per:90,id:1,exp:3},2:{radius_per:105,id:2,exp:4},3:{radius_per:120,id:3,exp:5},4:{radius_per:135,id:4,exp:6},5:{radius_per:150,id:5,exp:7},6:{radius_per:165,id:6,exp:8},7:{radius_per:180,id:7,exp:9}}},cc._RF.pop()},{}],login:[function(t,i){function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(i,"5c484yyUiJAnJUtXexghGu6","login");var o=t("constants"),a=t("session");t=function e(){};var s={method:"GET",success:t,fail:t,loginUrl:null};i.exports={loginWidthCode:function t(i){if(!(i=Object.assign({},s,i)).loginUrl)return i.fail(Error("登录错误：缺少登录地址，请通过 setLoginUrl() 方法设置登录地址"));if(!i.res)return i.fail(Error("请先wx.login"));var n={code:i.code,nickName:i.res.userInfo.nickName||"Player",avatarUrl:i.res.userInfo.avatarUrl||"./fbcdn/avatar.png"};e.request({url:i.loginUrl,data:n,method:"POST",success:function e(t){if(t=t.data,!t||0!==t.code||!t.data)return i.fail(Error("响应错误，"+JSON.stringify(t)));var n=t.data;return!n||!n.userinfo?i.fail(Error("登录失败("+t.error+")："+t.message)):void(a.set(n),i.success(n.userinfo))},fail:function e(t){console.error("登录失败，可能是网络错误或者服务器发生异常"),i.fail(t)}})},setLoginUrl:function e(t){s.loginUrl=t}},cc._RF.pop()},{constants:"constants",session:"session"}],mta_analysis:[function(e,t){},{}],name_data:[function(e,t){cc._RF.push(t,"117eeQm991LKbz4EiJfx7EG","name_data"),t.exports={data:["Trần Đức Lương","Nông Đức Mạnh","Phan Văn Khải"," Võ Nguyên Giáp"," Nguyễn Phú Trọng","Nguyễn Tấn Dũng","Nguyễn Minh Triết"," Trần Dũng Khải","Phan minh","Khải"," Lương dung","ÇAĞLA f Turkish"," ÇAĞRİ f Turkish","GÜL f Turkish","GÜLBAHAR f Turkish","HÜLYA f Turkish"," ÖZGE f Turkish"," UĞUR m Turkish","ÜLKÜ f Turkish","ÜMİT m Turkish","NİLÜFER f Turkish","Inés Pérez Castro","Eugênia Câmara","Letícia","José Basilio da Gam","Márcia","José Américo de Almeida","Luís Filipe de Menezes Lopes",",","Cristóvão Lopes","Leilah Assunção","Elma Yeates"," Daphne Ted","Carl Saxton","Natalie Carey"," Kerwin Black","Vivian Joyce"," Viola Robin"," Tracy Harte"," Orville Daisy","Ronald Wolf","Mark Cissie","Kennedy Hazlitt"," Donna Tennyson","Odelia Tate"," Jay Lindsay"," Jim I.Ida Morse","Conrad Pearson","Bart Ernest","Tabitha Hutt"," Alice McCarthy","Ernest Woolley"," Edwiin Ferguson"," Alberta Chapman"," Winni Adams","George Adela","Luther Benson","Cash Spender","Claude Curme","Poppy Dierser","Antonio Frances","JuliaFelix","MiloClarissa","AllenAnderson","ηκηβ"," κηκλη"," ζβκμζθξ","τΒΓχω"," Саша"," Шура","Толя"," Аркаша"," Боря"," Вава"," Дима"," Валя","じゅんやすひろ","ふたばやまみか"," いちざわひろし","こしごうかつひこ"," ほりすぎかおり"," たけちとしこ","ぬまのいともこ","かいだごういち","みぞぐちなるみ","できやまゆい"," こうたかきくえ","あさもとすみこ","김지혜"," 박지선"," 유은정"," 최효경"," 조현경"," 김수정"," 함우선","나다훈"," 정승수","전우혁","시수종"," 변승아 "]},cc._RF.pop()},{}],quadtree:[function(e,t){cc._RF.push(t,"89bb1WT2kFAM5jDlGZfS6b6","quadtree"),function(e,t){function i(e,t,i,n){this.max_objects=t||10,this.max_levels=i||4,this.level=n||0,this.bounds=e,this.objects=[],this.nodes=[]}i.prototype.split=function(){var e=this.level+1,n=t.round(this.bounds.width/2),o=t.round(this.bounds.height/2),a=t.round(this.bounds.x),s=t.round(this.bounds.y);this.nodes[0]=new i({x:a+n,y:s,width:n,height:o},this.max_objects,this.max_levels,e),this.nodes[1]=new i({x:a,y:s,width:n,height:o},this.max_objects,this.max_levels,e),this.nodes[2]=new i({x:a,y:s+o,width:n,height:o},this.max_objects,this.max_levels,e),this.nodes[3]=new i({x:a+n,y:s+o,width:n,height:o},this.max_objects,this.max_levels,e)},i.prototype.getIndex=function(e){var t=-1,i=this.bounds.x+this.bounds.width/2,n=this.bounds.y+this.bounds.height/2,o=e.y<n&&e.y+e.height<n,n=e.y>n;return e.x<i&&e.x+e.width<i?o?t=1:n&&(t=2):e.x>i&&(o?t=0:n&&(t=3)),t},i.prototype.insert=function(e){var t,i=0;if(!(void 0===this.nodes[0]||-1===(t=this.getIndex(e))))this.nodes[t].insert(e);else if(this.objects.push(e),this.objects.length>this.max_objects&&this.level<this.max_levels)for(void 0===this.nodes[0]&&this.split();i<this.objects.length;){-1===(t=this.getIndex(this.objects[i]))?i+=1:this.nodes[t].insert(this.objects.splice(i,1)[0])}},i.prototype.retrieve=function(e){var t=this.getIndex(e),i=this.objects;if(void 0!==this.nodes[0])if(-1!==t)i=i.concat(this.nodes[t].retrieve(e));else for(t=0;t<this.nodes.length;t+=1){i=i.concat(this.nodes[t].retrieve(e))}return i},i.prototype.clear=function(){this.objects=[];for(var e=0;e<this.nodes.length;e+=1){void 0!==this.nodes[e]&&this.nodes[e].clear()}this.nodes=[]},e.Quadtree=i}(window,Math),cc._RF.pop()},{}],request:[function(t,i){cc._RF.push(i,"25d37nekOlC+4ungd0+6qDL","request");var n="function"==typeof Symbol&&"symbol"==(0,r.default)(Symbol.iterator)?function(e){return(0,r.default)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":(0,r.default)(e)},o=t("constants"),a=t("wxutils"),s=t("session"),c=t("login"),l=function e(){},d=function e(t){var i={};return i},h=function(){function e(e,t){Error.call(this,t),this.type=e,this.message=t}return e.prototype=Error(),e.prototype.constructor=e,e}();i.exports={RequestError:h,request:function t(i){function c(){r&&r()}function r(){var t={},n=s.get();n&&(t=d(n.skey)),e.request(a.extend({},i,{header:a.extend({},v,t),success:function e(t){var i,n=t.data;return n&&-1===n.code||401===t.statusCode?(s.clear(),y?(i=new h(n.error,"登录态已过期"),void m(i)):(y=!0,void c())):void g.apply(null,arguments)},fail:m,complete:l}))}if("object"!==(void 0===i?"undefined":n(i))){var _="请求传参应为 object 类型，但实际传了 "+(void 0===i?"undefined":n(i))+" 类型";throw new h(o.ERR_INVALID_PARAMS,_)}var u=i.success||l,p=i.fail||l,f=i.complete||l,v=i.header||{},g=function e(){u.apply(null,arguments),f.apply(null,arguments)},m=function e(t){p.call(null,t),f.call(null,t)},y=!1;i.login?c():r()}},cc._RF.pop()},{constants:"constants",login:"login",session:"session",wxutils:"wxutils"}],session:[function(t,i){cc._RF.push(i,"fc62co3CeFCuZGp+gJs3Z6N","session");var n="weapp_session_"+t("constants").WX_SESSION_MAGIC_ID;i.exports={get:function t(){return e.getStorageSync(n)||null},set:function t(i){e.setStorageSync(n,i)},clear:function t(){e.removeStorageSync(n)}},cc._RF.pop()},{constants:"constants"}],skill_data:[function(e,t){cc._RF.push(t,"fd85de0SbNFmoypd7iuhKlp","skill_data"),t.exports={data:{1:{skill_1:1,skill_3:40,skill_2:40,id:1},2:{skill_1:40,skill_3:40,skill_2:1,id:2},3:{skill_1:40,skill_3:1,skill_2:40,id:3},4:{skill_1:40,skill_3:40,skill_2:40,id:4},5:{skill_1:40,skill_3:40,skill_2:40,id:5},6:{skill_1:1,skill_3:40,skill_2:40,id:6},7:{skill_1:50,skill_3:40,skill_2:1,id:7},8:{skill_1:50,skill_3:1,skill_2:50,id:8},9:{skill_1:50,skill_3:50,skill_2:50,id:9},10:{skill_1:50,skill_3:50,skill_2:50,id:10},11:{skill_1:1,skill_3:50,skill_2:50,id:11},12:{skill_1:60,skill_3:50,skill_2:1,id:12},13:{skill_1:60,skill_3:1,skill_2:60,id:13},14:{skill_1:60,skill_3:60,skill_2:60,id:14},15:{skill_1:60,skill_3:60,skill_2:60,id:15},16:{skill_1:1,skill_3:60,skill_2:60,id:16},17:{skill_1:70,skill_3:60,skill_2:1,id:17},18:{skill_1:70,skill_3:1,skill_2:70,id:18},19:{skill_1:70,skill_3:70,skill_2:70,id:19},20:{skill_1:70,skill_3:70,skill_2:70,id:20},21:{skill_1:1,skill_3:70,skill_2:70,id:21},22:{skill_1:80,skill_3:70,skill_2:1,id:22},23:{skill_1:80,skill_3:1,skill_2:80,id:23},24:{skill_1:80,skill_3:80,skill_2:80,id:24},25:{skill_1:80,skill_3:80,skill_2:80,id:25},26:{skill_1:1,skill_3:80,skill_2:80,id:26},27:{skill_1:90,skill_3:80,skill_2:1,id:27},28:{skill_1:90,skill_3:1,skill_2:90,id:28},29:{skill_1:90,skill_3:90,skill_2:90,id:29},30:{skill_1:90,skill_3:90,skill_2:90,id:30},31:{skill_1:1,skill_3:90,skill_2:90,id:31},32:{skill_1:100,skill_3:90,skill_2:1,id:32},33:{skill_1:100,skill_3:1,skill_2:100,id:33},34:{skill_1:100,skill_3:100,skill_2:100,id:34},35:{skill_1:100,skill_3:100,skill_2:100,id:35},36:{skill_1:1,skill_3:100,skill_2:100,id:36},37:{skill_1:110,skill_3:100,skill_2:1,id:37},38:{skill_1:110,skill_3:1,skill_2:110,id:38},39:{skill_1:110,skill_3:110,skill_2:110,id:39},40:{skill_1:110,skill_3:110,skill_2:110,id:40},41:{skill_1:1,skill_3:110,skill_2:110,id:41},42:{skill_1:120,skill_3:110,skill_2:1,id:42},43:{skill_1:120,skill_3:1,skill_2:120,id:43},44:{skill_1:1,skill_3:120,skill_2:120,id:44},45:{skill_1:120,skill_3:120,skill_2:1,id:45},46:{skill_1:120,skill_3:1,skill_2:120,id:46},47:{skill_1:1,skill_3:120,skill_2:120,id:47},48:{skill_1:140,skill_3:120,skill_2:1,id:48},49:{skill_1:140,skill_3:1,skill_2:140,id:49},50:{skill_1:1,skill_3:140,skill_2:140,id:50},51:{skill_1:160,skill_3:140,skill_2:1,id:51},52:{skill_1:160,skill_3:1,skill_2:160,id:52},53:{skill_1:1,skill_3:160,skill_2:160,id:53},54:{skill_1:180,skill_3:160,skill_2:1,id:54},55:{skill_1:180,skill_3:1,skill_2:180,id:55},56:{skill_1:1,skill_3:180,skill_2:180,id:56},57:{skill_1:200,skill_3:180,skill_2:1,id:57},58:{skill_1:200,skill_3:1,skill_2:200,id:58},59:{skill_1:1,skill_3:200,skill_2:200,id:59},60:{skill_1:220,skill_3:200,skill_2:1,id:60}}},cc._RF.pop()},{}],tunnel:[function(t,i){function n(t){function i(){return O.status===r}function k(){return O.status===l}function C(){return O.status===d}function N(e){O.status!==e&&(O.status=e)}function w(e,t){D.forEach(function(i){var n=i[0];i=i[1],"*"===n?i(e,t):n===e&&i(t)})}function S(){function i(e){G?(N(c),w("error",{code:h,message:"连接信道服务失败，网络错误或者信道服务没有正确响应",detail:e||null})):L(e)}j||(j=!0,N(G?r:d),o.request({url:t,method:"GET",success:function t(n){200==+n.statusCode&&n.data&&n.data.data.connectUrl?(n=O.socketUrl=n.data.data.connectUrl,a.listen({onOpen:x,onMessage:T,onClose:B,onError:U}),e.connectSocket({url:n}),G=!1):i(n)},fail:i,complete:function e(){return j=!1}}))}function x(){i()?w("connect"):C()&&(w("reconnect"),J=z=0),N(l),W.forEach(A),W.length=0,I()}function T(e){(function(e){var t=e.split(":");if(e=t.shift(),t=t.join(":")||null,e={type:e},t)try{e.content=JSON.parse(t)}catch(e){}switch(e.type){case p:(function(e){var t=e.content;e=t.type,t=t.content,-1<M.indexOf(e)&&(e="@"+e),w(e,t)})(e);break;case v:I();break;case g:(function(e){e=1e3*e.content,isNaN(e)||(H=e,R())})(e);break;case m:F()}})(e.data)}function A(t){if(k()){var i=[t.type];t.content&&i.push(JSON.stringify(t.content)),e.sendSocketMessage({data:i.join(":"),fail:U})}else W.push(t)}function I(){clearTimeout(q),clearTimeout(V),q=setTimeout(R,H)}function R(){k()&&(A({type:f}),V=setTimeout(E,H))}function E(){L("服务器已失去响应")}function L(t){z>=X?(F(),w("error",{code:_,message:"重连失败",detail:t})):(e.closeSocket(),J+=K,N(d),Y=setTimeout(P,J)),0==z&&w("reconnecting"),z+=1}function P(){S()}function B(){Q||k()&&L("链接已断开")}function F(){Q=!0,k()&&A({type:m}),e.closeSocket(),N(c),J=z=0,G=!1,clearTimeout(q),clearTimeout(V),clearTimeout(Y),w("close"),Q=!1}function U(e){switch(O.status){case n.STATUS_CONNECTING:w("error",{code:u,message:"连接信道失败，网络错误或者信道服务不可用",detail:e})}}if(s&&s.status!==c)throw Error("当前有未关闭的信道，请先关闭之前的信道，再打开新信道");s=this;var O=this;this.serviceUrl=t,this.status=this.socketUrl=null,this.open=S,this.on=function(e,t){"function"==typeof t&&D.push([e,t])},this.emit=function(e,t){A({type:p,content:{type:e,content:t}})},this.close=F,this.isClosed=function(){return O.status===c},this.isConnecting=i,this.isActive=k,this.isReconnecting=C,N(c);var M=["connect","close","reconnecting","reconnect","error"],D=[],G=!0,j=!1,W=[],H=15e3,q=0,V=0,z=0,X=n.MAX_RECONNECT_TRY_TIMES||y,J=0,K=n.RECONNECT_TIME_INCREASE||b,Y=0,Q=!1}cc._RF.push(i,"e2dc2YiC81E0pmJAu7guUs6","tunnel");var o=t("request"),a=t("wxTunnel"),s=null,c=n.STATUS_CLOSED="CLOSED",r=n.STATUS_CONNECTING="CONNECTING",l=n.STATUS_ACTIVE="ACTIVE",d=n.STATUS_RECONNECTING="RECONNECTING",h=n.ERR_CONNECT_SERVICE=1001,_=(n.ERR_CONNECT_SOCKET=1002,n.ERR_RECONNECT=2001),u=n.ERR_SOCKET_ERROR=3001,p="message",f="ping",v="pong",g="timeout",m="close",y=5,b=1e3;i.exports=n,cc._RF.pop()},{request:"request",wxTunnel:"wxTunnel"}],wxSdk:[function(e,t,i){cc._RF.push(t,"ee5aeBGfdlDDJPMRpUtqAGz","wxSdk");var n=e("constants");i=e("login");var o=e("session"),a=e("request");e=e("tunnel");var s=t.exports={login:i.login,loginWidthCode:i.loginWidthCode,loginWithCode:i.loginWithCode,loginWithCode_2:i.loginWithCode_2,setLoginUrl:i.setLoginUrl,Session:o,clearSession:o.clear,request:a.request,RequestError:a.RequestError,Tunnel:e};Object.keys(n).forEach(function(e){0===e.indexOf("ERR_")&&(s[e]=n[e])}),cc._RF.pop()},{constants:"constants",login:"login",request:"request",session:"session",tunnel:"tunnel"}],wxTunnel:[function(e,t){function i(e){e?(o=e.onOpen,a=e.onClose,s=e.onMessage,c=e.onError):(o=n,a=n,s=n,c=n)}cc._RF.push(t,"082fccf+3JFFoIpqsqp+THg","wxTunnel");var n=function e(){},o=void 0,a=void 0,s=void 0,c=void 0;i(null),t.exports={listen:i},cc._RF.pop()},{}],wxutils:[function(e,t,i){cc._RF.push(t,"22e61uqfjRBzpLihR/2eeKh","wxutils"),i.extend=function(e){for(var t=Array.prototype.slice.call(arguments,1),i=0;i<t.length;i+=1){var n,o=t[i];for(n in o){o.hasOwnProperty(n)&&(e[n]=o[n])}}return e},cc._RF.pop()},{}],cc_alert_view:[function(t,i,n){"use strict";cc._RF.push(i,"82afdBwDMRHPb2EQ8e887K3","cc_alert_view");"use strict";cc.Class({extends:cc.Component,properties:{},setImage:function e(t){this.bg=new cc.Node;this.bg.width=cc.winSize.width;this.bg.height=cc.winSize.height;this.bg.addComponent(cc.Button);var i=this.bg.addComponent(cc.Graphics);i.rect(-cc.winSize.width/2,-cc.winSize.height/2,cc.winSize.width,cc.winSize.height);i.fillColor=cc.Color(0,0,0,.5);i.fill();this.bg.parent=this.node;this.img_url=t;this.img=new cc.Node;var n=this.img.addComponent(cc.Sprite);this.img.on(cc.Node.EventType.TOUCH_START,this.onTouchEcodeStart.bind(this));this.img.on(cc.Node.EventType.TOUCH_END,this.onTouchEcodeEnd.bind(this));this.img.parent=this.node;var o=this;cc.loader.load({url:t,type:"png"},function(e,t){if(e)return;this.sca;n.spriteFrame=new cc.SpriteFrame(t)});this.label&&this.label.removeFromParent()},onTouchEcodeStart:function e(t){var i=this;this.sequAction&&this.node.stopAction(this.sequAction);this.sequAction=cc.sequence(cc.delayTime(1),cc.callFunc(function(){window.saveErcode&&window.saveErcode(i.img_url,i.hide_view.bind(i))}));this.node.runAction(this.sequAction)},onTouchEcodeEnd:function e(t){this.sequAction&&this.node.stopAction(this.sequAction)},hide_view:function e(){this.node.removeFromParent()}});window.saveErcode=function(t,i){e.downloadFile({url:t,success:function t(n){200===n.statusCode&&e.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function t(n){e.showToast({title:"二维码保存成功!",mask:false});i()},fail:function t(n){e.showToast({title:"二维码保存失败!",mask:false});i()}})}})};cc._RF.pop()},{}],cc_roll_item_view:[function(e,t,i){"use strict";cc._RF.push(t,"f81b3cNSbtL/ZLCCh/PRbcB","cc_roll_item_view");"use strict";cc.Class({extends:cc.Component,properties:{},setSize:function e(t,i){var n=new cc.Node;this.bg_sp=n.addComponent(cc.Sprite);n.parent=this.node;this.width=this.node.width=n.width=t;this.height=this.node.height=n.height=i},setData:function e(t,i){this.item_info=t;var n={};n.jump_type=parseInt(t.jump_type);if(1==n.jump_type){n.jump_appid=t.end_app_appid;n.jump_path=t.jump_parse;n.param_appid=t.end_app_appid;n.icon_name=t.jump_name;n.xcx_name=t.end_app_name;n.jump_name=i.xcx_name;n.jump_parse=""}else if(2==n.jump_type){n.jump_appid=t.jump_xcx_appid;n.jump_path="";n.param_appid=t.end_app_appid;n.icon_name=t.jump_name;n.xcx_name=t.end_app_name;n.jump_name=i.xcx_name;n.jump_parse=t.jump_parse}else 3==n.jump_type&&(n.jump_qrcode=t.jump_qrcode);this.dump_info=n;var o=this;cc.loader.load({url:t.jump_image,type:"png"},function(e,t){if(e)return;this.sca;o.bg_sp.spriteFrame=new cc.SpriteFrame(t);o.bg_sp.node.scaleX=i.icon_space_w/t.width;o.bg_sp.node.scaleY=i.icon_space_h/t.height});this.label&&this.label.removeFromParent();this.label=new cc.Node;var a=this.label.addComponent(cc.Label);a.string=t.jump_name;a.fontSize=parseInt(i.icon_font);var s=cc.Color.WHITE;s.fromHEX(i.font_color);this.label.color=s;a.lineHeight=parseInt(i.icon_font)+10;this.label.x=0;this.label.y=-parseInt(i.icon_space_h)/2-parseInt(i.icon_font);this.label.parent=this.node}});cc._RF.pop()},{}],cc_roll_view:[function(t,i,n){"use strict";cc._RF.push(i,"c1f9cUSFDxF9aWMBeLkKfy1","cc_roll_view");"use strict";var o=t("cc_roll_item_view");var a=t("cc_alert_view");cc.Class({extends:cc.Component,properties:{},onLoad:function e(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchstart.bind(this));this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchmove.bind(this));this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchend.bind(this));this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchcancel.bind(this))},init:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:680;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:180;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;var a=new cc.Node;this.bg_sp=a.addComponent(cc.Sprite);a.parent=this.node;this.item_pools=[];this.content=new cc.Node;this.width=this.node.width=this.content.width=t;this.height=this.node.width=this.content.height=i;this.mask=new cc.Node;this.mask.width=t-n*2;this.mask.height=i-o*2;var s=this.mask.addComponent(cc.Mask);this.content.parent=this.mask;this.mask.parent=this.node;s.type=cc.Mask.Type.RECT},start:function e(){},setData:function e(t){this.info=t;var i=this;this.speed=parseInt(t.background.adv_speed);t.background.background_image&&cc.loader.load({url:t.background.background_image,type:"png"},function(e,t){if(e)return;i.bg_sp.spriteFrame=new cc.SpriteFrame(t);i.bg_sp.node.scaleX=i.width/t.width;i.bg_sp.node.scaleY=i.height/t.height});t.icon.font_color=t.font_color;t.icon.xcx_name=t.xcx_name;this.doItem();this.isRoll=true},update:function e(){if(this.isRoll){for(var t=this.item_pools.length-1;t>=0;t--){if("1"==this.info.background.adv_direction){this.item_pools[t].x-=this.speed;if(this.item_pools[t].x<-this.width/2+parseInt(this.info.icon.icon_space_x)-parseInt(this.info.icon.icon_space_w)/2){var i=this.item_pools[t];this.item_pools.splice(t,1);i.removeFromParent()}}else if("2"==this.info.background.adv_direction){this.item_pools[t].y-=this.speed;if(this.item_pools[t].y<-this.height/2+parseInt(this.info.icon.icon_space_y)+parseInt(this.info.icon.icon_space_h)/2){var i=this.item_pools[t];this.item_pools.splice(t,1);i.removeFromParent()}}}this.doItem()}},doItem:function e(){var t=this.info;var i=0;if("1"==this.info.background.adv_direction){var n=parseInt(t.icon.icon_space_w);var a=-this.width/2+parseInt(t.icon.icon_space_x)+n/2;while(0==this.item_pools.length||this.item_pools[this.item_pools.length-1].x<this.width/2-parseInt(t.icon.icon_space_x)+parseInt(t.icon.icon_space_w)/2){if(this.item_pools.length>0){i=(this.item_pools[this.item_pools.length-1].item_index+1)%t.list.length;a=this.item_pools[this.item_pools.length-1].x+parseInt(t.icon.icon_space)+n}var s=new cc.Node;s.on(cc.Node.EventType.TOUCH_START,this.onTouchstartClick.bind(this));s.x=a;s.y=this.height/2-parseInt(t.icon.icon_space_y)-parseInt(t.icon.icon_space_h)/2;var c=s.addComponent(o);c.setSize(n,parseInt(t.icon.icon_space_h));c.setData(t.list[i],t.icon);s.item_index=i;this.content.addChild(s);this.item_pools.push(s)}}else if("2"==this.info.background.adv_direction){var r=parseInt(t.icon.icon_space_h)+parseInt(t.icon.icon_font)+10;var l=-this.height/2+parseInt(t.icon.icon_space_y)+r/2;while(0==this.item_pools.length||this.item_pools[this.item_pools.length-1].y<(this.height/2-parseInt(t.icon.icon_space_y)+parseInt(t.icon.icon_space_h))/2){if(this.item_pools.length>0){i=(this.item_pools[this.item_pools.length-1].item_index+1)%t.list.length;l=this.item_pools[this.item_pools.length-1].y+parseInt(t.icon.icon_space)+r}var s=new cc.Node;s.on(cc.Node.EventType.TOUCH_END,this.onTouchstartClick.bind(this),this,true);s.y=l;s.x=-this.width/2+parseInt(t.icon.icon_space_x)+parseInt(t.icon.icon_space_w)/2;var c=s.addComponent(o);c.setSize(parseInt(t.icon.icon_space_w),r);c.setData(t.list[i],t.icon);s.item_index=i;this.content.addChild(s);this.item_pools.push(s)}}},doFirstItem:function e(){var t=this.info;var i=0;if("1"==this.info.background.adv_direction){var n=parseInt(t.icon.icon_space_w);var a=-this.width/2+parseInt(t.icon.icon_space_x)+n/2;while(0==this.item_pools.length||this.item_pools[0].x>-this.width/2+parseInt(t.icon.icon_space_x)+parseInt(t.icon.icon_space)+parseInt(t.icon.icon_space_w)/2){if(this.item_pools.length>0){console.log(this.item_pools[0].x,-this.width/2+parseInt(t.icon.icon_space_x)+parseInt(t.icon.icon_space)+parseInt(t.icon.icon_space_w)/2)}if(this.item_pools.length>0){i=(this.item_pools[0].item_index+t.list.length-1)%t.list.length;a=this.item_pools[0].x-(parseInt(t.icon.icon_space)+n)}var s=new cc.Node;s.on(cc.Node.EventType.TOUCH_END,this.onTouchstartClick.bind(this),this,true);s.x=a;s.y=this.height/2-parseInt(t.icon.icon_space_y)-parseInt(t.icon.icon_space_h)/2;s.item_index=i;var c=s.addComponent(o);c.setSize(n,parseInt(t.icon.icon_space_h));c.setData(t.list[i],t.icon);this.content.addChild(s,0);this.item_pools.unshift(s)}}else if("2"==this.info.background.adv_direction){var r=parseInt(t.icon.icon_space_h)+parseInt(t.icon.icon_font)+10;var l=-this.height/2+parseInt(t.icon.icon_space_y)+r/2;while(0==this.item_pools.length||this.item_pools[0].y>-this.height/2+parseInt(t.icon.icon_space_y)+parseInt(t.icon.icon_space)+r/2){if(this.item_pools.length>0){i=(this.item_pools[0].item_index+t.list.length-1)%t.list.length;l=this.item_pools[0].y-(parseInt(t.icon.icon_space)+r)}var s=new cc.Node;s.on(cc.Node.EventType.TOUCH_END,this.onTouchstartClick.bind(this),this,true);s.y=l;s.x=-this.width/2+parseInt(t.icon.icon_space_x)+parseInt(t.icon.icon_space_w)/2;s.item_index=i;var c=s.addComponent(o);c.setSize(parseInt(t.icon.icon_space_w),r);c.setData(t.list[i],t.icon);this.content.addChild(s,0);this.item_pools.unshift(s)}}return s},onTouchstart:function e(t){console.log("--onTouchstart--");this.isRoll=false;this.isTouchMove=false;var i=this;this.sequAction&&this.node.stopAction(this.sequAction);this.sequAction=cc.sequence(cc.delayTime(2),cc.callFunc(function(){i.isRoll=true}));this.node.runAction(this.sequAction);this.lastPointX=t.touch.getLocationX();this.lastPointY=t.touch.getLocationY();return true},onTouchmove:function e(t){console.log("--onTouchmove--",this.info.background.adv_direction);var i=this;this.sequAction&&this.node.stopAction(this.sequAction);this.sequAction=cc.sequence(cc.delayTime(2),cc.callFunc(function(){i.isRoll=true}));this.node.runAction(this.sequAction);if("1"==this.info.background.adv_direction){var n=t.touch.getLocationX();if(this.lastPointX&&Math.abs(n-this.lastPointX)>10){this.isTouchMove=true;var o=n-this.lastPointX;if(o<0){for(var a=this.item_pools.length-1;a>=0;a--){this.item_pools[a].x+=o;if(this.item_pools[a].x<-this.width/2+parseInt(this.info.icon.icon_space_x)-parseInt(this.info.icon.icon_space_w)/2){var s=this.item_pools[a];this.item_pools.splice(a,1);s.removeFromParent()}}this.doItem()}else{for(var a=this.item_pools.length-1;a>=0;a--){this.item_pools[a].x+=o;if(this.item_pools[a].x>this.width/2-parseInt(this.info.icon.icon_space_x)+parseInt(this.info.icon.icon_space_w)/2){var s=this.item_pools[a];this.item_pools.splice(a,1);s.removeFromParent()}}this.doFirstItem()}this.lastPointX=n}}else if("2"==this.info.background.adv_direction){var c=t.touch.getLocationY();console.log("--curY--",c);if(this.lastPointY&&Math.abs(c-this.lastPointY)>10){this.isTouchMove=true;var o=c-this.lastPointY;console.log("--step--",o);if(o<0){for(var a=this.item_pools.length-1;a>=0;a--){this.item_pools[a].y+=o;if(this.item_pools[a].y<-this.height/2+parseInt(this.info.icon.icon_space_y)-parseInt(this.info.icon.icon_space_h)/2){var s=this.item_pools[a];this.item_pools.splice(a,1);s.removeFromParent()}}this.doItem()}else{for(var a=this.item_pools.length-1;a>=0;a--){this.item_pools[a].y+=o;if(this.item_pools[a].y>this.height/2-parseInt(this.info.icon.icon_space_y)+parseInt(this.info.icon.icon_space_h)/2){var s=this.item_pools[a];this.item_pools.splice(a,1);s.removeFromParent()}}this.doFirstItem()}this.lastPointY=c}}},onTouchend:function e(t){console.log("--onTouchend--");var i=this;this.sequAction&&this.node.stopAction(this.sequAction);this.sequAction=cc.sequence(cc.delayTime(2),cc.callFunc(function(){i.isRoll=true}));this.node.runAction(this.sequAction)},onTouchcancel:function e(t){console.log("--onTouchcancel--");var i=this;this.sequAction&&this.node.stopAction(this.sequAction);this.sequAction=cc.sequence(cc.delayTime(2),cc.callFunc(function(){i.isRoll=true}));this.node.runAction(this.sequAction)},onTouchstartClick:function t(i){if(this.isTouchMove)return;console.log("--onTouchstartClick--");var n=i.currentTarget.getComponent(o);if(3==n.dump_info.jump_type){e.previewImage({urls:[n.item_info.jump_qrcode]})}else 1!=n.dump_info.jump_type&&2!=n.dump_info.jump_type||window.moreDumpFun&&window.moreDumpFun(n.dump_info)}});cc._RF.pop()},{cc_alert_view:"cc_alert_view",cc_roll_item_view:"cc_roll_item_view"}]},{},"GlobalData Storage VideoMgr AnimationMgr Camera Game GameOver Player mta_analysis quadtree avatar_data food_data name_data skill_data constants login request session tunnel wxSdk wxTunnel wxutils AudioCtrl EvoItem GoldBonusUI HomeUI InviteItem InviteUI Joystick JoystickBg JoystickCommon LoginUI SettingUI SkillItem TodayBonusUI TodayBuffUI WheelUI AnimEvent ButtonScaler OutShare ReviveAd GlobalRankUI RankItem RankUI ResultRankItem TodayRankUI FriendUI ResultRankUI SubRankUI Const Utils cc_alert_view cc_roll_item_view cc_roll_view".split(" "))})()}).call(this,i(0),i(3),i(6),i(7),i(8),i(9))},function(e,t,i){"use strict";e.exports=function(){return window.SSSGameConfig.getSwitchState.apply(window.SSSGameConfig,arguments)}},function(e,t,i){"use strict";e.exports=function(){return window.SSSGameConfig.getRandomShareUnit.apply(window.SSSGameConfig,arguments)}},function(e,t,i){"use strict";e.exports=function(){return window.PlatformAPI.closeCurrentBannerAd.apply(window.PlatformAPI,arguments)}},function(e,t,i){"use strict"},function(e,t){function i(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(12);var o={platform:"H5",toast:null,showToast:function(e){if(typeof e===typeof""){n.vhs.showToast({content:e})}else{e.title&&!e.content&&(e.content=e.title);n.vhs.showToast(e)}},showModal:function e(t){n.vhs.showModal(t)},getItem:function e(t){return localStorage.getItem(t)},setItem:function e(t,i){return localStorage.setItem(t,i)},requestOpenId:function e(){return""},createVideoAd:function(e,t){t&&t()},createInterstitialAd:function e(t,i){i&&i()},initAd:function e(t,i){console.log("initAd--data",t);i&&i()},getLocaleType:function e(){return"zh"},setStorageSync:function e(t,i){localStorage.setItem(t,JSON.stringify(i))},setStorage:function e(t){var i=t.key,n=t.data,o=t.success;setTimeout(function(){localStorage.setItem(i,JSON.stringify(n));o&&o()},0)},getOpenDataContext:function e(){return{postMessage:function e(t){console.log("open data context post message : ",t)}}},login:function e(t){t&&t.fail&&t.fail(new Error("不支持该接口"))},getSystemInfoSync:function e(){return{}},getLaunchOptionsSync:function e(){return{}},clearStorage:function e(t){setTimeout(function(){localStorage.clear();t.success&&t.success()},0)},clearStorageSync:function e(){localStorage.clear()},getStorage:function e(t){var i=t.key,n=t.success;setTimeout(function(){var e=localStorage.getItem(i);try{n&&n(JSON.parse(e))}catch(t){n&&n(e)}},0)},getStorageSync:function e(t){let i=localStorage.getItem(t);try{return JSON.parse(i)}catch(e){return i}},removeStorage:function e(t){var i=t.key,n=t.success;setTimeout(function(){localStorage.removeItem(i);n&&n()},0)},removeStorageSync:function e(t){localStorage.removeItem(t)},getStorageInfo:function e(t){var i=t.success;setTimeout(function(){i&&i({})},0)},getStorageInfoSync:function e(){return{}},request:function e(t){var i=t.url;var n=t.success;var o=t.fail;var a=t.complete;var e=new XMLHttpRequest;e.onreadystatechange=function(){var t;try{t=JSON.parse(e.responseText)}catch(i){t=e.responseText}t={data:t};if(4==e.readyState&&200<=e.status&&400>e.status){n&&n(t);a&&a(t)}else{o&&o(t);a&&a(t)}};e.open(t.method||"GET",i);e.send(JSON.stringify(t.data));console.log(t)},getVideoAdPlayInfoToday:function e(){return{playTimes:-1,maxTimes:-1,valid:true}},updateShareMenu:function e(t){t&&t.success&&t.success()},getPlayerInfo:function e(t){return{name:"test",avatarUrl:""}},login(e){e.success&&e.success({code:"1"})},getUserInfo(e){e.success&&e.success({userInfo:PlatformAPI.getPlayerInfo()})}};t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.vhs={showToast:function e(t){console.log(t);var i=this;var n=function e(){var t=i.getValidMetaWidthScale();var n=document.getElementsByTagName("body")[0];var o=document.createElement("div");o.id="vhs-main-toast";o.style.visibility="hidden";o.style.minWidth="45%";o.style.maxWidth="55%";o.style.left="0";o.style.right="0";o.style.marginLeft="auto";o.style.marginRight="auto";o.style.backgroundColor="#333";o.style.color="#fff";o.style.textAlign="center";o.style.borderRadius=5*t+"px";o.style.padding=10*t+"px";o.style.position="fixed";o.style.zIndex="10";o.style.top="35%";o.style.fontSize=16*t+"px";n.appendChild(o)};var o=function e(){var t=document.getElementById("vhs-main-toast");t.parentNode.removeChild(t)};var a=3e3;if(t.duration){a=t.duration}if(t.content){n();var s=document.getElementById("vhs-main-toast");s.innerHTML=t.content;s.style.visibility="visible";setTimeout(function(){o();if(t.complete)t.complete()},a)}},getValidMetaWidthScale:function e(){var t=1;var i=document.getElementsByTagName("meta");var n=0;for(var o=i.length-1;o>=0;o--){var a=i[o];var s=a.getAttribute("content");if(s==null||s.indexOf("width")==-1||s=="null")continue;var c=s.split(",");for(var r=0,l=c.length;r<l;r++){var d=c[r];if(d.indexOf("width")==-1){continue}var h=d.split("=");n=+h[h.length-1]}if(n>0){break}}var _=375;if(n!=0){t=n/_}return t},showModal:function e(t){var i=this;var n=function e(){var t=i.getValidMetaWidthScale();var n=document.getElementsByTagName("body")[0];var o=document.createElement("div");o.id="vhs-modal-bg-cover";o.style.backgroundColor="rgba(51, 51, 51, 0.85)";o.style.width="100%";o.style.height="100%";o.style.position="fixed";o.style.zIndex="999";o.style.top="0";n.appendChild(o);var a=document.createElement("div");a.id="vhs-modal-warp";a.style.visibility="visible";a.style.minWidth="50%";a.style.maxWidth="66.8%";a.style.backgroundColor="#fff";a.style.color="#333";a.style.textAlign="center";a.style.borderRadius=5*t+"px";a.style.paddingTop=10*t+"px";a.style.position="fixed";a.style.zIndex="10";a.style.left="0";a.style.right="0";a.style.marginLeft="auto";a.style.marginRight="auto";a.style.top="44%";a.style.fontSize=15*t+"px";a.style.borderStyle="solid";a.style.borderColor="#e1e0e4";a.style.borderWidth=1*t+"px";o.appendChild(a);var s=document.createElement("div");a.appendChild(s);var c=document.createElement("p");c.id="vhs-modal-title";c.style.fontSize=16*t+"px";c.style.marginTop="0px";c.style.marginBottom="0px";s.appendChild(c);var r=document.createElement("div");r.id="vhs-modal-content";r.style.paddingTop=10*t+"px";r.style.paddingBottom=15*t+"px";r.style.paddingLeft=10*t+"px";r.style.paddingRight=10*t+"px";r.style.fontSize=14*t+"px";r.style.color="rgb(95, 92, 92)";s.appendChild(r);var l=document.createElement("div");l.id="vhs-modal-action";l.style.bottom=9*t+"px";l.style.width="100%";l.style.borderTop="1px solid rgb(191, 190, 190)";l.style.height=41*t+"px";a.appendChild(l);var d=document.createElement("div");d.id="vhs-modal-cancel";d.style.float="left";d.style.width="50%";d.style.color="red";d.style.height=41*t+"px";d.style.lineHeight=41*t+"px";l.appendChild(d);var h=document.createElement("div");h.id="vhs-modal-confirm";h.style.float="right";h.style.width="49%";h.style.height=41*t+"px";h.style.lineHeight=41*t+"px";h.style.borderLeft="1px solid rgb(191, 190, 190)";l.appendChild(h)};var o=function e(){var t=document.getElementById("vhs-modal-bg-cover");t.parentNode.removeChild(t)};var a=function e(){var t=i.getValidMetaWidthScale();var n=document.getElementById("vhs-modal-warp");var o=window.outerHeight;n.style.top=(o*t-n.clientHeight)/2+"px";console.log((o*t-n.clientHeight)/2+"px")};if(t.content){n();var s=document.getElementById("vhs-modal-title");s.innerText=t.title||"Tips";var c=document.getElementById("vhs-modal-content");c.innerText=t.content;var r=document.getElementById("vhs-modal-cancel");r.innerHTML=t.cancelTitle||"Cancel";a();r.onclick=function(){if(t.cancel){t.cancel()}o()};var l=document.getElementById("vhs-modal-confirm");l.innerHTML=t.confirmTitle||"Confirm";l.onclick=function(){if(t.confirm)t.confirm();o()}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(14);var o=null;var a=null;var s=null;var c=null;var r=function e(t){FBInstant.getRewardedVideoAsync(s).then(function(e){a=e;return e.loadAsync()}).then(function(){t()}).catch(function(e){t()})};var l=function e(t){FBInstant.getInterstitialAdAsync(c).then(function(e){o=e;return e.loadAsync()}).then(function(){t()}).catch(function(e){t()})};var d={platform:"FBInstant",share:function e(t){if(t===void 0){t=function e(){}}const i=SSSGameConfig.getRandomShareUnit(undefined,true);const n=PlatformAPI.getItem(i.imageUrl);const o=e=>{FBInstant.shareAsync({intent:"REQUEST",image:e.image,text:e.title,data:{}}).then(function(e){console.log("shareResult",e);t()}).catch(function(e){console.error("shareResult",e)})};if(n){o({image:n,title:i.title})}else{PlatformAPI.getBase64(i.imageUrl,function(e){PlatformAPI.setItem(i.imageUrl,e);o({image:e,title:i.title})})}console.log(i)},onShow:function e(t){if(window.cc){var i=window.cc;i.game.on(i.game.EVENT_SHOW,t)}},onHide:function e(t){FBInstant.onPause(t)},createShortcut:function e(){FBInstant.canCreateShortcutAsync().then(function(e){if(e){FBInstant.createShortcutAsync()}})},createVideoAd:function e(t,i){if(a){a&&a.showAsync().then(function(){r(function(){});i()}).catch(function(e){i()})}else{d.createInterstitialAd(t,i)}},createInterstitialAd:function e(t,i){if(o){o.showAsync().then(function(){l(function(){});i()}).catch(function(e){i()})}else{i()}},initAd:function e(t){c=t.fb_site.img_ad;s=t.fb_site.video_ad;if(FBInstant.getSupportedAPIs().indexOf("getRewardedVideoAsync")!=-1){r(function(){})}if(FBInstant.getSupportedAPIs().indexOf("getInterstitialAdAsync")!=-1){l(function(){})}},getBase64:function(e,t){var i=new XMLHttpRequest;i.open("get",e,true);i.responseType="blob";i.onload=function(){if(this.status==200){var e=this.response;var i=new FileReader;i.onloadend=function(e){var i=e.target["result"];t&&t(i)};i.readAsDataURL(e)}};i.setRequestHeader("Access-Control-Allow-Origin","*");i.send()},chooseAsync:function(e){var t=function(){var t=SSSGameConfig.getRandomShareUnit(e,true);var i=PlatformAPI.getItem(t.imageUrl);var n=function(e){var o={action:"CUSTOM",image:e.image,text:e.title,template:"",notification:"PUSH"};FBInstant.updateAsync(o).then(function(){console.log("Message was sent successfully")}).catch(function(e){console.error(e)});if(i){n({image:i,title:t.title})}else{PlatformAPI.getBase64(t.imageUrl,function(e){PlatformAPI.setItem(t.imageUrl,e);n({image:e,title:t.title})})}}};FBInstant.context.chooseAsync().then(t).catch(t)},getLocaleType:function e(){var t=FBInstant.getLocale();if(t==="zh_CN"){return"zh"}else{return"en"}},shareAppMessage:function e(t){d.share(t.success)},navigateToMiniProgram:function e(t){PlatformAPI.request({method:"POST",url:serverReportHttp+"/game/fb/sharelog.html",data:{fb:t.extraData.boxname,index:t.btnIndex,type:1,player_id:FBInstant.player.getID()}});FBInstant.switchGameAsync(t.appId,t.extraData).then(()=>{PlatformAPI.request({method:"POST",url:serverReportHttp+"/game/fb/sharelog.html",data:{fb:t.extraData.boxname,index:t.btnIndex,type:2,player_id:FBInstant.player.getID()}});t.success&&t.success()}).catch(e=>{console.log("12314123141231412314123",e);t.fail&&t.fail()})},setUserCloudStorage:function e(t){var i={};t.KVDataList.forEach(function(e){i[e.key]=e.value});FBInstant.player.setStatsAsync(i).then(t.success)},getPlayerInfo:function e(){return new Proxy({},{get:function(e,t){if(t==="nickName"){return FBInstant.player.getName()||"Guest"}if(t==="avatarUrl"){return FBInstant.player.getPhoto()||"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=2131367860256035&height=256&width=256&ext=1545806238&hash=AeQtdilOJOZquvvA"}}})},updateLeaderboard(e,t,i){if(typeof i!==typeof""){i=JSON.stringify(i)}FBInstant.getLeaderboardAsync(e).then(function(e){return e.setScoreAsync(t,i)}).catch(e=>{console.error(e)})}};t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(15);var o={default:{title:"Let's play this amazing game!",image:n.default.logo},challenge:{title:"",image:n.default.challenge}};t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n={};t.default=n},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=i(4);var o=window.wx;var a={platform:"Wechat",postMessage:function e(t,i){o.getOpenDataContext().postMessage({msgName:t,msgData:i})},share:function e(t){var i=SSSGameConfig.getRandomShareUnit();i.success=t||function(){};o.shareAppMessage(i)},getItem:function e(t){return o.getStorageSync(t)},setItem:function e(t,i){o.setStorageSync(t,i)},onShareAppMessage:function e(t){o.onShareAppMessage(function(){return t()});o.showShareMenu()},requestOpenId:function e(t){o.login({success:function e(i){var n=i.code;o.request({url:"https://nodet.sanshengshi.ltd/vx/login.json",method:"post",data:{code:n},header:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-VX-APPID":"wx33705e8a861671b0"},success:function e(i){t(i.data.user.openId)}})}})},createBannerAd:function e(t){n.default.createBannerAd(t)},onShow:function e(t){o.onShow(t)},onHide:function e(t){o.onHide(t)},initAd:function t(i,a){var s=n.default;var c={};var r={};var l={};i.adv_info.forEach(function(e){if(e.adv_type=="video"){r[e.adv_data]={id:e.adv_id,maxPlayTimes:+e.adv_show_time||Infinity}}else{c[e.adv_data]={id:e.adv_id,showTime:+e.adv_show_time,hideTime:+e.adv_hide_time};e.adv_width&&(l[e.adv_id]=e.adv_width)}});var d=function e(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()};var h=null;var _=false;var u=null;var p={};var f=false;var v=3;var g={delayHideTimer:null,showInterval:null,hideInterval:null};var m=function e(){if(!_){return}clearTimeout(g.delayHideTimer);g.delayHideTimer=null;clearInterval(g.showInterval);g.showInterval=null;clearInterval(g.hideInterval);g.hideInterval=null;_=false;u=null};var y=function t(i){if(!e||!o.createBannerAd){return function(){}}var n=l[i]||(window.innerWidth>window.innerHeight?300:window.innerWidth);var a=o.createBannerAd({adUnitId:i,style:{left:(window.innerWidth-n)/2,top:0,width:n}});a.onResize(function(e){var t=e.width,i=e.height;a.style.top=window.innerHeight-i});a.onError(function(e){console.error("加载广告失败!",e)});a.show();return a};var b=function e(t){if(!t)m();if(!h)return;try{h.offResize();h.destroy();h.offError();h=null}catch(e){console.error("closeCurrentBannerAd failed !");console.error(e);h=null}};var k=function e(t,i){if(i===void 0){i=true}b(!i);h=y(t)};var C=function e(t){s["create"+t+"BannerAd"]=function(){var e=c[t];if(!e.id){console.error(t+" BannerAd 的adv_id没有配置");return}else{if(e.showTime&&e.hideTime){console.log("创建循环广告",t,e.showTime+e.hideTime,e.showTime);w(t,e.showTime+e.hideTime,e.showTime)}else{k(e.id)}}}};for(var N in c){C(N)}s.createBannerAd=function(e){if(!s["create"+e+"BannerAd"]){console.log("广告 "+e+" 没有配置");return}s["create"+e+"BannerAd"]()};var w=function e(t,i,n,o){if(o===void 0){o=true}b();if(i<1e3){console.error("创建间隔太短了! 时间单位是毫秒, 当前为 "+i+"毫秒")}o&&k(c[t].id,u!=t);g.showInterval=setInterval(function(){k(c[t].id,u!=t)},i);g.delayHideTimer=setTimeout(function(){g.hideInterval=setInterval(function(){b(true)},i);b(true)},n);_=true;u=t};var S=function(t,i,n,o,a,s){var c=e.createRewardedVideoAd({adUnitId:t});var r=function e(){c.offClose();c.offError();a()};var l=function t(i){e.hideLoading();console.error("视频广告加载失败",i);o();r();p[s]=(p[s]||0)+1};c.onClose(function(e){e&&e.isEnded?i():n();r()});c.onError(l);e.showLoading({title:"视频加载中",mask:true});c.load().then(function(){e.hideLoading();return c.show()})};var x=e.getStorageSync("VideoAdPlayLastDay");var T=d();var A=false;if(x!=T){x=T;e.setStorageSync("VideoAdPlayLastDay",x);A=true}var I={};s.getVideoAdPlayInfoToday=function(e){if(!r[e]){return{playTimes:-1,maxTimes:-1,valid:false}}var t=r[e].maxPlayTimes;var i=I[e];if(p[e]&&p[e]>=v){return{playTimes:i,maxTimes:t,valid:false}}return{playTimes:i,maxTimes:t,valid:t-i>0}};var R=function t(i){if(A){e.setStorageSync(i+"VideoAdPlayTimesToday",0);I[i]=0}else{I[i]=+e.getStorageSync(i+"VideoAdPlayTimesToday")}s["create"+i+"VideoAd"]=function(t,n,o,a){if(!r[i].id){console.error("视频 "+i+" 未配置 adUnitId!");o&&o();a&&a();return}if(I[i]>=r[i].maxPlayTimes){e.showModal({title:"提示",content:"今日次数已用完"});o&&o();a&&a();return}if(f)return;f=true;var s=function e(){f=false;a&&a()};if(!n){n=function t(){e.showModal({title:"提示",content:"视频未播放完"})}}if(!o){o=function t(){e.showModal({title:"提示",content:"视频加载失败, 请稍后再试"})}}S(r[i].id,function(){I[i]++;e.setStorageSync(i+"VideoAdPlayTimesToday",I[i]);t&&t()},n,o,s,i)}};for(var N in r){R(N)}s.createVideoAd=function(e,t,i,n,o){if(!s["create"+e+"VideoAd"]){console.log("广告 "+e+" 没有配置");return}s["create"+e+"VideoAd"](t,i,n,o)};s.closeCurrentBannerAd=b}};t.default=a}).call(this,i(0))},function(e,t,i){"use strict"},function(e,t,i){},function(e,t,i){"use strict";var n=window.cc;var o=[];var a=0;var s=10;var c=function(){function e(){}e.prototype._load=function(e,t){n.loader.load(e,function(i,o){if(i){console.error("Load Res:"+e+" Error: ");console.error(i);o=new n.Texture2D}t(o)})};e.prototype.LoadRes=function(e,t,i){var n=0;var o=function o(s){var c=e[s];n++;a._load("res/raw-assets/resources/"+c,function(e){t[s]=e;n--;if(n==0){i&&i()}})};var a=this;for(var s in e){o(s)}};e.prototype.LoadResFromNetwork=function(e,t,i){var n=0;var o=function o(s){var c=e[s];n++;a._load(c,function(e){t[s]=e;n--;if(n==0){i&&i()}})};var a=this;for(var s in e){o(s)}};e.prototype.TouchUrl=function(e,t,i,n,o){if(o===void 0){o="score.png"}var a=new XMLHttpRequest;var s=this;a.onabort=function(){console.log("abort");n()};a.onerror=function(){console.log("onerror");n()};a.ontimeout=function(){console.log("ontimeout");n()};a.onreadystatechange=function(){if(4==a.readyState){if(a.status==404){i()}else{n()}}},a.open("GET","https://game.sanshengshi.ltd/"+e+"/"+t+"/"+o+"?f="+Math.random(),true),a.send()};e.prototype.newSprite=function(e,t,i){var o=new n.Node;var a=new n.SpriteFrame;o.addComponent(n.Sprite).spriteFrame=a;t&&t.addChild(o);i&&(o.position=i);var s=function e(t){a.setTexture(t)};if(e instanceof n.Texture2D){s(e)}else{n.loader.load(e,function(t,i){if(t){console.error("Load Res:"+e+" Error: ");console.error(t)}s(i)})}return o};e.prototype.newButton=function(e,t,i){if(i===void 0){i="touchend"}var o=new n.Node;var a=new n.SpriteFrame(e);o.addComponent(n.Sprite).spriteFrame=a;o.addComponent(n.Button).zoomScale=.9;o.getComponent(n.Button).transition=3;if(t){o.on(i,t)}return o};e.prototype.changeSpriteFrame=function(e,t){if(!n.isValid(e)){return}var i=e.getComponent(n.Sprite)||e.addComponent(n.Sprite);if(i.spriteFrame&&i.spriteFrame._texture===t){return}i.spriteFrame=new n.SpriteFrame(t);e.width=t.width;e.height=t.height};return e}();window.CCUtils=new c},function(e,t,i){"use strict";(function(e){window.roll_infos=[];window.moreDumpFun=function(t){console.log("jump start-",t.jump_appid);e.navigateToMiniProgram({appId:t.jump_appid,path:t.jump_path,extraData:{appid:t.param_appid,position:t.icon_name,appname:t.xcx_name,boxname:t.jump_name,jump_parse:t.jump_parse},success:function i(n){console.log("jump OK!");e.aldSendEvent&&e.aldSendEvent("从《".concat(t.jump_name,'》的"').concat(t.icon_name,'"真实跳转到《').concat(t.xcx_name,"》"),"跳转");console.log(n)},fail:function e(t){console.log("jump Failed!");console.log(t)}});e.aldSendEvent&&e.aldSendEvent("从《".concat(t.jump_name,'》的"').concat(t.icon_name,'"点击跳转到《').concat(t.xcx_name,"》"),"点击")};window.saveErcode=function(t,i){e.downloadFile({url:t,success:function t(n){if(n.statusCode===200){e.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function t(n){e.showToast({title:"二维码保存成功!",mask:false});i()},fail:function t(n){e.showToast({title:"二维码保存失败!",mask:false});i()}})}}})}}).call(this,i(0))},function(e,t,i){"use strict";var n=i(1);var o=n(i(2));{var a="0.0.5";var s=function e(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200<=n.status&&400>n.status){i(n.responseText)}};n.open("GET",t);n.send()};var c=function(){function e(){}e.prototype.checkNew=function(){};e.prototype.register=function(e){console.log("\n\n================================\n\nWill Load Utils\n\n");for(var t in e){var i=e[t];window[t]=i.func}window.showHelp();console.log("Utils Loaded Success!!\n\n================================\n\n")};e.prototype.getUtils=function(){if(true&&window.cc){if(window.cc.DEFAULT_ENGINE){console.log("%c \n\n================================\n\n "+window.cc.DEFAULT_ENGINE+" Project\n\n================================\n\n","color:#ff0000");return null}console.log("%c \n\n================================\n\n Cocos Creator Project\n\n================================\n\n","color:#ff0000");return this.initCocosCreatorProject()}else if(true&&window.egret){console.log("%c \n\n================================\n\n Egret Project\n\n================================\n\n","color:#ff0000");return this.initEgretProject()}else{if(true&&(window.laya||window.Laya)){console.log("%c \n\n================================\n\n Laya Project\n\n================================\n\n","color:#ff0000")}else{console.log("%c \n\n================================\n\nUnkonw Project!!!\n\nUtils Load Failed!!!\n\n================================\n\n","color:#ff0000")}return null}};e.prototype.initEgretProject=function(){var e=window.egret;var t=window.eui;var i=this;var n="";var a;var s={};var c=function e(){for(var t in window){var i=window[t];if(i&&i.stage&&i.stage.stageHeight){return i.stage}}};function r(e,t){if(t===void 0){t=false}var n=c();var o=[];var a=t?function(){return true}:function(e){return e.name!=i.JustShowNodeName};function s(t){if(e(t)&&a(t)){o.push(t)}t.$children&&t.$children.forEach(function(e){s(e)})}s(n);if(o.length>1){return o}return o[0]}var l=function t(i,n){if(n===void 0){n=true}var a=s[i.hashCode];var c;if(a){if(n){console.log("cached:");console.log(a.obj);console.log(a.skinName+"--\x3e"+a.name)}return a.name}r(function(t){if(t instanceof e.Stage){return false}for(var a in t){if("$parent"==a||"parent"==a||"$stage"==a||"stage"==a){continue}var r=t[a];if(r&&(0,o.default)(r)=="object"){if(r==i){s[i.hashCode]={obj:t,name:a,skinName:r.skinName};if(n){console.log(t);console.log(t.skinName+"--\x3e"+a)}if(c){console.log("注意, 这个object在多个脚本中被引用!! "+c)}c=a;return true}}}});return c};var d=true;e.DisplayObject.prototype.$oldOnAddToStage=e.DisplayObject.prototype.$onAddToStage;e.DisplayObject.prototype.$onAddToStage=function(t,i){var n=this;e.DisplayObject.prototype.$oldOnAddToStage.call(n,t,i);if(!n._addTouchEvent){n.addEventListener("touchBegin",function(){if(!d)return;d=false;console.log(n.getMyName(),n);setTimeout(function(){d=true},1)},n);n._addTouchEvent=true}};Object.defineProperty(t.Image.prototype,"source",{get:function e(){return this._source},set:function e(t){if(t==this._source){return}this._source=t;if(this.$stage){this.parseSource()}else{this.sourceChanged=true;this.invalidateProperties()}window[t]=this},enumerable:true,configurable:true});var h=0;var _=function e(t){return t.__class__+"_"+h++};var u={getMyName:{doc:"()\n        自动设置指定节点的名称, 优先级 : name -> source -> inScriptKey -> __class__",func:function e(t){t.name=t.name||t.source||l(t,false)||_(t);return t.name}},showMyName:{doc:"()\n        显示指定节点的名称",func:function t(n){if(n.name.indexOf(i.JustShowNodeName)!=-1){return}var o;var a;if(n instanceof e.DisplayObjectContainer){o=n.getChildByName(n.JustShowNodeName);a=true}else{o=n.parent.getChildByName(n.JustShowNodeName);a=false}if(!o){var s=new e.TextField;var c=n.getMyName();s.name=c+i.JustShowNodeName;n.JustShowNodeName=s.name;a?n.addChild(s):(s.visible=n.visible,n.parent.addChild(s),s.x=n.x,s.y=n.y);s.text=c;s.textColor="ff0000";s.size=20}else{if(!o.visible){o.visible=n.visible}}}}};n+="===== Node Function Begin =====\n\n";var p=function t(i){n+="    node."+i+u[i].doc+"\n\n";e.DisplayObject.prototype[i]=function(){return u[i].func(this)}};for(var f in u){p(f)}n+="====== Node Function Done ======\n";var v=true;var g={showAllNode:{doc:"(): void\n        显示所有显示用的节点, (附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function e(){if(v){console.log("%c 第一次调用可能会卡, 请耐心等待加载完全后的提示","color:#ff0000")}r(function(e){e.showMyName();return false});if(v){console.log("%c 加载完了","color:#ff0000");v=false}}},hideAllNode:{doc:"(): void\n        隐藏所有显示用的节点(附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function e(){r(function(e){if(e.name.indexOf(i.JustShowNodeName)!=-1){e.visible=false}return false})}},destroyAllShowNode:{doc:"(): void\n        删除所有显示用的节点(附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function t(){r(function(t){return t instanceof e.TextField&&t.name.indexOf(i.JustShowNodeName)!=-1}).forEach(function(e){e.parent.removeChild(e)})}},getRootNode:{doc:"(): egret.Stage\n        获取场景的root节点",func:function e(){return c()}},getInScriptKey:{doc:"(egret.HashObject): void\n        打印出引用该节点是否已在脚本被引用",func:l},nodeFilter:{doc:"(filter: Function): egret.DisplayObject | Array<egret.DisplayObject>\n        过滤节点",func:r},getIncludeNameNode:{doc:"(name: string): egret.DisplayObject | Array<egret.DisplayObject>\n        显示名称包含该字符串的节点",func:function e(t){return r(function(e){var n=e.name||e.source||"";return-1!=n.indexOf(t)&&-1==n.indexOf(i.JustShowNodeName)})}},getIncludeStringNode:{doc:"(string: string): egret.TextField | Array<egret.TextField>\n        显示内容包含该字符串的节点",func:function e(t){return r(function(e){return e.text&&e.text.indexOf(t)!==-1})}},getByScriptKey:{doc:"(string: string)\n        获取出指定的变量的值, 若该变量不为object, 则会打印含有该变量的object; 若该变量为object, 则会保存在其__script属性中",func:function e(t){var i=[];r(function(e){if((0,o.default)(e[t])!==(0,o.default)(void 0)){if((0,o.default)(e[t])!="object"){console.log(e[t],e)}else{e[t].__script=e}i.push(e[t])}return false});if(i.length>1){return i}return i[0]}},seekNodeByName:{doc:"(name: string): egret.DisplayObject | Array<egret.DisplayObject>\n        返回所有与指定名称相同的节点(单个)或节点数组(多个)",func:function e(t){return r(function(e){return e.getMyName()==t})}},showHelp:{doc:"()\n        显示帮助\n",func:function e(){if(a){console.log(a)}else{a=n+"\n\n";a+="====== Global Function Begin ======\n\n";for(var t in g){a+="    "+t+g[t].doc+"\n\n"}a+="====== Global Function Done ======";console.log(a)}}}};return g};e.prototype.initCocosCreatorProject=function(){var e="";var t;var i=window.cc;var n=this;var a=function e(){var t=i.find("Canvas");if(!t){t=i.Canvas.instance.node}console.assert(t,"can't find canvas!!!");var n=t;var o=n.parent;while(o){n=o;o=n.parent}return n};var s={showMyName:{doc:"()\n        显示指定节点的名称",func:function e(t){if(t.name==n.JustShowNodeName){return}var o=t.getChildByName(n.JustShowNodeName);if(!o){var a=new i.Node;a.name=n.JustShowNodeName;t.addChild(a);var s=a.addComponent(i.Label);s.string=t.name;a.color=i.color(255,0,0)}else{if(!o.active){o.active=true}}}},showComponents:{doc:"() \n        显示指定节点的所有Component",func:function e(t){t._components.forEach(function(e){console.log(e.name);console.log(e)})}},showChildren:{doc:"() \n        显示指定节点的子节点",func:function e(t){t._children.forEach(function(e,t){console.log(t+":",e)})}},showPath:{doc:"() \n        显示指定节点的路径",func:function e(t){var n=t.parent;var o=t.name;while(n&&n.name!="Canvas"){o=n.name+"/"+o;n=n.parent}if(!n||n.name!="Canvas"){console.log("获取层级失败! "+o)}else{if(i.find("Canvas/"+o)==t){console.log('cc.find("Canvas/'+o+'")')}else{console.log("根据获取结果查找节点失败, 路径中存在重复节点 : ",'cc.find("Canvas/'+o+'")')}}}},stay:{doc:"() \n        使指定节点被点击后跟随鼠标移动",func:function e(t){if(t._touchListener){if(t.oldMove){return}t.oldMove=t._touchListener.onTouchMoved;t._touchListener.onTouchMoved=function(e,i){t.position=t.parent.convertToNodeSpaceAR(e._point);t.owner=t;t.oldMove(e,i)};t.oldEnd=t._touchListener.onTouchEnded;t._touchListener.onTouchEnded=function(){console.log("========\nName: "+t.name);console.log(t);console.log("Position : "+t.position+"\n========");if(t.showPath()){}};t.oldBegin=t._touchListener.onTouchBegan;t._touchListener.onTouchBegan=function(e,i){t.owner=t;return t.oldBegin(e,i)}}else{t.on("touchstart",function(e,t){});t.stay()}}},leave:{doc:"() \n        停止指定节点跟随鼠标移动",func:function e(t){if(!t.oldMove){return}t._touchListener.onTouchMoved=t.oldMove;t._touchListener.onTouchEnded=t.oldEnd;t._touchListener.onTouchBegan=t.oldBegin;t.oldMove=null;t.oldEnd=null;t.oldBegin=null}}};e+="===== Node Function Begin =====\n\n";var c=function t(n){e+="    node."+n+s[n].doc+"\n\n";i.Node.prototype[n]=function(){s[n].func(this)}};for(var r in s){c(r)}e+="====== Node Function Done ======\n";i.Button.prototype.oldOnTouchBegan=i.Button.prototype._onTouchBegan;i.Button.prototype._onTouchBegan=function(e){if(n.showButtonTarget){var t=this;this.clickEvents.forEach(function(e){e&&console.log("\n按钮名称: "+t.node.name+", 绑定回调 : "+e.component+" ---\x3e "+e.handler+"\n\n");t.node.showPath()})}this.oldOnTouchBegan(e)};function l(e,t){if(t===void 0){t=false}var i=a();var o=[];var s=t?function(){return true}:function(e){return e.name!=n.JustShowNodeName};function c(t){if(e(t)&&s(t)){o.push(t)}t.getChildren().forEach(function(e){c(e)})}c(i);if(o.length>1){return o}return o[0]}var d={showAllNode:{doc:"(): void\n        显示所有显示用的节点(附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function e(){l(function(e){e.showMyName();return false})}},hideAllNode:{doc:"(): void\n        隐藏所有显示用的节点(附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function e(){l(function(e){if(e.name==n.JustShowNodeName){e.active=false}return false},true)}},destroyAllShowNode:{doc:"(): void\n        删除所有显示用的节点(附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function e(){l(function(e){if(e.name==n.JustShowNodeName){e.destroy()}return false},true)}},showByName:{doc:"(name: string): void\n        显示所有与指定名称相同的节点(附加的显示节点可能会导致程序报错, 使用destroyAllShowNode()来删除显示用的节点)",func:function e(t){l(function(e){if(e.name==t){e.showMyName()}return false})}},showByComponent:{doc:"(component: string | _cc.Component): void\n        显示所有包含指定控件的节点",func:function e(t){l(function(e){if(e.getComponent(t)){e.showMyName()}return false})}},seekNodeByName:{doc:"(name: string): _cc.Node | Array<_cc.Node>\n        返回所有与指定名称相同的节点(单个)或节点数组(多个)",func:function e(t){return l(function(e){return e.name==t})}},nodeFilter:{doc:"(filter: function, withShowNode:boolean = false) : _cc.Node | Array<_cc.Node>\n        返回所有满足过滤条件的的节点(单个)或节点数组(多个)",func:l},setShowButtonEvent:{doc:"(openOrClose: boolean): void\n        设置显示按钮绑定事件开关, 默认打开, 打开后会在开始点击按钮时显示按钮绑定的事件(一个按钮可能有多个绑定事件)\n        当前显示按钮回调开关 : "+n.showButtonTarget,func:function e(t){n.showButtonTarget=t;console.log("显示按钮回调开关 : "+n.showButtonTarget+" 可以通过setShowButtonEvent(open: boolean)设置\n\n")}},getRootNode:{doc:"(): cc.Node\n        获取场景的root节点",func:function e(){return a()}},getIncludeNameNode:{doc:"(name: string): cc.Node | Array<cc.Node>\n        显示名称包含该字符串的节点",func:function e(t){return l(function(e){return-1!=e.name.indexOf(t)})}},getIncludeStringNode:{doc:"(string: string): cc.Node | Array<cc.Node>\n        显示内容包含该字符串的节点",func:function e(t){return l(function(e){return e.getComponent(i.Label)&&e.getComponent(i.Label).indexOf(t)!==-1})}},moveAllButton:{doc:"(stayOrLeave: boolean): void\n        使场景中所有可见按钮开启(关闭)跟随鼠标移动",func:function e(t){if(t===void 0){t=true}l(function(e){return e.activeInHierarchy&&e.getComponent(i.Button)}).forEach(function(e){if(t){e.stay()}else{e.leave()}})}},moveAllSprite:{doc:"(stayOrLeave: boolean): void\n        使场景中所有可见精灵开启(关闭)跟随鼠标移动",func:function e(t){if(t===void 0){t=true}l(function(e){return e.activeInHierarchy&&e.getComponent(i.Sprite)&&!e.getComponent(i.Button)}).forEach(function(e){if(t){e.stay()}else{e.leave()}})}},moveAllLabel:{doc:"(stayOrLeave: boolean): void\n        使场景中所有可见文字开启(关闭)跟随鼠标移动",func:function e(t){if(t===void 0){t=true}l(function(e){return e.activeInHierarchy&&e.getComponent(i.Label)}).forEach(function(e){if(t){e.stay()}else{e.leave()}})}},stopAllMoveNode:{doc:"(): void\n        使场景中所有节点关闭跟随鼠标移动",func:function e(t){if(t===void 0){t=true}l(function(e){e.leave();return false})}},getInScriptKey:{doc:"(cc.Node): void\n        打印出引用该节点是否已在脚本被引用",func:function e(t){l(function(e){return e!=t&&e._components.filter(function(i){var n=function n(a){var s=i[a];if(s&&(0,o.default)(s)=="object"){if(s==t){console.log(e);console.log(i.name+"--\x3e"+a);return{value:true}}else{if(Array.isArray(s)){s.forEach(function(n,o){if(n==t){console.log(e);console.log(i.name+"--\x3e"+a+"--\x3e"+o);return true}})}}}};for(var a in i){var s=n(a);if((0,o.default)(s)==="object")return s.value}return false}).length>0})}},showHelp:{doc:"()\n        显示帮助\n",func:function i(){if(t){console.log(t)}else{t=e+"\n\n";t+="====== Global Function Begin ======\n\n";for(var n in d){t+="    "+n+d[n].doc+"\n\n"}t+="====== Global Function Done ======";console.log(t)}}}};return d};return e}();new c}}])});